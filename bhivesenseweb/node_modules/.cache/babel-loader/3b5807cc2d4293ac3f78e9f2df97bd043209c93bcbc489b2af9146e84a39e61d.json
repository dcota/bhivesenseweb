{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*!\r\n * Chartkick.js v5.0.1\r\n * Create beautiful charts with one line of JavaScript\r\n * https://github.com/ankane/chartkick.js\r\n * MIT License\r\n */\n\nfunction isArray(variable) {\n  return Object.prototype.toString.call(variable) === \"[object Array]\";\n}\nfunction isFunction(variable) {\n  return variable instanceof Function;\n}\nfunction isPlainObject(variable) {\n  // protect against prototype pollution, defense 2\n  return Object.prototype.toString.call(variable) === \"[object Object]\" && !isFunction(variable) && variable instanceof Object;\n}\n\n// https://github.com/madrobby/zepto/blob/master/src/zepto.js\nfunction extend(target, source) {\n  for (var key in source) {\n    // protect against prototype pollution, defense 1\n    if (key === \"__proto__\") {\n      continue;\n    }\n    if (isPlainObject(source[key]) || isArray(source[key])) {\n      if (isPlainObject(source[key]) && !isPlainObject(target[key])) {\n        target[key] = {};\n      }\n      if (isArray(source[key]) && !isArray(target[key])) {\n        target[key] = [];\n      }\n      extend(target[key], source[key]);\n    } else if (source[key] !== undefined) {\n      target[key] = source[key];\n    }\n  }\n}\nfunction merge(obj1, obj2) {\n  var target = {};\n  extend(target, obj1);\n  extend(target, obj2);\n  return target;\n}\nvar DATE_PATTERN = /^(\\d\\d\\d\\d)(?:-)?(\\d\\d)(?:-)?(\\d\\d)$/i;\nfunction negativeValues(series) {\n  for (var i = 0; i < series.length; i++) {\n    var data = series[i].data;\n    for (var j = 0; j < data.length; j++) {\n      if (data[j][1] < 0) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\nfunction toStr(obj) {\n  return \"\" + obj;\n}\nfunction toFloat(obj) {\n  return parseFloat(obj);\n}\nfunction toDate(obj) {\n  if (obj instanceof Date) {\n    return obj;\n  } else if (typeof obj === \"number\") {\n    return new Date(obj * 1000); // ms\n  } else {\n    var s = toStr(obj);\n    var matches = s.match(DATE_PATTERN);\n    if (matches) {\n      var year = parseInt(matches[1], 10);\n      var month = parseInt(matches[2], 10) - 1;\n      var day = parseInt(matches[3], 10);\n      return new Date(year, month, day);\n    } else {\n      // try our best to get the str into iso8601\n      // TODO be smarter about this\n      var str = s.replace(/ /, \"T\").replace(\" \", \"\").replace(\"UTC\", \"Z\");\n      // Date.parse returns milliseconds if valid and NaN if invalid\n      return new Date(Date.parse(str) || s);\n    }\n  }\n}\nfunction toArr(obj) {\n  if (isArray(obj)) {\n    return obj;\n  } else {\n    var arr = [];\n    for (var i in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, i)) {\n        arr.push([i, obj[i]]);\n      }\n    }\n    return arr;\n  }\n}\nfunction jsOptionsFunc(defaultOptions, hideLegend, setTitle, setMin, setMax, setStacked, setXtitle, setYtitle) {\n  return function (chart, opts, chartOptions) {\n    var series = chart.data;\n    var options = merge({}, defaultOptions);\n    options = merge(options, chartOptions || {});\n    if (chart.singleSeriesFormat || \"legend\" in opts) {\n      hideLegend(options, opts.legend, chart.singleSeriesFormat);\n    }\n    if (opts.title) {\n      setTitle(options, opts.title);\n    }\n\n    // min\n    if (\"min\" in opts) {\n      setMin(options, opts.min);\n    } else if (!negativeValues(series)) {\n      setMin(options, 0);\n    }\n\n    // max\n    if (opts.max) {\n      setMax(options, opts.max);\n    }\n    if (\"stacked\" in opts) {\n      setStacked(options, opts.stacked);\n    }\n    if (opts.colors) {\n      options.colors = opts.colors;\n    }\n    if (opts.xtitle) {\n      setXtitle(options, opts.xtitle);\n    }\n    if (opts.ytitle) {\n      setYtitle(options, opts.ytitle);\n    }\n\n    // merge library last\n    options = merge(options, opts.library || {});\n    return options;\n  };\n}\nfunction sortByTime(a, b) {\n  return a[0].getTime() - b[0].getTime();\n}\nfunction sortByNumberSeries(a, b) {\n  return a[0] - b[0];\n}\n\n// needed since sort() without arguments does string comparison\nfunction sortByNumber(a, b) {\n  return a - b;\n}\nfunction every(values, fn) {\n  for (var i = 0; i < values.length; i++) {\n    if (!fn(values[i])) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isDay(timeUnit) {\n  return timeUnit === \"day\" || timeUnit === \"week\" || timeUnit === \"month\" || timeUnit === \"year\";\n}\nfunction calculateTimeUnit(values, maxDay) {\n  if (maxDay === void 0) maxDay = false;\n  if (values.length === 0) {\n    return null;\n  }\n  var minute = every(values, function (d) {\n    return d.getMilliseconds() === 0 && d.getSeconds() === 0;\n  });\n  if (!minute) {\n    return null;\n  }\n  var hour = every(values, function (d) {\n    return d.getMinutes() === 0;\n  });\n  if (!hour) {\n    return \"minute\";\n  }\n  var day = every(values, function (d) {\n    return d.getHours() === 0;\n  });\n  if (!day) {\n    return \"hour\";\n  }\n  if (maxDay) {\n    return \"day\";\n  }\n  var month = every(values, function (d) {\n    return d.getDate() === 1;\n  });\n  if (!month) {\n    var dayOfWeek = values[0].getDay();\n    var week = every(values, function (d) {\n      return d.getDay() === dayOfWeek;\n    });\n    return week ? \"week\" : \"day\";\n  }\n  var year = every(values, function (d) {\n    return d.getMonth() === 0;\n  });\n  if (!year) {\n    return \"month\";\n  }\n  return \"year\";\n}\nfunction isDate(obj) {\n  return !isNaN(toDate(obj)) && toStr(obj).length >= 6;\n}\nfunction isNumber(obj) {\n  return typeof obj === \"number\";\n}\nvar byteSuffixes = [\"bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\"];\nfunction formatValue(pre, value, options, axis) {\n  pre = pre || \"\";\n  if (options.prefix) {\n    if (value < 0) {\n      value = value * -1;\n      pre += \"-\";\n    }\n    pre += options.prefix;\n  }\n  var suffix = options.suffix || \"\";\n  var precision = options.precision;\n  var round = options.round;\n  if (options.byteScale) {\n    var positive = value >= 0;\n    if (!positive) {\n      value *= -1;\n    }\n    var baseValue = axis ? options.byteScale : value;\n    var suffixIdx;\n    if (baseValue >= 1152921504606846976) {\n      value /= 1152921504606846976;\n      suffixIdx = 6;\n    } else if (baseValue >= 1125899906842624) {\n      value /= 1125899906842624;\n      suffixIdx = 5;\n    } else if (baseValue >= 1099511627776) {\n      value /= 1099511627776;\n      suffixIdx = 4;\n    } else if (baseValue >= 1073741824) {\n      value /= 1073741824;\n      suffixIdx = 3;\n    } else if (baseValue >= 1048576) {\n      value /= 1048576;\n      suffixIdx = 2;\n    } else if (baseValue >= 1024) {\n      value /= 1024;\n      suffixIdx = 1;\n    } else {\n      suffixIdx = 0;\n    }\n\n    // TODO handle manual precision case\n    if (precision === undefined && round === undefined) {\n      if (value >= 1023.5) {\n        if (suffixIdx < byteSuffixes.length - 1) {\n          value = 1.0;\n          suffixIdx += 1;\n        }\n      }\n      precision = value >= 1000 ? 4 : 3;\n    }\n    suffix = \" \" + byteSuffixes[suffixIdx];\n\n    // flip value back\n    if (!positive) {\n      value *= -1;\n    }\n  }\n  if (precision !== undefined && round !== undefined) {\n    throw Error(\"Use either round or precision, not both\");\n  }\n  if (!axis) {\n    if (precision !== undefined) {\n      value = value.toPrecision(precision);\n      if (!options.zeros) {\n        value = parseFloat(value);\n      }\n    }\n    if (round !== undefined) {\n      if (round < 0) {\n        var num = Math.pow(10, -1 * round);\n        value = parseInt((1.0 * value / num).toFixed(0)) * num;\n      } else {\n        value = value.toFixed(round);\n        if (!options.zeros) {\n          value = parseFloat(value);\n        }\n      }\n    }\n  }\n  if (options.thousands || options.decimal) {\n    value = toStr(value);\n    var parts = value.split(\".\");\n    value = parts[0];\n    if (options.thousands) {\n      value = value.replace(/\\B(?=(\\d{3})+(?!\\d))/g, options.thousands);\n    }\n    if (parts.length > 1) {\n      value += (options.decimal || \".\") + parts[1];\n    }\n  }\n  return pre + value + suffix;\n}\nfunction seriesOption(chart, series, option) {\n  if (option in series) {\n    return series[option];\n  } else if (option in chart.options) {\n    return chart.options[option];\n  }\n  return null;\n}\nvar baseOptions = {\n  maintainAspectRatio: false,\n  animation: false,\n  plugins: {\n    legend: {},\n    tooltip: {\n      displayColors: false,\n      callbacks: {}\n    },\n    title: {\n      font: {\n        size: 20\n      },\n      color: \"#333\"\n    }\n  },\n  interaction: {}\n};\nvar defaultOptions$2 = {\n  scales: {\n    y: {\n      ticks: {\n        maxTicksLimit: 4\n      },\n      title: {\n        font: {\n          size: 16\n        },\n        color: \"#333\"\n      },\n      grid: {}\n    },\n    x: {\n      grid: {\n        drawOnChartArea: false\n      },\n      title: {\n        font: {\n          size: 16\n        },\n        color: \"#333\"\n      },\n      time: {},\n      ticks: {}\n    }\n  }\n};\n\n// http://there4.io/2012/05/02/google-chart-color-list/\nvar defaultColors = [\"#3366CC\", \"#DC3912\", \"#FF9900\", \"#109618\", \"#990099\", \"#3B3EAC\", \"#0099C6\", \"#DD4477\", \"#66AA00\", \"#B82E2E\", \"#316395\", \"#994499\", \"#22AA99\", \"#AAAA11\", \"#6633CC\", \"#E67300\", \"#8B0707\", \"#329262\", \"#5574A6\", \"#651067\"];\nfunction hideLegend$2(options, legend, hideLegend) {\n  if (legend !== undefined) {\n    options.plugins.legend.display = !!legend;\n    if (legend && legend !== true) {\n      options.plugins.legend.position = legend;\n    }\n  } else if (hideLegend) {\n    options.plugins.legend.display = false;\n  }\n}\nfunction setTitle$2(options, title) {\n  options.plugins.title.display = true;\n  options.plugins.title.text = title;\n}\nfunction setMin$2(options, min) {\n  if (min !== null) {\n    options.scales.y.min = toFloat(min);\n  }\n}\nfunction setMax$2(options, max) {\n  options.scales.y.max = toFloat(max);\n}\nfunction setBarMin$1(options, min) {\n  if (min !== null) {\n    options.scales.x.min = toFloat(min);\n  }\n}\nfunction setBarMax$1(options, max) {\n  options.scales.x.max = toFloat(max);\n}\nfunction setStacked$2(options, stacked) {\n  options.scales.x.stacked = !!stacked;\n  options.scales.y.stacked = !!stacked;\n}\nfunction setXtitle$2(options, title) {\n  options.scales.x.title.display = true;\n  options.scales.x.title.text = title;\n}\nfunction setYtitle$2(options, title) {\n  options.scales.y.title.display = true;\n  options.scales.y.title.text = title;\n}\n\n// https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\nfunction addOpacity(hex, opacity) {\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? \"rgba(\" + parseInt(result[1], 16) + \", \" + parseInt(result[2], 16) + \", \" + parseInt(result[3], 16) + \", \" + opacity + \")\" : hex;\n}\nfunction notnull(x) {\n  return x !== null && x !== undefined;\n}\nfunction setLabelSize(chart, data, options) {\n  var maxLabelSize = Math.ceil(chart.element.offsetWidth / 4.0 / data.labels.length);\n  if (maxLabelSize > 25) {\n    maxLabelSize = 25;\n  } else if (maxLabelSize < 10) {\n    maxLabelSize = 10;\n  }\n  if (!options.scales.x.ticks.callback) {\n    options.scales.x.ticks.callback = function (value) {\n      value = toStr(this.getLabelForValue(value));\n      if (value.length > maxLabelSize) {\n        return value.substring(0, maxLabelSize - 2) + \"...\";\n      } else {\n        return value;\n      }\n    };\n  }\n}\nfunction calculateScale(series) {\n  var scale = 1;\n  var max = maxAbsY(series);\n  while (max >= 1024) {\n    scale *= 1024;\n    max /= 1024;\n  }\n  return scale;\n}\nfunction setFormatOptions$1(chart, options, chartType) {\n  // options to apply to x and r values for scatter and bubble\n  var numericOptions = {\n    thousands: chart.options.thousands,\n    decimal: chart.options.decimal\n  };\n\n  // options to apply to y value\n  var formatOptions = merge({\n    prefix: chart.options.prefix,\n    suffix: chart.options.suffix,\n    precision: chart.options.precision,\n    round: chart.options.round,\n    zeros: chart.options.zeros\n  }, numericOptions);\n  if (chart.options.bytes) {\n    var series = chart.data;\n    if (chartType === \"pie\") {\n      series = [{\n        data: series\n      }];\n    }\n\n    // set step size\n    formatOptions.byteScale = calculateScale(series);\n  }\n  if (chartType !== \"pie\") {\n    var axis = options.scales.y;\n    if (chartType === \"bar\") {\n      axis = options.scales.x;\n    }\n    if (formatOptions.byteScale) {\n      if (!axis.ticks.stepSize) {\n        axis.ticks.stepSize = formatOptions.byteScale / 2;\n      }\n      if (!axis.ticks.maxTicksLimit) {\n        axis.ticks.maxTicksLimit = 4;\n      }\n    }\n    if (!axis.ticks.callback) {\n      axis.ticks.callback = function (value) {\n        return formatValue(\"\", value, formatOptions, true);\n      };\n    }\n    if ((chartType === \"scatter\" || chartType === \"bubble\") && !options.scales.x.ticks.callback) {\n      options.scales.x.ticks.callback = function (value) {\n        return formatValue(\"\", value, numericOptions, true);\n      };\n    }\n  }\n  if (!options.plugins.tooltip.callbacks.label) {\n    if (chartType === \"scatter\") {\n      options.plugins.tooltip.callbacks.label = function (context) {\n        var label = context.dataset.label || '';\n        if (label) {\n          label += ': ';\n        }\n        var dataPoint = context.parsed;\n        return label + '(' + formatValue('', dataPoint.x, numericOptions) + ', ' + formatValue('', dataPoint.y, formatOptions) + ')';\n      };\n    } else if (chartType === \"bubble\") {\n      options.plugins.tooltip.callbacks.label = function (context) {\n        var label = context.dataset.label || '';\n        if (label) {\n          label += ': ';\n        }\n        var dataPoint = context.raw;\n        return label + '(' + formatValue('', dataPoint.x, numericOptions) + ', ' + formatValue('', dataPoint.y, formatOptions) + ', ' + formatValue('', dataPoint.v, numericOptions) + ')';\n      };\n    } else if (chartType === \"pie\") {\n      // need to use separate label for pie charts\n      options.plugins.tooltip.callbacks.label = function (context) {\n        return formatValue('', context.parsed, formatOptions);\n      };\n    } else {\n      var valueLabel = chartType === \"bar\" ? \"x\" : \"y\";\n      options.plugins.tooltip.callbacks.label = function (context) {\n        // don't show null values for stacked charts\n        if (context.parsed[valueLabel] === null) {\n          return;\n        }\n        var label = context.dataset.label || '';\n        if (label) {\n          label += ': ';\n        }\n        return formatValue(label, context.parsed[valueLabel], formatOptions);\n      };\n    }\n  }\n\n  // avoid formatting x-axis labels\n  // by default, Chart.js applies locale\n  if ((chartType === \"line\" || chartType === \"area\") && chart.xtype === \"number\") {\n    if (!options.scales.x.ticks.callback) {\n      options.scales.x.ticks.callback = function (value) {\n        return toStr(value);\n      };\n    }\n    if (!options.plugins.tooltip.callbacks.title) {\n      options.plugins.tooltip.callbacks.title = function (context) {\n        return toStr(context[0].parsed.x);\n      };\n    }\n  }\n}\nfunction maxAbsY(series) {\n  var max = 0;\n  for (var i = 0; i < series.length; i++) {\n    var data = series[i].data;\n    for (var j = 0; j < data.length; j++) {\n      var v = Math.abs(data[j][1]);\n      if (v > max) {\n        max = v;\n      }\n    }\n  }\n  return max;\n}\nfunction maxR(series) {\n  // start at zero since radius must be positive\n  var max = 0;\n  for (var i = 0; i < series.length; i++) {\n    var data = series[i].data;\n    for (var j = 0; j < data.length; j++) {\n      var v = data[j][2];\n      if (v > max) {\n        max = v;\n      }\n    }\n  }\n  return max;\n}\nvar jsOptions$2 = jsOptionsFunc(merge(baseOptions, defaultOptions$2), hideLegend$2, setTitle$2, setMin$2, setMax$2, setStacked$2, setXtitle$2, setYtitle$2);\nfunction prepareDefaultData(chart) {\n  var series = chart.data;\n  var rows = {};\n  var keys = [];\n  var labels = [];\n  var values = [];\n  for (var i = 0; i < series.length; i++) {\n    var data = series[i].data;\n    for (var j = 0; j < data.length; j++) {\n      var d = data[j];\n      var key = chart.xtype === \"datetime\" ? d[0].getTime() : d[0];\n      if (!rows[key]) {\n        rows[key] = new Array(series.length);\n        keys.push(key);\n      }\n      rows[key][i] = d[1];\n    }\n  }\n  if (chart.xtype === \"datetime\" || chart.xtype === \"number\") {\n    keys.sort(sortByNumber);\n  }\n  for (var i$1 = 0; i$1 < series.length; i$1++) {\n    values.push([]);\n  }\n  for (var i$2 = 0; i$2 < keys.length; i$2++) {\n    var key$1 = keys[i$2];\n    var label = chart.xtype === \"datetime\" ? new Date(key$1) : key$1;\n    labels.push(label);\n    var row = rows[key$1];\n    for (var j$1 = 0; j$1 < series.length; j$1++) {\n      var v = row[j$1];\n      // Chart.js doesn't like undefined\n      values[j$1].push(v === undefined ? null : v);\n    }\n  }\n  return {\n    labels: labels,\n    values: values\n  };\n}\nfunction prepareBubbleData(chart) {\n  var series = chart.data;\n  var values = [];\n  var max = maxR(series);\n  for (var i = 0; i < series.length; i++) {\n    var data = series[i].data;\n    var points = [];\n    for (var j = 0; j < data.length; j++) {\n      var v = data[j];\n      points.push({\n        x: v[0],\n        y: v[1],\n        r: v[2] * 20 / max,\n        // custom attribute, for tooltip\n        v: v[2]\n      });\n    }\n    values.push(points);\n  }\n  return {\n    labels: [],\n    values: values\n  };\n}\n\n// scatter or numeric line/area\nfunction prepareNumberData(chart) {\n  var series = chart.data;\n  var values = [];\n  for (var i = 0; i < series.length; i++) {\n    var data = series[i].data;\n    data.sort(sortByNumberSeries);\n    var points = [];\n    for (var j = 0; j < data.length; j++) {\n      var v = data[j];\n      points.push({\n        x: v[0],\n        y: v[1]\n      });\n    }\n    values.push(points);\n  }\n  return {\n    labels: [],\n    values: values\n  };\n}\nfunction prepareData(chart, chartType) {\n  if (chartType === \"bubble\") {\n    return prepareBubbleData(chart);\n  } else if (chart.xtype === \"number\" && chartType !== \"bar\" && chartType !== \"column\") {\n    return prepareNumberData(chart);\n  } else {\n    return prepareDefaultData(chart);\n  }\n}\nfunction createDataTable(chart, options, chartType) {\n  var ref = prepareData(chart, chartType);\n  var labels = ref.labels;\n  var values = ref.values;\n  var series = chart.data;\n  var datasets = [];\n  var colors = chart.options.colors || defaultColors;\n  for (var i = 0; i < series.length; i++) {\n    var s = series[i];\n\n    // use colors for each bar for single series format\n    var color = void 0;\n    var backgroundColor = void 0;\n    if (chart.options.colors && chart.singleSeriesFormat && (chartType === \"bar\" || chartType === \"column\") && !s.color && isArray(chart.options.colors) && !isArray(chart.options.colors[0])) {\n      color = colors;\n      backgroundColor = [];\n      for (var j = 0; j < colors.length; j++) {\n        backgroundColor[j] = addOpacity(color[j], 0.5);\n      }\n    } else {\n      color = s.color || colors[i];\n      backgroundColor = chartType !== \"line\" ? addOpacity(color, 0.5) : color;\n    }\n    var dataset = {\n      label: s.name || \"\",\n      data: values[i],\n      fill: chartType === \"area\",\n      borderColor: color,\n      backgroundColor: backgroundColor,\n      borderWidth: 2\n    };\n    var pointChart = chartType === \"line\" || chartType === \"area\" || chartType === \"scatter\" || chartType === \"bubble\";\n    if (pointChart) {\n      dataset.pointBackgroundColor = color;\n      dataset.pointHoverBackgroundColor = color;\n      dataset.pointHitRadius = 50;\n    }\n    if (chartType === \"bubble\") {\n      dataset.pointBackgroundColor = backgroundColor;\n      dataset.pointHoverBackgroundColor = backgroundColor;\n      dataset.pointHoverBorderWidth = 2;\n    }\n    if (s.stack) {\n      dataset.stack = s.stack;\n    }\n    var curve = seriesOption(chart, s, \"curve\");\n    if (curve === false) {\n      dataset.tension = 0;\n    } else if (pointChart) {\n      dataset.tension = 0.4;\n    }\n    var points = seriesOption(chart, s, \"points\");\n    if (points === false) {\n      dataset.pointRadius = 0;\n      dataset.pointHoverRadius = 0;\n    }\n    dataset = merge(dataset, chart.options.dataset || {});\n    dataset = merge(dataset, s.library || {});\n    dataset = merge(dataset, s.dataset || {});\n    datasets.push(dataset);\n  }\n  var xmin = chart.options.xmin;\n  var xmax = chart.options.xmax;\n  if (chart.xtype === \"datetime\") {\n    if (notnull(xmin)) {\n      options.scales.x.min = toDate(xmin).getTime();\n    }\n    if (notnull(xmax)) {\n      options.scales.x.max = toDate(xmax).getTime();\n    }\n  } else if (chart.xtype === \"number\") {\n    if (notnull(xmin)) {\n      options.scales.x.min = xmin;\n    }\n    if (notnull(xmax)) {\n      options.scales.x.max = xmax;\n    }\n  }\n  if (chart.xtype === \"datetime\") {\n    var timeUnit = calculateTimeUnit(labels);\n\n    // for empty datetime chart\n    if (labels.length === 0) {\n      if (notnull(xmin)) {\n        labels.push(toDate(xmin));\n      }\n      if (notnull(xmax)) {\n        labels.push(toDate(xmax));\n      }\n    }\n    if (labels.length > 0) {\n      var minTime = (notnull(xmin) ? toDate(xmin) : labels[0]).getTime();\n      var maxTime = (notnull(xmax) ? toDate(xmax) : labels[0]).getTime();\n      for (var i$1 = 1; i$1 < labels.length; i$1++) {\n        var value = labels[i$1].getTime();\n        if (value < minTime) {\n          minTime = value;\n        }\n        if (value > maxTime) {\n          maxTime = value;\n        }\n      }\n      var timeDiff = (maxTime - minTime) / (86400 * 1000.0);\n      if (!options.scales.x.time.unit) {\n        var step;\n        if (timeUnit === \"year\" || timeDiff > 365 * 10) {\n          options.scales.x.time.unit = \"year\";\n          step = 365;\n        } else if (timeUnit === \"month\" || timeDiff > 30 * 10) {\n          options.scales.x.time.unit = \"month\";\n          step = 30;\n        } else if (timeUnit === \"week\" || timeUnit === \"day\" || timeDiff > 10) {\n          options.scales.x.time.unit = \"day\";\n          step = 1;\n        } else if (timeUnit === \"hour\" || timeDiff > 0.5) {\n          options.scales.x.time.displayFormats = {\n            hour: \"MMM d, h a\"\n          };\n          options.scales.x.time.unit = \"hour\";\n          step = 1 / 24.0;\n        } else if (timeUnit === \"minute\") {\n          options.scales.x.time.displayFormats = {\n            minute: \"h:mm a\"\n          };\n          options.scales.x.time.unit = \"minute\";\n          step = 1 / 24.0 / 60.0;\n        }\n        if (step && timeDiff > 0) {\n          // width not available for hidden elements\n          var width = chart.element.offsetWidth;\n          if (width > 0) {\n            var unitStepSize = Math.ceil(timeDiff / step / (width / 100.0));\n            if (timeUnit === \"week\" && step === 1) {\n              unitStepSize = Math.ceil(unitStepSize / 7.0) * 7;\n            }\n            options.scales.x.ticks.stepSize = unitStepSize;\n          }\n        }\n      }\n      if (!options.scales.x.time.tooltipFormat) {\n        if (timeUnit === \"year\") {\n          options.scales.x.time.tooltipFormat = \"yyyy\";\n        } else if (timeUnit === \"month\") {\n          options.scales.x.time.tooltipFormat = \"MMM yyyy\";\n        } else if (timeUnit === \"week\" || timeUnit === \"day\") {\n          options.scales.x.time.tooltipFormat = \"PP\";\n        } else if (timeUnit === \"hour\") {\n          options.scales.x.time.tooltipFormat = \"MMM d, h a\";\n        } else if (timeUnit === \"minute\") {\n          options.scales.x.time.tooltipFormat = \"h:mm a\";\n        }\n      }\n    }\n  }\n  return {\n    labels: labels,\n    datasets: datasets\n  };\n}\nvar defaultExport$2 = function defaultExport(library) {\n  this.name = \"chartjs\";\n  this.library = library;\n};\ndefaultExport$2.prototype.renderLineChart = function renderLineChart(chart, chartType) {\n  if (!chartType) {\n    chartType = \"line\";\n  }\n  var chartOptions = {};\n  var options = jsOptions$2(chart, merge(chartOptions, chart.options));\n  setFormatOptions$1(chart, options, chartType);\n  var data = createDataTable(chart, options, chartType);\n  if (chart.xtype === \"number\") {\n    options.scales.x.type = options.scales.x.type || \"linear\";\n    options.scales.x.position = options.scales.x.position || \"bottom\";\n  } else {\n    options.scales.x.type = chart.xtype === \"string\" ? \"category\" : \"time\";\n  }\n  this.drawChart(chart, \"line\", data, options);\n};\ndefaultExport$2.prototype.renderPieChart = function renderPieChart(chart) {\n  var options = merge({}, baseOptions);\n  if (chart.options.donut) {\n    options.cutout = \"50%\";\n  }\n  if (\"legend\" in chart.options) {\n    hideLegend$2(options, chart.options.legend);\n  }\n  if (chart.options.title) {\n    setTitle$2(options, chart.options.title);\n  }\n  options = merge(options, chart.options.library || {});\n  setFormatOptions$1(chart, options, \"pie\");\n  var labels = [];\n  var values = [];\n  for (var i = 0; i < chart.data.length; i++) {\n    var point = chart.data[i];\n    labels.push(point[0]);\n    values.push(point[1]);\n  }\n  var dataset = {\n    data: values,\n    backgroundColor: chart.options.colors || defaultColors\n  };\n  dataset = merge(dataset, chart.options.dataset || {});\n  var data = {\n    labels: labels,\n    datasets: [dataset]\n  };\n  this.drawChart(chart, \"pie\", data, options);\n};\ndefaultExport$2.prototype.renderColumnChart = function renderColumnChart(chart, chartType) {\n  var options;\n  if (chartType === \"bar\") {\n    var barOptions = merge(baseOptions, defaultOptions$2);\n    barOptions.indexAxis = \"y\";\n\n    // ensure gridlines have proper orientation\n    barOptions.scales.x.grid.drawOnChartArea = true;\n    barOptions.scales.y.grid.drawOnChartArea = false;\n    delete barOptions.scales.y.ticks.maxTicksLimit;\n    options = jsOptionsFunc(barOptions, hideLegend$2, setTitle$2, setBarMin$1, setBarMax$1, setStacked$2, setXtitle$2, setYtitle$2)(chart, chart.options);\n  } else {\n    options = jsOptions$2(chart, chart.options);\n  }\n  setFormatOptions$1(chart, options, chartType);\n  var data = createDataTable(chart, options, \"column\");\n  if (chartType !== \"bar\") {\n    setLabelSize(chart, data, options);\n  }\n  if (!(\"mode\" in options.interaction)) {\n    options.interaction.mode = \"index\";\n  }\n  this.drawChart(chart, \"bar\", data, options);\n};\ndefaultExport$2.prototype.renderAreaChart = function renderAreaChart(chart) {\n  this.renderLineChart(chart, \"area\");\n};\ndefaultExport$2.prototype.renderBarChart = function renderBarChart(chart) {\n  this.renderColumnChart(chart, \"bar\");\n};\ndefaultExport$2.prototype.renderScatterChart = function renderScatterChart(chart, chartType) {\n  chartType = chartType || \"scatter\";\n  var options = jsOptions$2(chart, chart.options);\n  setFormatOptions$1(chart, options, chartType);\n  if (!(\"showLine\" in options)) {\n    options.showLine = false;\n  }\n  var data = createDataTable(chart, options, chartType);\n  options.scales.x.type = options.scales.x.type || \"linear\";\n  options.scales.x.position = options.scales.x.position || \"bottom\";\n\n  // prevent grouping hover and tooltips\n  if (!(\"mode\" in options.interaction)) {\n    options.interaction.mode = \"nearest\";\n  }\n  this.drawChart(chart, chartType, data, options);\n};\ndefaultExport$2.prototype.renderBubbleChart = function renderBubbleChart(chart) {\n  this.renderScatterChart(chart, \"bubble\");\n};\ndefaultExport$2.prototype.destroy = function destroy(chart) {\n  if (chart.chart) {\n    chart.chart.destroy();\n  }\n};\ndefaultExport$2.prototype.drawChart = function drawChart(chart, type, data, options) {\n  this.destroy(chart);\n  if (chart.destroyed) {\n    return;\n  }\n  var chartOptions = {\n    type: type,\n    data: data,\n    options: options\n  };\n  if (chart.options.code) {\n    window.console.log(\"new Chart(ctx, \" + JSON.stringify(chartOptions) + \");\");\n  }\n  chart.element.innerHTML = \"<canvas></canvas>\";\n  var ctx = chart.element.getElementsByTagName(\"CANVAS\")[0];\n  chart.chart = new this.library(ctx, chartOptions);\n};\nvar defaultOptions$1 = {\n  chart: {},\n  xAxis: {\n    title: {\n      text: null\n    },\n    labels: {\n      style: {\n        fontSize: \"12px\"\n      }\n    }\n  },\n  yAxis: {\n    title: {\n      text: null\n    },\n    labels: {\n      style: {\n        fontSize: \"12px\"\n      }\n    }\n  },\n  title: {\n    text: null\n  },\n  credits: {\n    enabled: false\n  },\n  legend: {\n    borderWidth: 0\n  },\n  tooltip: {\n    style: {\n      fontSize: \"12px\"\n    }\n  },\n  plotOptions: {\n    areaspline: {},\n    area: {},\n    series: {\n      marker: {}\n    }\n  },\n  time: {\n    useUTC: false\n  }\n};\nfunction hideLegend$1(options, legend, hideLegend) {\n  if (legend !== undefined) {\n    options.legend.enabled = !!legend;\n    if (legend && legend !== true) {\n      if (legend === \"top\" || legend === \"bottom\") {\n        options.legend.verticalAlign = legend;\n      } else {\n        options.legend.layout = \"vertical\";\n        options.legend.verticalAlign = \"middle\";\n        options.legend.align = legend;\n      }\n    }\n  } else if (hideLegend) {\n    options.legend.enabled = false;\n  }\n}\nfunction setTitle$1(options, title) {\n  options.title.text = title;\n}\nfunction setMin$1(options, min) {\n  options.yAxis.min = min;\n}\nfunction setMax$1(options, max) {\n  options.yAxis.max = max;\n}\nfunction setStacked$1(options, stacked) {\n  var stackedValue = stacked ? stacked === true ? \"normal\" : stacked : null;\n  options.plotOptions.series.stacking = stackedValue;\n  options.plotOptions.area.stacking = stackedValue;\n  options.plotOptions.areaspline.stacking = stackedValue;\n}\nfunction setXtitle$1(options, title) {\n  options.xAxis.title.text = title;\n}\nfunction setYtitle$1(options, title) {\n  options.yAxis.title.text = title;\n}\nvar jsOptions$1 = jsOptionsFunc(defaultOptions$1, hideLegend$1, setTitle$1, setMin$1, setMax$1, setStacked$1, setXtitle$1, setYtitle$1);\nfunction setFormatOptions(chart, options, chartType) {\n  var formatOptions = {\n    prefix: chart.options.prefix,\n    suffix: chart.options.suffix,\n    thousands: chart.options.thousands,\n    decimal: chart.options.decimal,\n    precision: chart.options.precision,\n    round: chart.options.round,\n    zeros: chart.options.zeros\n  };\n\n  // skip when axis is an array (like with min/max)\n  if (chartType !== \"pie\" && !isArray(options.yAxis) && !options.yAxis.labels.formatter) {\n    options.yAxis.labels.formatter = function () {\n      return formatValue(\"\", this.value, formatOptions);\n    };\n  }\n  if (!options.tooltip.pointFormatter && !options.tooltip.pointFormat) {\n    options.tooltip.pointFormatter = function () {\n      return '<span style=\"color:' + this.color + '\">\\u25CF</span> ' + formatValue(this.series.name + ': <b>', this.y, formatOptions) + '</b><br/>';\n    };\n  }\n}\nvar defaultExport$1 = function defaultExport(library) {\n  this.name = \"highcharts\";\n  this.library = library;\n};\ndefaultExport$1.prototype.renderLineChart = function renderLineChart(chart, chartType) {\n  chartType = chartType || \"spline\";\n  var chartOptions = {};\n  if (chartType === \"areaspline\") {\n    chartOptions = {\n      plotOptions: {\n        areaspline: {\n          stacking: \"normal\"\n        },\n        area: {\n          stacking: \"normal\"\n        },\n        series: {\n          marker: {\n            enabled: false\n          }\n        }\n      }\n    };\n  }\n  if (chart.options.curve === false) {\n    if (chartType === \"areaspline\") {\n      chartType = \"area\";\n    } else if (chartType === \"spline\") {\n      chartType = \"line\";\n    }\n  }\n  var options = jsOptions$1(chart, chart.options, chartOptions);\n  if (chart.xtype === \"number\") {\n    options.xAxis.type = options.xAxis.type || \"linear\";\n  } else {\n    options.xAxis.type = chart.xtype === \"string\" ? \"category\" : \"datetime\";\n  }\n  if (!options.chart.type) {\n    options.chart.type = chartType;\n  }\n  setFormatOptions(chart, options, chartType);\n  var series = chart.data;\n  for (var i = 0; i < series.length; i++) {\n    series[i].name = series[i].name || \"Value\";\n    var data = series[i].data;\n    if (chart.xtype === \"datetime\") {\n      for (var j = 0; j < data.length; j++) {\n        data[j][0] = data[j][0].getTime();\n      }\n    } else if (chart.xtype === \"number\") {\n      data.sort(sortByNumberSeries);\n    }\n    series[i].marker = {\n      symbol: \"circle\"\n    };\n    if (chart.options.points === false) {\n      series[i].marker.enabled = false;\n    }\n  }\n  this.drawChart(chart, series, options);\n};\ndefaultExport$1.prototype.renderScatterChart = function renderScatterChart(chart) {\n  var options = jsOptions$1(chart, chart.options, {});\n  options.chart.type = \"scatter\";\n  this.drawChart(chart, chart.data, options);\n};\ndefaultExport$1.prototype.renderPieChart = function renderPieChart(chart) {\n  var chartOptions = merge(defaultOptions$1, {});\n  if (chart.options.colors) {\n    chartOptions.colors = chart.options.colors;\n  }\n  if (chart.options.donut) {\n    chartOptions.plotOptions = {\n      pie: {\n        innerSize: \"50%\"\n      }\n    };\n  }\n  if (\"legend\" in chart.options) {\n    hideLegend$1(chartOptions, chart.options.legend);\n  }\n  if (chart.options.title) {\n    setTitle$1(chartOptions, chart.options.title);\n  }\n  var options = merge(chartOptions, chart.options.library || {});\n  setFormatOptions(chart, options, \"pie\");\n  var series = [{\n    type: \"pie\",\n    name: chart.options.label || \"Value\",\n    data: chart.data\n  }];\n  this.drawChart(chart, series, options);\n};\ndefaultExport$1.prototype.renderColumnChart = function renderColumnChart(chart, chartType) {\n  chartType = chartType || \"column\";\n  var series = chart.data;\n  var options = jsOptions$1(chart, chart.options);\n  var rows = [];\n  var categories = [];\n  options.chart.type = chartType;\n  setFormatOptions(chart, options, chartType);\n  for (var i = 0; i < series.length; i++) {\n    var s = series[i];\n    for (var j = 0; j < s.data.length; j++) {\n      var d = s.data[j];\n      if (!rows[d[0]]) {\n        rows[d[0]] = new Array(series.length);\n        categories.push(d[0]);\n      }\n      rows[d[0]][i] = d[1];\n    }\n  }\n  if (chart.xtype === \"number\") {\n    categories.sort(sortByNumber);\n  }\n  options.xAxis.categories = categories;\n  var newSeries = [];\n  for (var i$1 = 0; i$1 < series.length; i$1++) {\n    var d$1 = [];\n    for (var j$1 = 0; j$1 < categories.length; j$1++) {\n      d$1.push(rows[categories[j$1]][i$1] || 0);\n    }\n    var d2 = {\n      name: series[i$1].name || \"Value\",\n      data: d$1\n    };\n    if (series[i$1].stack) {\n      d2.stack = series[i$1].stack;\n    }\n    newSeries.push(d2);\n  }\n  this.drawChart(chart, newSeries, options);\n};\ndefaultExport$1.prototype.renderBarChart = function renderBarChart(chart) {\n  this.renderColumnChart(chart, \"bar\");\n};\ndefaultExport$1.prototype.renderAreaChart = function renderAreaChart(chart) {\n  this.renderLineChart(chart, \"areaspline\");\n};\ndefaultExport$1.prototype.destroy = function destroy(chart) {\n  if (chart.chart) {\n    chart.chart.destroy();\n  }\n};\ndefaultExport$1.prototype.drawChart = function drawChart(chart, data, options) {\n  this.destroy(chart);\n  if (chart.destroyed) {\n    return;\n  }\n  options.chart.renderTo = chart.element.id;\n  options.series = data;\n  if (chart.options.code) {\n    window.console.log(\"new Highcharts.Chart(\" + JSON.stringify(options) + \");\");\n  }\n  chart.chart = new this.library.Chart(options);\n};\nvar loaded = {};\nvar callbacks = [];\n\n// Set chart options\nvar defaultOptions = {\n  chartArea: {},\n  fontName: \"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif\",\n  pointSize: 6,\n  legend: {\n    textStyle: {\n      fontSize: 12,\n      color: \"#444\"\n    },\n    alignment: \"center\",\n    position: \"right\"\n  },\n  curveType: \"function\",\n  hAxis: {\n    textStyle: {\n      color: \"#666\",\n      fontSize: 12\n    },\n    titleTextStyle: {},\n    gridlines: {\n      color: \"transparent\"\n    },\n    baselineColor: \"#ccc\",\n    viewWindow: {}\n  },\n  vAxis: {\n    textStyle: {\n      color: \"#666\",\n      fontSize: 12\n    },\n    titleTextStyle: {},\n    baselineColor: \"#ccc\",\n    viewWindow: {}\n  },\n  tooltip: {\n    textStyle: {\n      color: \"#666\",\n      fontSize: 12\n    }\n  }\n};\nfunction hideLegend(options, legend, hideLegend) {\n  if (legend !== undefined) {\n    var position;\n    if (!legend) {\n      position = \"none\";\n    } else if (legend === true) {\n      position = \"right\";\n    } else {\n      position = legend;\n    }\n    options.legend.position = position;\n  } else if (hideLegend) {\n    options.legend.position = \"none\";\n  }\n}\nfunction setTitle(options, title) {\n  options.title = title;\n  options.titleTextStyle = {\n    color: \"#333\",\n    fontSize: \"20px\"\n  };\n}\nfunction setMin(options, min) {\n  options.vAxis.viewWindow.min = min;\n}\nfunction setMax(options, max) {\n  options.vAxis.viewWindow.max = max;\n}\nfunction setBarMin(options, min) {\n  options.hAxis.viewWindow.min = min;\n}\nfunction setBarMax(options, max) {\n  options.hAxis.viewWindow.max = max;\n}\nfunction setStacked(options, stacked) {\n  options.isStacked = stacked || false;\n}\nfunction setXtitle(options, title) {\n  options.hAxis.title = title;\n  options.hAxis.titleTextStyle.italic = false;\n}\nfunction setYtitle(options, title) {\n  options.vAxis.title = title;\n  options.vAxis.titleTextStyle.italic = false;\n}\nvar jsOptions = jsOptionsFunc(defaultOptions, hideLegend, setTitle, setMin, setMax, setStacked, setXtitle, setYtitle);\nfunction resize(callback) {\n  if (window.attachEvent) {\n    window.attachEvent(\"onresize\", callback);\n  } else if (window.addEventListener) {\n    window.addEventListener(\"resize\", callback, true);\n  }\n  callback();\n}\nvar defaultExport = function defaultExport(library) {\n  this.name = \"google\";\n  this.library = library;\n};\ndefaultExport.prototype.renderLineChart = function renderLineChart(chart) {\n  var this$1$1 = this;\n  this.waitForLoaded(chart, function () {\n    var chartOptions = {};\n    if (chart.options.curve === false) {\n      chartOptions.curveType = \"none\";\n    }\n    if (chart.options.points === false) {\n      chartOptions.pointSize = 0;\n    }\n    var options = jsOptions(chart, chart.options, chartOptions);\n    var data = this$1$1.createDataTable(chart.data, chart.xtype);\n    this$1$1.drawChart(chart, \"LineChart\", data, options);\n  });\n};\ndefaultExport.prototype.renderPieChart = function renderPieChart(chart) {\n  var this$1$1 = this;\n  this.waitForLoaded(chart, function () {\n    var chartOptions = {\n      chartArea: {\n        top: \"10%\",\n        height: \"80%\"\n      },\n      legend: {}\n    };\n    if (chart.options.colors) {\n      chartOptions.colors = chart.options.colors;\n    }\n    if (chart.options.donut) {\n      chartOptions.pieHole = 0.5;\n    }\n    if (\"legend\" in chart.options) {\n      hideLegend(chartOptions, chart.options.legend);\n    }\n    if (chart.options.title) {\n      setTitle(chartOptions, chart.options.title);\n    }\n    var options = merge(merge(defaultOptions, chartOptions), chart.options.library || {});\n    var data = new this$1$1.library.visualization.DataTable();\n    data.addColumn(\"string\", \"\");\n    data.addColumn(\"number\", \"Value\");\n    data.addRows(chart.data);\n    this$1$1.drawChart(chart, \"PieChart\", data, options);\n  });\n};\ndefaultExport.prototype.renderColumnChart = function renderColumnChart(chart) {\n  var this$1$1 = this;\n  this.waitForLoaded(chart, function () {\n    var options = jsOptions(chart, chart.options);\n    var data = this$1$1.createDataTable(chart.data, chart.xtype);\n    this$1$1.drawChart(chart, \"ColumnChart\", data, options);\n  });\n};\ndefaultExport.prototype.renderBarChart = function renderBarChart(chart) {\n  var this$1$1 = this;\n  this.waitForLoaded(chart, function () {\n    var chartOptions = {\n      hAxis: {\n        gridlines: {\n          color: \"#ccc\"\n        }\n      }\n    };\n    var options = jsOptionsFunc(defaultOptions, hideLegend, setTitle, setBarMin, setBarMax, setStacked, setXtitle, setYtitle)(chart, chart.options, chartOptions);\n    var data = this$1$1.createDataTable(chart.data, chart.xtype);\n    this$1$1.drawChart(chart, \"BarChart\", data, options);\n  });\n};\ndefaultExport.prototype.renderAreaChart = function renderAreaChart(chart) {\n  var this$1$1 = this;\n  this.waitForLoaded(chart, function () {\n    var chartOptions = {\n      isStacked: true,\n      pointSize: 0,\n      areaOpacity: 0.5\n    };\n    var options = jsOptions(chart, chart.options, chartOptions);\n    var data = this$1$1.createDataTable(chart.data, chart.xtype);\n    this$1$1.drawChart(chart, \"AreaChart\", data, options);\n  });\n};\ndefaultExport.prototype.renderGeoChart = function renderGeoChart(chart) {\n  var this$1$1 = this;\n  this.waitForLoaded(chart, \"geochart\", function () {\n    var chartOptions = {\n      legend: \"none\",\n      colorAxis: {\n        colors: chart.options.colors || [\"#f6c7b6\", \"#ce502d\"]\n      }\n    };\n    var options = merge(merge(defaultOptions, chartOptions), chart.options.library || {});\n    var data = new this$1$1.library.visualization.DataTable();\n    data.addColumn(\"string\", \"\");\n    data.addColumn(\"number\", chart.options.label || \"Value\");\n    data.addRows(chart.data);\n    this$1$1.drawChart(chart, \"GeoChart\", data, options);\n  });\n};\ndefaultExport.prototype.renderScatterChart = function renderScatterChart(chart) {\n  var this$1$1 = this;\n  this.waitForLoaded(chart, function () {\n    var chartOptions = {};\n    var options = jsOptions(chart, chart.options, chartOptions);\n    var series = chart.data;\n    var rows2 = [];\n    for (var i = 0; i < series.length; i++) {\n      series[i].name = series[i].name || \"Value\";\n      var d = series[i].data;\n      for (var j = 0; j < d.length; j++) {\n        var row = new Array(series.length + 1);\n        row[0] = d[j][0];\n        row[i + 1] = d[j][1];\n        rows2.push(row);\n      }\n    }\n    var data = new this$1$1.library.visualization.DataTable();\n    data.addColumn(\"number\", \"\");\n    for (var i$1 = 0; i$1 < series.length; i$1++) {\n      data.addColumn(\"number\", series[i$1].name);\n    }\n    data.addRows(rows2);\n    this$1$1.drawChart(chart, \"ScatterChart\", data, options);\n  });\n};\ndefaultExport.prototype.renderTimeline = function renderTimeline(chart) {\n  var this$1$1 = this;\n  this.waitForLoaded(chart, \"timeline\", function () {\n    var chartOptions = {\n      legend: \"none\"\n    };\n    if (chart.options.colors) {\n      chartOptions.colors = chart.options.colors;\n    }\n    var options = merge(merge(defaultOptions, chartOptions), chart.options.library || {});\n    var data = new this$1$1.library.visualization.DataTable();\n    data.addColumn({\n      type: \"string\",\n      id: \"Name\"\n    });\n    data.addColumn({\n      type: \"date\",\n      id: \"Start\"\n    });\n    data.addColumn({\n      type: \"date\",\n      id: \"End\"\n    });\n    data.addRows(chart.data);\n    chart.element.style.lineHeight = \"normal\";\n    this$1$1.drawChart(chart, \"Timeline\", data, options);\n  });\n};\n\n// TODO remove resize events\ndefaultExport.prototype.destroy = function destroy(chart) {\n  if (chart.chart) {\n    chart.chart.clearChart();\n  }\n};\ndefaultExport.prototype.drawChart = function drawChart(chart, type, data, options) {\n  this.destroy(chart);\n  if (chart.destroyed) {\n    return;\n  }\n  if (chart.options.code) {\n    window.console.log(\"var data = new google.visualization.DataTable(\" + data.toJSON() + \");\\nvar chart = new google.visualization.\" + type + \"(element);\\nchart.draw(data, \" + JSON.stringify(options) + \");\");\n  }\n  chart.chart = new this.library.visualization[type](chart.element);\n  resize(function () {\n    chart.chart.draw(data, options);\n  });\n};\ndefaultExport.prototype.waitForLoaded = function waitForLoaded(chart, pack, callback) {\n  var this$1$1 = this;\n  if (!callback) {\n    callback = pack;\n    pack = \"corechart\";\n  }\n  callbacks.push({\n    pack: pack,\n    callback: callback\n  });\n  if (loaded[pack]) {\n    this.runCallbacks();\n  } else {\n    loaded[pack] = true;\n\n    // https://groups.google.com/forum/#!topic/google-visualization-api/fMKJcyA2yyI\n    var loadOptions = {\n      packages: [pack],\n      callback: function () {\n        this$1$1.runCallbacks();\n      }\n    };\n    var config = chart.__config();\n    if (config.language) {\n      loadOptions.language = config.language;\n    }\n    if (pack === \"geochart\" && config.mapsApiKey) {\n      loadOptions.mapsApiKey = config.mapsApiKey;\n    }\n    this.library.charts.load(\"current\", loadOptions);\n  }\n};\ndefaultExport.prototype.runCallbacks = function runCallbacks() {\n  for (var i = 0; i < callbacks.length; i++) {\n    var cb = callbacks[i];\n    var call = this.library.visualization && (cb.pack === \"corechart\" && this.library.visualization.LineChart || cb.pack === \"timeline\" && this.library.visualization.Timeline || cb.pack === \"geochart\" && this.library.visualization.GeoChart);\n    if (call) {\n      cb.callback();\n      callbacks.splice(i, 1);\n      i--;\n    }\n  }\n};\n\n// cant use object as key\ndefaultExport.prototype.createDataTable = function createDataTable(series, columnType) {\n  var rows = [];\n  var sortedLabels = [];\n  for (var i = 0; i < series.length; i++) {\n    var s = series[i];\n    series[i].name = series[i].name || \"Value\";\n    for (var j = 0; j < s.data.length; j++) {\n      var d = s.data[j];\n      var key = columnType === \"datetime\" ? d[0].getTime() : d[0];\n      if (!rows[key]) {\n        rows[key] = new Array(series.length);\n        sortedLabels.push(key);\n      }\n      rows[key][i] = d[1];\n    }\n  }\n  var rows2 = [];\n  var values = [];\n  for (var j$1 = 0; j$1 < sortedLabels.length; j$1++) {\n    var i$1 = sortedLabels[j$1];\n    var value = void 0;\n    if (columnType === \"datetime\") {\n      value = new Date(i$1);\n      values.push(value);\n    } else {\n      value = i$1;\n    }\n    rows2.push([value].concat(rows[i$1]));\n  }\n  var day = true;\n  if (columnType === \"datetime\") {\n    rows2.sort(sortByTime);\n    var timeUnit = calculateTimeUnit(values, true);\n    day = isDay(timeUnit);\n  } else if (columnType === \"number\") {\n    rows2.sort(sortByNumberSeries);\n    for (var i$2 = 0; i$2 < rows2.length; i$2++) {\n      rows2[i$2][0] = toStr(rows2[i$2][0]);\n    }\n    columnType = \"string\";\n  }\n\n  // create datatable\n  var data = new this.library.visualization.DataTable();\n  columnType = columnType === \"datetime\" && day ? \"date\" : columnType;\n  data.addColumn(columnType, \"\");\n  for (var i$3 = 0; i$3 < series.length; i$3++) {\n    data.addColumn(\"number\", series[i$3].name);\n  }\n  data.addRows(rows2);\n  return data;\n};\nvar adapters = [];\nfunction getAdapterType(library) {\n  if (library) {\n    if (library.product === \"Highcharts\") {\n      return defaultExport$1;\n    } else if (library.charts) {\n      return defaultExport;\n    } else if (isFunction(library)) {\n      return defaultExport$2;\n    }\n  }\n  throw new Error(\"Unknown adapter\");\n}\nfunction addAdapter(library) {\n  var adapterType = getAdapterType(library);\n  for (var i = 0; i < adapters.length; i++) {\n    if (adapters[i].library === library) {\n      return;\n    }\n  }\n  adapters.push(new adapterType(library));\n}\nfunction loadAdapters() {\n  if (\"Chart\" in window) {\n    addAdapter(window.Chart);\n  }\n  if (\"Highcharts\" in window) {\n    addAdapter(window.Highcharts);\n  }\n  if (window.google && window.google.charts) {\n    addAdapter(window.google);\n  }\n}\n\n// TODO remove chartType if cross-browser way\n// to get the name of the chart class\nfunction callAdapter(chartType, chart) {\n  var fnName = \"render\" + chartType;\n  var adapterName = chart.options.adapter;\n  loadAdapters();\n  for (var i = 0; i < adapters.length; i++) {\n    var adapter = adapters[i];\n    if ((!adapterName || adapterName === adapter.name) && isFunction(adapter[fnName])) {\n      chart.adapter = adapter.name;\n      chart.__adapterObject = adapter;\n      return adapter[fnName](chart);\n    }\n  }\n  if (adapters.length > 0) {\n    throw new Error(\"No charting library found for \" + chartType);\n  } else {\n    throw new Error(\"No charting libraries found - be sure to include one before your charts\");\n  }\n}\nvar Chartkick = {\n  charts: {},\n  configure: function (options) {\n    for (var key in options) {\n      if (Object.prototype.hasOwnProperty.call(options, key)) {\n        Chartkick.config[key] = options[key];\n      }\n    }\n  },\n  setDefaultOptions: function (opts) {\n    Chartkick.options = opts;\n  },\n  eachChart: function (callback) {\n    for (var chartId in Chartkick.charts) {\n      if (Object.prototype.hasOwnProperty.call(Chartkick.charts, chartId)) {\n        callback(Chartkick.charts[chartId]);\n      }\n    }\n  },\n  destroyAll: function () {\n    for (var chartId in Chartkick.charts) {\n      if (Object.prototype.hasOwnProperty.call(Chartkick.charts, chartId)) {\n        Chartkick.charts[chartId].destroy();\n        delete Chartkick.charts[chartId];\n      }\n    }\n  },\n  config: {},\n  options: {},\n  adapters: adapters,\n  addAdapter: addAdapter,\n  use: function (adapter) {\n    addAdapter(adapter);\n    return Chartkick;\n  }\n};\nfunction formatSeriesBubble(data) {\n  var r = [];\n  for (var i = 0; i < data.length; i++) {\n    r.push([toFloat(data[i][0]), toFloat(data[i][1]), toFloat(data[i][2])]);\n  }\n  return r;\n}\n\n// casts data to proper type\n// sorting is left to adapters\nfunction formatSeriesData(data, keyType) {\n  if (keyType === \"bubble\") {\n    return formatSeriesBubble(data);\n  }\n  var keyFunc;\n  if (keyType === \"number\") {\n    keyFunc = toFloat;\n  } else if (keyType === \"datetime\") {\n    keyFunc = toDate;\n  } else {\n    keyFunc = toStr;\n  }\n  var r = [];\n  for (var i = 0; i < data.length; i++) {\n    r.push([keyFunc(data[i][0]), toFloat(data[i][1])]);\n  }\n  return r;\n}\nfunction detectXType(series, noDatetime, options) {\n  if (dataEmpty(series)) {\n    if ((options.xmin || options.xmax) && (!options.xmin || isDate(options.xmin)) && (!options.xmax || isDate(options.xmax))) {\n      return \"datetime\";\n    } else {\n      return \"number\";\n    }\n  } else if (detectXTypeWithFunction(series, isNumber)) {\n    return \"number\";\n  } else if (!noDatetime && detectXTypeWithFunction(series, isDate)) {\n    return \"datetime\";\n  } else {\n    return \"string\";\n  }\n}\nfunction detectXTypeWithFunction(series, func) {\n  for (var i = 0; i < series.length; i++) {\n    var data = toArr(series[i].data);\n    for (var j = 0; j < data.length; j++) {\n      if (!func(data[j][0])) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\n// creates a shallow copy of each element of the array\n// elements are expected to be objects\nfunction copySeries(series) {\n  var newSeries = [];\n  for (var i = 0; i < series.length; i++) {\n    var copy = {};\n    for (var j in series[i]) {\n      if (Object.prototype.hasOwnProperty.call(series[i], j)) {\n        copy[j] = series[i][j];\n      }\n    }\n    newSeries.push(copy);\n  }\n  return newSeries;\n}\nfunction processSeries(chart, keyType, noDatetime) {\n  var opts = chart.options;\n  var series = chart.rawData;\n\n  // see if one series or multiple\n  chart.singleSeriesFormat = !isArray(series) || !isPlainObject(series[0]);\n  if (chart.singleSeriesFormat) {\n    series = [{\n      name: opts.label,\n      data: series\n    }];\n  }\n\n  // convert to array\n  // must come before dataEmpty check\n  series = copySeries(series);\n  for (var i = 0; i < series.length; i++) {\n    series[i].data = toArr(series[i].data);\n  }\n  chart.xtype = keyType || (opts.discrete ? \"string\" : detectXType(series, noDatetime, opts));\n\n  // right format\n  for (var i$1 = 0; i$1 < series.length; i$1++) {\n    series[i$1].data = formatSeriesData(series[i$1].data, chart.xtype);\n  }\n  return series;\n}\nfunction processSimple(chart) {\n  var perfectData = toArr(chart.rawData);\n  for (var i = 0; i < perfectData.length; i++) {\n    perfectData[i] = [toStr(perfectData[i][0]), toFloat(perfectData[i][1])];\n  }\n  return perfectData;\n}\nfunction dataEmpty(data, chartType) {\n  if (chartType === \"PieChart\" || chartType === \"GeoChart\" || chartType === \"Timeline\") {\n    return data.length === 0;\n  } else {\n    for (var i = 0; i < data.length; i++) {\n      if (data[i].data.length > 0) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nfunction addDownloadButton(chart) {\n  var download = chart.options.download;\n  if (download === true) {\n    download = {};\n  } else if (typeof download === \"string\") {\n    download = {\n      filename: download\n    };\n  }\n  var link = document.createElement(\"a\");\n  link.download = download.filename || \"chart.png\";\n  link.style.position = \"absolute\";\n  link.style.top = \"20px\";\n  link.style.right = \"20px\";\n  link.style.zIndex = 1000;\n  link.style.lineHeight = \"20px\";\n  link.target = \"_blank\"; // for safari\n\n  var image = document.createElement(\"img\");\n  // icon from Font Awesome, modified to set fill color\n  var svg = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path fill=\\\"#CCCCCC\\\" d=\\\"M344 240h-56L287.1 152c0-13.25-10.75-24-24-24h-16C234.7 128 223.1 138.8 223.1 152L224 240h-56c-9.531 0-18.16 5.656-22 14.38C142.2 263.1 143.9 273.3 150.4 280.3l88.75 96C243.7 381.2 250.1 384 256.8 384c7.781-.3125 13.25-2.875 17.75-7.844l87.25-96c6.406-7.031 8.031-17.19 4.188-25.88S353.5 240 344 240zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 464c-114.7 0-208-93.31-208-208S141.3 48 256 48s208 93.31 208 208S370.7 464 256 464z\\\"/></svg>\";\n  image.src = \"data:image/svg+xml;utf8,\" + encodeURIComponent(svg);\n  image.alt = \"Download\";\n  image.style.width = \"20px\";\n  image.style.height = \"20px\";\n  image.style.border = \"none\";\n  link.appendChild(image);\n  var element = chart.element;\n  element.style.position = \"relative\";\n  chart.__downloadAttached = true;\n\n  // mouseenter\n  chart.__enterEvent = element.addEventListener(\"mouseover\", function (e) {\n    var related = e.relatedTarget;\n    // check download option again to ensure it wasn't changed\n    if ((!related || related !== this && !this.contains(related)) && chart.options.download) {\n      link.href = chart.toImage(download);\n      element.appendChild(link);\n    }\n  });\n\n  // mouseleave\n  chart.__leaveEvent = element.addEventListener(\"mouseout\", function (e) {\n    var related = e.relatedTarget;\n    if (!related || related !== this && !this.contains(related)) {\n      if (link.parentNode) {\n        link.parentNode.removeChild(link);\n      }\n    }\n  });\n}\nvar pendingRequests = [];\nvar runningRequests = 0;\nvar maxRequests = 4;\nfunction pushRequest(url, success, error) {\n  pendingRequests.push([url, success, error]);\n  runNext();\n}\nfunction runNext() {\n  if (runningRequests < maxRequests) {\n    var request = pendingRequests.shift();\n    if (request) {\n      runningRequests++;\n      getJSON(request[0], request[1], request[2]);\n      runNext();\n    }\n  }\n}\nfunction requestComplete() {\n  runningRequests--;\n  runNext();\n}\nfunction getJSON(url, success, error) {\n  var xhr = new XMLHttpRequest();\n  xhr.open(\"GET\", url, true);\n  xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n  xhr.onload = function () {\n    requestComplete();\n    if (xhr.status === 200) {\n      success(JSON.parse(xhr.responseText));\n    } else {\n      error(xhr.statusText);\n    }\n  };\n  xhr.send();\n}\n\n// helpers\n\nfunction setText(element, text) {\n  element.textContent = text;\n}\n\n// TODO remove prefix for all messages\nfunction chartError(element, message, noPrefix) {\n  if (!noPrefix) {\n    message = \"Error Loading Chart: \" + message;\n  }\n  setText(element, message);\n  element.style.color = \"#ff0000\";\n}\nfunction errorCatcher(chart) {\n  try {\n    chart.__render();\n  } catch (err) {\n    chartError(chart.element, err.message);\n    throw err;\n  }\n}\nfunction fetchDataSource(chart, dataSource, showLoading) {\n  // only show loading message for urls and callbacks\n  if (showLoading && chart.options.loading && (typeof dataSource === \"string\" || typeof dataSource === \"function\")) {\n    setText(chart.element, chart.options.loading);\n  }\n  if (typeof dataSource === \"string\") {\n    pushRequest(dataSource, function (data) {\n      chart.rawData = data;\n      errorCatcher(chart);\n    }, function (message) {\n      chartError(chart.element, message);\n    });\n  } else if (typeof dataSource === \"function\") {\n    try {\n      dataSource(function (data) {\n        chart.rawData = data;\n        errorCatcher(chart);\n      }, function (message) {\n        chartError(chart.element, message, true);\n      });\n    } catch (err) {\n      chartError(chart.element, err, true);\n    }\n  } else {\n    chart.rawData = dataSource;\n    errorCatcher(chart);\n  }\n}\nfunction renderChart(chartType, chart) {\n  if (dataEmpty(chart.data, chartType)) {\n    var message = chart.options.empty || chart.options.messages && chart.options.messages.empty || \"No data\";\n    setText(chart.element, message);\n  } else {\n    callAdapter(chartType, chart);\n    // TODO add downloadSupported method to adapter\n    if (chart.options.download && !chart.__downloadAttached && chart.adapter === \"chartjs\") {\n      addDownloadButton(chart);\n    }\n  }\n}\nfunction getElement(element) {\n  if (typeof element === \"string\") {\n    var elementId = element;\n    element = document.getElementById(element);\n    if (!element) {\n      throw new Error(\"No element with id \" + elementId);\n    }\n  }\n  return element;\n}\n\n// define classes\n\nvar Chart = function Chart(element, dataSource, options) {\n  this.element = getElement(element);\n  this.options = merge(Chartkick.options, options || {});\n  this.dataSource = dataSource;\n\n  // TODO handle charts without an id for eachChart and destroyAll\n  if (this.element.id) {\n    Chartkick.charts[this.element.id] = this;\n  }\n  fetchDataSource(this, dataSource, true);\n  if (this.options.refresh) {\n    this.startRefresh();\n  }\n};\nChart.prototype.getElement = function getElement() {\n  return this.element;\n};\nChart.prototype.getDataSource = function getDataSource() {\n  return this.dataSource;\n};\nChart.prototype.getData = function getData() {\n  return this.data;\n};\nChart.prototype.getOptions = function getOptions() {\n  return this.options;\n};\nChart.prototype.getChartObject = function getChartObject() {\n  return this.chart;\n};\nChart.prototype.getAdapter = function getAdapter() {\n  return this.adapter;\n};\nChart.prototype.updateData = function updateData(dataSource, options) {\n  this.dataSource = dataSource;\n  if (options) {\n    this.__updateOptions(options);\n  }\n  fetchDataSource(this, dataSource, true);\n};\nChart.prototype.setOptions = function setOptions(options) {\n  this.__updateOptions(options);\n  this.redraw();\n};\nChart.prototype.redraw = function redraw() {\n  fetchDataSource(this, this.rawData);\n};\nChart.prototype.refreshData = function refreshData() {\n  if (typeof this.dataSource === \"string\") {\n    // prevent browser from caching\n    var sep = this.dataSource.indexOf(\"?\") === -1 ? \"?\" : \"&\";\n    var url = this.dataSource + sep + \"_=\" + new Date().getTime();\n    fetchDataSource(this, url);\n  } else if (typeof this.dataSource === \"function\") {\n    fetchDataSource(this, this.dataSource);\n  }\n};\nChart.prototype.startRefresh = function startRefresh() {\n  var this$1$1 = this;\n  var refresh = this.options.refresh;\n  if (refresh && typeof this.dataSource !== \"string\" && typeof this.dataSource !== \"function\") {\n    throw new Error(\"Data source must be a URL or callback for refresh\");\n  }\n  if (!this.intervalId) {\n    if (refresh) {\n      this.intervalId = setInterval(function () {\n        this$1$1.refreshData();\n      }, refresh * 1000);\n    } else {\n      throw new Error(\"No refresh interval\");\n    }\n  }\n};\nChart.prototype.stopRefresh = function stopRefresh() {\n  if (this.intervalId) {\n    clearInterval(this.intervalId);\n    this.intervalId = null;\n  }\n};\nChart.prototype.toImage = function toImage(download) {\n  // TODO move logic to adapter\n  if (this.adapter === \"chartjs\") {\n    if (download && download.background && download.background !== \"transparent\") {\n      // https://stackoverflow.com/questions/30464750/chartjs-line-chart-set-background-color\n      var canvas = this.chart.canvas;\n      var ctx = this.chart.ctx;\n      var tmpCanvas = document.createElement(\"canvas\");\n      var tmpCtx = tmpCanvas.getContext(\"2d\");\n      tmpCanvas.width = ctx.canvas.width;\n      tmpCanvas.height = ctx.canvas.height;\n      tmpCtx.fillStyle = download.background;\n      tmpCtx.fillRect(0, 0, tmpCanvas.width, tmpCanvas.height);\n      tmpCtx.drawImage(canvas, 0, 0);\n      return tmpCanvas.toDataURL(\"image/png\");\n    } else {\n      return this.chart.toBase64Image();\n    }\n  } else {\n    throw new Error(\"Feature only available for Chart.js\");\n  }\n};\nChart.prototype.destroy = function destroy() {\n  this.destroyed = true;\n  this.stopRefresh();\n  if (this.__adapterObject) {\n    this.__adapterObject.destroy(this);\n  }\n  if (this.__enterEvent) {\n    this.element.removeEventListener(\"mouseover\", this.__enterEvent);\n  }\n  if (this.__leaveEvent) {\n    this.element.removeEventListener(\"mouseout\", this.__leaveEvent);\n  }\n};\nChart.prototype.__updateOptions = function __updateOptions(options) {\n  var updateRefresh = options.refresh && options.refresh !== this.options.refresh;\n  this.options = merge(Chartkick.options, options);\n  if (updateRefresh) {\n    this.stopRefresh();\n    this.startRefresh();\n  }\n};\nChart.prototype.__render = function __render() {\n  this.data = this.__processData();\n  renderChart(this.__chartName(), this);\n};\nChart.prototype.__config = function __config() {\n  return Chartkick.config;\n};\nvar LineChart = /*@__PURE__*/function (Chart) {\n  function LineChart() {\n    Chart.apply(this, arguments);\n  }\n  if (Chart) LineChart.__proto__ = Chart;\n  LineChart.prototype = Object.create(Chart && Chart.prototype);\n  LineChart.prototype.constructor = LineChart;\n  LineChart.prototype.__processData = function __processData() {\n    return processSeries(this);\n  };\n  LineChart.prototype.__chartName = function __chartName() {\n    return \"LineChart\";\n  };\n  return LineChart;\n}(Chart);\nvar PieChart = /*@__PURE__*/function (Chart) {\n  function PieChart() {\n    Chart.apply(this, arguments);\n  }\n  if (Chart) PieChart.__proto__ = Chart;\n  PieChart.prototype = Object.create(Chart && Chart.prototype);\n  PieChart.prototype.constructor = PieChart;\n  PieChart.prototype.__processData = function __processData() {\n    return processSimple(this);\n  };\n  PieChart.prototype.__chartName = function __chartName() {\n    return \"PieChart\";\n  };\n  return PieChart;\n}(Chart);\nvar ColumnChart = /*@__PURE__*/function (Chart) {\n  function ColumnChart() {\n    Chart.apply(this, arguments);\n  }\n  if (Chart) ColumnChart.__proto__ = Chart;\n  ColumnChart.prototype = Object.create(Chart && Chart.prototype);\n  ColumnChart.prototype.constructor = ColumnChart;\n  ColumnChart.prototype.__processData = function __processData() {\n    return processSeries(this, null, true);\n  };\n  ColumnChart.prototype.__chartName = function __chartName() {\n    return \"ColumnChart\";\n  };\n  return ColumnChart;\n}(Chart);\nvar BarChart = /*@__PURE__*/function (Chart) {\n  function BarChart() {\n    Chart.apply(this, arguments);\n  }\n  if (Chart) BarChart.__proto__ = Chart;\n  BarChart.prototype = Object.create(Chart && Chart.prototype);\n  BarChart.prototype.constructor = BarChart;\n  BarChart.prototype.__processData = function __processData() {\n    return processSeries(this, null, true);\n  };\n  BarChart.prototype.__chartName = function __chartName() {\n    return \"BarChart\";\n  };\n  return BarChart;\n}(Chart);\nvar AreaChart = /*@__PURE__*/function (Chart) {\n  function AreaChart() {\n    Chart.apply(this, arguments);\n  }\n  if (Chart) AreaChart.__proto__ = Chart;\n  AreaChart.prototype = Object.create(Chart && Chart.prototype);\n  AreaChart.prototype.constructor = AreaChart;\n  AreaChart.prototype.__processData = function __processData() {\n    return processSeries(this);\n  };\n  AreaChart.prototype.__chartName = function __chartName() {\n    return \"AreaChart\";\n  };\n  return AreaChart;\n}(Chart);\nvar GeoChart = /*@__PURE__*/function (Chart) {\n  function GeoChart() {\n    Chart.apply(this, arguments);\n  }\n  if (Chart) GeoChart.__proto__ = Chart;\n  GeoChart.prototype = Object.create(Chart && Chart.prototype);\n  GeoChart.prototype.constructor = GeoChart;\n  GeoChart.prototype.__processData = function __processData() {\n    return processSimple(this);\n  };\n  GeoChart.prototype.__chartName = function __chartName() {\n    return \"GeoChart\";\n  };\n  return GeoChart;\n}(Chart);\nvar ScatterChart = /*@__PURE__*/function (Chart) {\n  function ScatterChart() {\n    Chart.apply(this, arguments);\n  }\n  if (Chart) ScatterChart.__proto__ = Chart;\n  ScatterChart.prototype = Object.create(Chart && Chart.prototype);\n  ScatterChart.prototype.constructor = ScatterChart;\n  ScatterChart.prototype.__processData = function __processData() {\n    return processSeries(this, \"number\");\n  };\n  ScatterChart.prototype.__chartName = function __chartName() {\n    return \"ScatterChart\";\n  };\n  return ScatterChart;\n}(Chart);\nvar BubbleChart = /*@__PURE__*/function (Chart) {\n  function BubbleChart() {\n    Chart.apply(this, arguments);\n  }\n  if (Chart) BubbleChart.__proto__ = Chart;\n  BubbleChart.prototype = Object.create(Chart && Chart.prototype);\n  BubbleChart.prototype.constructor = BubbleChart;\n  BubbleChart.prototype.__processData = function __processData() {\n    return processSeries(this, \"bubble\");\n  };\n  BubbleChart.prototype.__chartName = function __chartName() {\n    return \"BubbleChart\";\n  };\n  return BubbleChart;\n}(Chart);\nvar Timeline = /*@__PURE__*/function (Chart) {\n  function Timeline() {\n    Chart.apply(this, arguments);\n  }\n  if (Chart) Timeline.__proto__ = Chart;\n  Timeline.prototype = Object.create(Chart && Chart.prototype);\n  Timeline.prototype.constructor = Timeline;\n  Timeline.prototype.__processData = function __processData() {\n    var data = this.rawData;\n    for (var i = 0; i < data.length; i++) {\n      data[i][1] = toDate(data[i][1]);\n      data[i][2] = toDate(data[i][2]);\n    }\n    return data;\n  };\n  Timeline.prototype.__chartName = function __chartName() {\n    return \"Timeline\";\n  };\n  return Timeline;\n}(Chart);\nChartkick.LineChart = LineChart;\nChartkick.PieChart = PieChart;\nChartkick.ColumnChart = ColumnChart;\nChartkick.BarChart = BarChart;\nChartkick.AreaChart = AreaChart;\nChartkick.GeoChart = GeoChart;\nChartkick.ScatterChart = ScatterChart;\nChartkick.BubbleChart = BubbleChart;\nChartkick.Timeline = Timeline;\n\n// not ideal, but allows for simpler integration\nif (typeof window !== \"undefined\" && !window.Chartkick) {\n  window.Chartkick = Chartkick;\n\n  // clean up previous charts before Turbolinks loads new page\n  document.addEventListener(\"turbolinks:before-render\", function () {\n    if (Chartkick.config.autoDestroy !== false) {\n      Chartkick.destroyAll();\n    }\n  });\n\n  // clean up previous charts before Turbo loads new page\n  document.addEventListener(\"turbo:before-render\", function () {\n    if (Chartkick.config.autoDestroy !== false) {\n      Chartkick.destroyAll();\n    }\n  });\n\n  // use setTimeout so charting library can come later in same JS file\n  setTimeout(function () {\n    window.dispatchEvent(new Event(\"chartkick:load\"));\n  }, 0);\n}\n\n// backwards compatibility for esm require\nChartkick.default = Chartkick;\nexport { Chartkick as default };","map":{"version":3,"names":["isArray","variable","Object","prototype","toString","call","isFunction","Function","isPlainObject","extend","target","source","key","undefined","merge","obj1","obj2","DATE_PATTERN","negativeValues","series","i","length","data","j","toStr","obj","toFloat","parseFloat","toDate","Date","s","matches","match","year","parseInt","month","day","str","replace","parse","toArr","arr","hasOwnProperty","push","jsOptionsFunc","defaultOptions","hideLegend","setTitle","setMin","setMax","setStacked","setXtitle","setYtitle","chart","opts","chartOptions","options","singleSeriesFormat","legend","title","min","max","stacked","colors","xtitle","ytitle","library","sortByTime","a","b","getTime","sortByNumberSeries","sortByNumber","every","values","fn","isDay","timeUnit","calculateTimeUnit","maxDay","minute","d","getMilliseconds","getSeconds","hour","getMinutes","getHours","getDate","dayOfWeek","getDay","week","getMonth","isDate","isNaN","isNumber","byteSuffixes","formatValue","pre","value","axis","prefix","suffix","precision","round","byteScale","positive","baseValue","suffixIdx","Error","toPrecision","zeros","num","Math","pow","toFixed","thousands","decimal","parts","split","seriesOption","option","baseOptions","maintainAspectRatio","animation","plugins","tooltip","displayColors","callbacks","font","size","color","interaction","defaultOptions$2","scales","y","ticks","maxTicksLimit","grid","x","drawOnChartArea","time","defaultColors","hideLegend$2","display","position","setTitle$2","text","setMin$2","setMax$2","setBarMin$1","setBarMax$1","setStacked$2","setXtitle$2","setYtitle$2","addOpacity","hex","opacity","result","exec","notnull","setLabelSize","maxLabelSize","ceil","element","offsetWidth","labels","callback","getLabelForValue","substring","calculateScale","scale","maxAbsY","setFormatOptions$1","chartType","numericOptions","formatOptions","bytes","stepSize","label","context","dataset","dataPoint","parsed","raw","v","valueLabel","xtype","abs","maxR","jsOptions$2","prepareDefaultData","rows","keys","Array","sort","i$1","i$2","key$1","row","j$1","prepareBubbleData","points","r","prepareNumberData","prepareData","createDataTable","ref","datasets","backgroundColor","name","fill","borderColor","borderWidth","pointChart","pointBackgroundColor","pointHoverBackgroundColor","pointHitRadius","pointHoverBorderWidth","stack","curve","tension","pointRadius","pointHoverRadius","xmin","xmax","minTime","maxTime","timeDiff","unit","step","displayFormats","width","unitStepSize","tooltipFormat","defaultExport$2","defaultExport","renderLineChart","type","drawChart","renderPieChart","donut","cutout","point","renderColumnChart","barOptions","indexAxis","mode","renderAreaChart","renderBarChart","renderScatterChart","showLine","renderBubbleChart","destroy","destroyed","code","window","console","log","JSON","stringify","innerHTML","ctx","getElementsByTagName","defaultOptions$1","xAxis","style","fontSize","yAxis","credits","enabled","plotOptions","areaspline","area","marker","useUTC","hideLegend$1","verticalAlign","layout","align","setTitle$1","setMin$1","setMax$1","setStacked$1","stackedValue","stacking","setXtitle$1","setYtitle$1","jsOptions$1","setFormatOptions","formatter","pointFormatter","pointFormat","defaultExport$1","symbol","pie","innerSize","categories","newSeries","d$1","d2","renderTo","id","Chart","loaded","chartArea","fontName","pointSize","textStyle","alignment","curveType","hAxis","titleTextStyle","gridlines","baselineColor","viewWindow","vAxis","setBarMin","setBarMax","isStacked","italic","jsOptions","resize","attachEvent","addEventListener","this$1$1","waitForLoaded","top","height","pieHole","visualization","DataTable","addColumn","addRows","areaOpacity","renderGeoChart","colorAxis","rows2","renderTimeline","lineHeight","clearChart","toJSON","draw","pack","runCallbacks","loadOptions","packages","config","__config","language","mapsApiKey","charts","load","cb","LineChart","Timeline","GeoChart","splice","columnType","sortedLabels","concat","i$3","adapters","getAdapterType","product","addAdapter","adapterType","loadAdapters","Highcharts","google","callAdapter","fnName","adapterName","adapter","__adapterObject","Chartkick","configure","setDefaultOptions","eachChart","chartId","destroyAll","use","formatSeriesBubble","formatSeriesData","keyType","keyFunc","detectXType","noDatetime","dataEmpty","detectXTypeWithFunction","func","copySeries","copy","processSeries","rawData","discrete","processSimple","perfectData","addDownloadButton","download","filename","link","document","createElement","right","zIndex","image","svg","src","encodeURIComponent","alt","border","appendChild","__downloadAttached","__enterEvent","e","related","relatedTarget","contains","href","toImage","__leaveEvent","parentNode","removeChild","pendingRequests","runningRequests","maxRequests","pushRequest","url","success","error","runNext","request","shift","getJSON","requestComplete","xhr","XMLHttpRequest","open","setRequestHeader","onload","status","responseText","statusText","send","setText","textContent","chartError","message","noPrefix","errorCatcher","__render","err","fetchDataSource","dataSource","showLoading","loading","renderChart","empty","messages","getElement","elementId","getElementById","refresh","startRefresh","getDataSource","getData","getOptions","getChartObject","getAdapter","updateData","__updateOptions","setOptions","redraw","refreshData","sep","indexOf","intervalId","setInterval","stopRefresh","clearInterval","background","canvas","tmpCanvas","tmpCtx","getContext","fillStyle","fillRect","drawImage","toDataURL","toBase64Image","removeEventListener","updateRefresh","__processData","__chartName","apply","arguments","__proto__","create","constructor","PieChart","ColumnChart","BarChart","AreaChart","ScatterChart","BubbleChart","autoDestroy","setTimeout","dispatchEvent","Event","default"],"sources":["C:/Users/duart/Desktop/bhivesenseweb/bhivesenseweb/node_modules/chartkick/dist/chartkick.esm.js"],"sourcesContent":["/*!\r\n * Chartkick.js v5.0.1\r\n * Create beautiful charts with one line of JavaScript\r\n * https://github.com/ankane/chartkick.js\r\n * MIT License\r\n */\r\n\r\nfunction isArray(variable) {\r\n  return Object.prototype.toString.call(variable) === \"[object Array]\";\r\n}\r\n\r\nfunction isFunction(variable) {\r\n  return variable instanceof Function;\r\n}\r\n\r\nfunction isPlainObject(variable) {\r\n  // protect against prototype pollution, defense 2\r\n  return Object.prototype.toString.call(variable) === \"[object Object]\" && !isFunction(variable) && variable instanceof Object;\r\n}\r\n\r\n// https://github.com/madrobby/zepto/blob/master/src/zepto.js\r\nfunction extend(target, source) {\r\n  for (var key in source) {\r\n    // protect against prototype pollution, defense 1\r\n    if (key === \"__proto__\") { continue; }\r\n\r\n    if (isPlainObject(source[key]) || isArray(source[key])) {\r\n      if (isPlainObject(source[key]) && !isPlainObject(target[key])) {\r\n        target[key] = {};\r\n      }\r\n      if (isArray(source[key]) && !isArray(target[key])) {\r\n        target[key] = [];\r\n      }\r\n      extend(target[key], source[key]);\r\n    } else if (source[key] !== undefined) {\r\n      target[key] = source[key];\r\n    }\r\n  }\r\n}\r\n\r\nfunction merge(obj1, obj2) {\r\n  var target = {};\r\n  extend(target, obj1);\r\n  extend(target, obj2);\r\n  return target;\r\n}\r\n\r\nvar DATE_PATTERN = /^(\\d\\d\\d\\d)(?:-)?(\\d\\d)(?:-)?(\\d\\d)$/i;\r\n\r\nfunction negativeValues(series) {\r\n  for (var i = 0; i < series.length; i++) {\r\n    var data = series[i].data;\r\n    for (var j = 0; j < data.length; j++) {\r\n      if (data[j][1] < 0) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction toStr(obj) {\r\n  return \"\" + obj;\r\n}\r\n\r\nfunction toFloat(obj) {\r\n  return parseFloat(obj);\r\n}\r\n\r\nfunction toDate(obj) {\r\n  if (obj instanceof Date) {\r\n    return obj;\r\n  } else if (typeof obj === \"number\") {\r\n    return new Date(obj * 1000); // ms\r\n  } else {\r\n    var s = toStr(obj);\r\n    var matches = s.match(DATE_PATTERN);\r\n    if (matches) {\r\n      var year = parseInt(matches[1], 10);\r\n      var month = parseInt(matches[2], 10) - 1;\r\n      var day = parseInt(matches[3], 10);\r\n      return new Date(year, month, day);\r\n    } else {\r\n      // try our best to get the str into iso8601\r\n      // TODO be smarter about this\r\n      var str = s.replace(/ /, \"T\").replace(\" \", \"\").replace(\"UTC\", \"Z\");\r\n      // Date.parse returns milliseconds if valid and NaN if invalid\r\n      return new Date(Date.parse(str) || s);\r\n    }\r\n  }\r\n}\r\n\r\nfunction toArr(obj) {\r\n  if (isArray(obj)) {\r\n    return obj;\r\n  } else {\r\n    var arr = [];\r\n    for (var i in obj) {\r\n      if (Object.prototype.hasOwnProperty.call(obj, i)) {\r\n        arr.push([i, obj[i]]);\r\n      }\r\n    }\r\n    return arr;\r\n  }\r\n}\r\n\r\nfunction jsOptionsFunc(defaultOptions, hideLegend, setTitle, setMin, setMax, setStacked, setXtitle, setYtitle) {\r\n  return function (chart, opts, chartOptions) {\r\n    var series = chart.data;\r\n    var options = merge({}, defaultOptions);\r\n    options = merge(options, chartOptions || {});\r\n\r\n    if (chart.singleSeriesFormat || \"legend\" in opts) {\r\n      hideLegend(options, opts.legend, chart.singleSeriesFormat);\r\n    }\r\n\r\n    if (opts.title) {\r\n      setTitle(options, opts.title);\r\n    }\r\n\r\n    // min\r\n    if (\"min\" in opts) {\r\n      setMin(options, opts.min);\r\n    } else if (!negativeValues(series)) {\r\n      setMin(options, 0);\r\n    }\r\n\r\n    // max\r\n    if (opts.max) {\r\n      setMax(options, opts.max);\r\n    }\r\n\r\n    if (\"stacked\" in opts) {\r\n      setStacked(options, opts.stacked);\r\n    }\r\n\r\n    if (opts.colors) {\r\n      options.colors = opts.colors;\r\n    }\r\n\r\n    if (opts.xtitle) {\r\n      setXtitle(options, opts.xtitle);\r\n    }\r\n\r\n    if (opts.ytitle) {\r\n      setYtitle(options, opts.ytitle);\r\n    }\r\n\r\n    // merge library last\r\n    options = merge(options, opts.library || {});\r\n\r\n    return options;\r\n  };\r\n}\r\n\r\nfunction sortByTime(a, b) {\r\n  return a[0].getTime() - b[0].getTime();\r\n}\r\n\r\nfunction sortByNumberSeries(a, b) {\r\n  return a[0] - b[0];\r\n}\r\n\r\n// needed since sort() without arguments does string comparison\r\nfunction sortByNumber(a, b) {\r\n  return a - b;\r\n}\r\n\r\nfunction every(values, fn) {\r\n  for (var i = 0; i < values.length; i++) {\r\n    if (!fn(values[i])) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction isDay(timeUnit) {\r\n  return timeUnit === \"day\" || timeUnit === \"week\" || timeUnit === \"month\" || timeUnit === \"year\";\r\n}\r\n\r\nfunction calculateTimeUnit(values, maxDay) {\r\n  if ( maxDay === void 0 ) maxDay = false;\r\n\r\n  if (values.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  var minute = every(values, function (d) { return d.getMilliseconds() === 0 && d.getSeconds() === 0; });\r\n  if (!minute) {\r\n    return null;\r\n  }\r\n\r\n  var hour = every(values, function (d) { return d.getMinutes() === 0; });\r\n  if (!hour) {\r\n    return \"minute\";\r\n  }\r\n\r\n  var day = every(values, function (d) { return d.getHours() === 0; });\r\n  if (!day) {\r\n    return \"hour\";\r\n  }\r\n\r\n  if (maxDay) {\r\n    return \"day\";\r\n  }\r\n\r\n  var month = every(values, function (d) { return d.getDate() === 1; });\r\n  if (!month) {\r\n    var dayOfWeek = values[0].getDay();\r\n    var week = every(values, function (d) { return d.getDay() === dayOfWeek; });\r\n    return (week ? \"week\" : \"day\");\r\n  }\r\n\r\n  var year = every(values, function (d) { return d.getMonth() === 0; });\r\n  if (!year) {\r\n    return \"month\";\r\n  }\r\n\r\n  return \"year\";\r\n}\r\n\r\nfunction isDate(obj) {\r\n  return !isNaN(toDate(obj)) && toStr(obj).length >= 6;\r\n}\r\n\r\nfunction isNumber(obj) {\r\n  return typeof obj === \"number\";\r\n}\r\n\r\nvar byteSuffixes = [\"bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\"];\r\n\r\nfunction formatValue(pre, value, options, axis) {\r\n  pre = pre || \"\";\r\n  if (options.prefix) {\r\n    if (value < 0) {\r\n      value = value * -1;\r\n      pre += \"-\";\r\n    }\r\n    pre += options.prefix;\r\n  }\r\n\r\n  var suffix = options.suffix || \"\";\r\n  var precision = options.precision;\r\n  var round = options.round;\r\n\r\n  if (options.byteScale) {\r\n    var positive = value >= 0;\r\n    if (!positive) {\r\n      value *= -1;\r\n    }\r\n\r\n    var baseValue = axis ? options.byteScale : value;\r\n\r\n    var suffixIdx;\r\n    if (baseValue >= 1152921504606846976) {\r\n      value /= 1152921504606846976;\r\n      suffixIdx = 6;\r\n    } else if (baseValue >= 1125899906842624) {\r\n      value /= 1125899906842624;\r\n      suffixIdx = 5;\r\n    } else if (baseValue >= 1099511627776) {\r\n      value /= 1099511627776;\r\n      suffixIdx = 4;\r\n    } else if (baseValue >= 1073741824) {\r\n      value /= 1073741824;\r\n      suffixIdx = 3;\r\n    } else if (baseValue >= 1048576) {\r\n      value /= 1048576;\r\n      suffixIdx = 2;\r\n    } else if (baseValue >= 1024) {\r\n      value /= 1024;\r\n      suffixIdx = 1;\r\n    } else {\r\n      suffixIdx = 0;\r\n    }\r\n\r\n    // TODO handle manual precision case\r\n    if (precision === undefined && round === undefined) {\r\n      if (value >= 1023.5) {\r\n        if (suffixIdx < byteSuffixes.length - 1) {\r\n          value = 1.0;\r\n          suffixIdx += 1;\r\n        }\r\n      }\r\n      precision = value >= 1000 ? 4 : 3;\r\n    }\r\n    suffix = \" \" + byteSuffixes[suffixIdx];\r\n\r\n    // flip value back\r\n    if (!positive) {\r\n      value *= -1;\r\n    }\r\n  }\r\n\r\n  if (precision !== undefined && round !== undefined) {\r\n    throw Error(\"Use either round or precision, not both\");\r\n  }\r\n\r\n  if (!axis) {\r\n    if (precision !== undefined) {\r\n      value = value.toPrecision(precision);\r\n      if (!options.zeros) {\r\n        value = parseFloat(value);\r\n      }\r\n    }\r\n\r\n    if (round !== undefined) {\r\n      if (round < 0) {\r\n        var num = Math.pow(10, -1 * round);\r\n        value = parseInt((1.0 * value / num).toFixed(0)) * num;\r\n      } else {\r\n        value = value.toFixed(round);\r\n        if (!options.zeros) {\r\n          value = parseFloat(value);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  if (options.thousands || options.decimal) {\r\n    value = toStr(value);\r\n    var parts = value.split(\".\");\r\n    value = parts[0];\r\n    if (options.thousands) {\r\n      value = value.replace(/\\B(?=(\\d{3})+(?!\\d))/g, options.thousands);\r\n    }\r\n    if (parts.length > 1) {\r\n      value += (options.decimal || \".\") + parts[1];\r\n    }\r\n  }\r\n\r\n  return pre + value + suffix;\r\n}\r\n\r\nfunction seriesOption(chart, series, option) {\r\n  if (option in series) {\r\n    return series[option];\r\n  } else if (option in chart.options) {\r\n    return chart.options[option];\r\n  }\r\n  return null;\r\n}\r\n\r\nvar baseOptions = {\r\n  maintainAspectRatio: false,\r\n  animation: false,\r\n  plugins: {\r\n    legend: {},\r\n    tooltip: {\r\n      displayColors: false,\r\n      callbacks: {}\r\n    },\r\n    title: {\r\n      font: {\r\n        size: 20\r\n      },\r\n      color: \"#333\"\r\n    }\r\n  },\r\n  interaction: {}\r\n};\r\n\r\nvar defaultOptions$2 = {\r\n  scales: {\r\n    y: {\r\n      ticks: {\r\n        maxTicksLimit: 4\r\n      },\r\n      title: {\r\n        font: {\r\n          size: 16\r\n        },\r\n        color: \"#333\"\r\n      },\r\n      grid: {}\r\n    },\r\n    x: {\r\n      grid: {\r\n        drawOnChartArea: false\r\n      },\r\n      title: {\r\n        font: {\r\n          size: 16\r\n        },\r\n        color: \"#333\"\r\n      },\r\n      time: {},\r\n      ticks: {}\r\n    }\r\n  }\r\n};\r\n\r\n// http://there4.io/2012/05/02/google-chart-color-list/\r\nvar defaultColors = [\r\n  \"#3366CC\", \"#DC3912\", \"#FF9900\", \"#109618\", \"#990099\", \"#3B3EAC\", \"#0099C6\",\r\n  \"#DD4477\", \"#66AA00\", \"#B82E2E\", \"#316395\", \"#994499\", \"#22AA99\", \"#AAAA11\",\r\n  \"#6633CC\", \"#E67300\", \"#8B0707\", \"#329262\", \"#5574A6\", \"#651067\"\r\n];\r\n\r\nfunction hideLegend$2(options, legend, hideLegend) {\r\n  if (legend !== undefined) {\r\n    options.plugins.legend.display = !!legend;\r\n    if (legend && legend !== true) {\r\n      options.plugins.legend.position = legend;\r\n    }\r\n  } else if (hideLegend) {\r\n    options.plugins.legend.display = false;\r\n  }\r\n}\r\n\r\nfunction setTitle$2(options, title) {\r\n  options.plugins.title.display = true;\r\n  options.plugins.title.text = title;\r\n}\r\n\r\nfunction setMin$2(options, min) {\r\n  if (min !== null) {\r\n    options.scales.y.min = toFloat(min);\r\n  }\r\n}\r\n\r\nfunction setMax$2(options, max) {\r\n  options.scales.y.max = toFloat(max);\r\n}\r\n\r\nfunction setBarMin$1(options, min) {\r\n  if (min !== null) {\r\n    options.scales.x.min = toFloat(min);\r\n  }\r\n}\r\n\r\nfunction setBarMax$1(options, max) {\r\n  options.scales.x.max = toFloat(max);\r\n}\r\n\r\nfunction setStacked$2(options, stacked) {\r\n  options.scales.x.stacked = !!stacked;\r\n  options.scales.y.stacked = !!stacked;\r\n}\r\n\r\nfunction setXtitle$2(options, title) {\r\n  options.scales.x.title.display = true;\r\n  options.scales.x.title.text = title;\r\n}\r\n\r\nfunction setYtitle$2(options, title) {\r\n  options.scales.y.title.display = true;\r\n  options.scales.y.title.text = title;\r\n}\r\n\r\n// https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\r\nfunction addOpacity(hex, opacity) {\r\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n  return result ? \"rgba(\" + parseInt(result[1], 16) + \", \" + parseInt(result[2], 16) + \", \" + parseInt(result[3], 16) + \", \" + opacity + \")\" : hex;\r\n}\r\n\r\nfunction notnull(x) {\r\n  return x !== null && x !== undefined;\r\n}\r\n\r\nfunction setLabelSize(chart, data, options) {\r\n  var maxLabelSize = Math.ceil(chart.element.offsetWidth / 4.0 / data.labels.length);\r\n  if (maxLabelSize > 25) {\r\n    maxLabelSize = 25;\r\n  } else if (maxLabelSize < 10) {\r\n    maxLabelSize = 10;\r\n  }\r\n  if (!options.scales.x.ticks.callback) {\r\n    options.scales.x.ticks.callback = function (value) {\r\n      value = toStr(this.getLabelForValue(value));\r\n      if (value.length > maxLabelSize) {\r\n        return value.substring(0, maxLabelSize - 2) + \"...\";\r\n      } else {\r\n        return value;\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nfunction calculateScale(series) {\r\n  var scale = 1;\r\n  var max = maxAbsY(series);\r\n  while (max >= 1024) {\r\n    scale *= 1024;\r\n    max /= 1024;\r\n  }\r\n  return scale;\r\n}\r\n\r\nfunction setFormatOptions$1(chart, options, chartType) {\r\n  // options to apply to x and r values for scatter and bubble\r\n  var numericOptions = {\r\n    thousands: chart.options.thousands,\r\n    decimal: chart.options.decimal\r\n  };\r\n\r\n  // options to apply to y value\r\n  var formatOptions = merge({\r\n    prefix: chart.options.prefix,\r\n    suffix: chart.options.suffix,\r\n    precision: chart.options.precision,\r\n    round: chart.options.round,\r\n    zeros: chart.options.zeros\r\n  }, numericOptions);\r\n\r\n  if (chart.options.bytes) {\r\n    var series = chart.data;\r\n    if (chartType === \"pie\") {\r\n      series = [{data: series}];\r\n    }\r\n\r\n    // set step size\r\n    formatOptions.byteScale = calculateScale(series);\r\n  }\r\n\r\n  if (chartType !== \"pie\") {\r\n    var axis = options.scales.y;\r\n    if (chartType === \"bar\") {\r\n      axis = options.scales.x;\r\n    }\r\n\r\n    if (formatOptions.byteScale) {\r\n      if (!axis.ticks.stepSize) {\r\n        axis.ticks.stepSize = formatOptions.byteScale / 2;\r\n      }\r\n      if (!axis.ticks.maxTicksLimit) {\r\n        axis.ticks.maxTicksLimit = 4;\r\n      }\r\n    }\r\n\r\n    if (!axis.ticks.callback) {\r\n      axis.ticks.callback = function (value) {\r\n        return formatValue(\"\", value, formatOptions, true);\r\n      };\r\n    }\r\n\r\n    if ((chartType === \"scatter\" || chartType === \"bubble\") && !options.scales.x.ticks.callback) {\r\n      options.scales.x.ticks.callback = function (value) {\r\n        return formatValue(\"\", value, numericOptions, true);\r\n      };\r\n    }\r\n  }\r\n\r\n  if (!options.plugins.tooltip.callbacks.label) {\r\n    if (chartType === \"scatter\") {\r\n      options.plugins.tooltip.callbacks.label = function (context) {\r\n        var label = context.dataset.label || '';\r\n        if (label) {\r\n          label += ': ';\r\n        }\r\n\r\n        var dataPoint = context.parsed;\r\n        return label + '(' + formatValue('', dataPoint.x, numericOptions) + ', ' + formatValue('', dataPoint.y, formatOptions) + ')';\r\n      };\r\n    } else if (chartType === \"bubble\") {\r\n      options.plugins.tooltip.callbacks.label = function (context) {\r\n        var label = context.dataset.label || '';\r\n        if (label) {\r\n          label += ': ';\r\n        }\r\n        var dataPoint = context.raw;\r\n        return label + '(' + formatValue('', dataPoint.x, numericOptions) + ', ' + formatValue('', dataPoint.y, formatOptions) + ', ' + formatValue('', dataPoint.v, numericOptions) + ')';\r\n      };\r\n    } else if (chartType === \"pie\") {\r\n      // need to use separate label for pie charts\r\n      options.plugins.tooltip.callbacks.label = function (context) {\r\n        return formatValue('', context.parsed, formatOptions);\r\n      };\r\n    } else {\r\n      var valueLabel = chartType === \"bar\" ? \"x\" : \"y\";\r\n      options.plugins.tooltip.callbacks.label = function (context) {\r\n        // don't show null values for stacked charts\r\n        if (context.parsed[valueLabel] === null) {\r\n          return;\r\n        }\r\n\r\n        var label = context.dataset.label || '';\r\n        if (label) {\r\n          label += ': ';\r\n        }\r\n        return formatValue(label, context.parsed[valueLabel], formatOptions);\r\n      };\r\n    }\r\n  }\r\n\r\n  // avoid formatting x-axis labels\r\n  // by default, Chart.js applies locale\r\n  if ((chartType === \"line\" || chartType === \"area\") && chart.xtype === \"number\") {\r\n    if (!options.scales.x.ticks.callback) {\r\n      options.scales.x.ticks.callback = function (value) {\r\n        return toStr(value);\r\n      };\r\n    }\r\n\r\n    if (!options.plugins.tooltip.callbacks.title) {\r\n      options.plugins.tooltip.callbacks.title = function (context) {\r\n        return toStr(context[0].parsed.x);\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nfunction maxAbsY(series) {\r\n  var max = 0;\r\n  for (var i = 0; i < series.length; i++) {\r\n    var data = series[i].data;\r\n    for (var j = 0; j < data.length; j++) {\r\n      var v = Math.abs(data[j][1]);\r\n      if (v > max) {\r\n        max = v;\r\n      }\r\n    }\r\n  }\r\n  return max;\r\n}\r\n\r\nfunction maxR(series) {\r\n  // start at zero since radius must be positive\r\n  var max = 0;\r\n  for (var i = 0; i < series.length; i++) {\r\n    var data = series[i].data;\r\n    for (var j = 0; j < data.length; j++) {\r\n      var v = data[j][2];\r\n      if (v > max) {\r\n        max = v;\r\n      }\r\n    }\r\n  }\r\n  return max;\r\n}\r\n\r\nvar jsOptions$2 = jsOptionsFunc(merge(baseOptions, defaultOptions$2), hideLegend$2, setTitle$2, setMin$2, setMax$2, setStacked$2, setXtitle$2, setYtitle$2);\r\n\r\nfunction prepareDefaultData(chart) {\r\n  var series = chart.data;\r\n  var rows = {};\r\n  var keys = [];\r\n  var labels = [];\r\n  var values = [];\r\n\r\n  for (var i = 0; i < series.length; i++) {\r\n    var data = series[i].data;\r\n\r\n    for (var j = 0; j < data.length; j++) {\r\n      var d = data[j];\r\n      var key = chart.xtype === \"datetime\" ? d[0].getTime() : d[0];\r\n      if (!rows[key]) {\r\n        rows[key] = new Array(series.length);\r\n        keys.push(key);\r\n      }\r\n      rows[key][i] = d[1];\r\n    }\r\n  }\r\n\r\n  if (chart.xtype === \"datetime\" || chart.xtype === \"number\") {\r\n    keys.sort(sortByNumber);\r\n  }\r\n\r\n  for (var i$1 = 0; i$1 < series.length; i$1++) {\r\n    values.push([]);\r\n  }\r\n\r\n  for (var i$2 = 0; i$2 < keys.length; i$2++) {\r\n    var key$1 = keys[i$2];\r\n\r\n    var label = chart.xtype === \"datetime\" ? new Date(key$1) : key$1;\r\n    labels.push(label);\r\n\r\n    var row = rows[key$1];\r\n    for (var j$1 = 0; j$1 < series.length; j$1++) {\r\n      var v = row[j$1];\r\n      // Chart.js doesn't like undefined\r\n      values[j$1].push(v === undefined ? null : v);\r\n    }\r\n  }\r\n\r\n  return {\r\n    labels: labels,\r\n    values: values\r\n  };\r\n}\r\n\r\nfunction prepareBubbleData(chart) {\r\n  var series = chart.data;\r\n  var values = [];\r\n  var max = maxR(series);\r\n\r\n  for (var i = 0; i < series.length; i++) {\r\n    var data = series[i].data;\r\n    var points = [];\r\n    for (var j = 0; j < data.length; j++) {\r\n      var v = data[j];\r\n      points.push({\r\n        x: v[0],\r\n        y: v[1],\r\n        r: v[2] * 20 / max,\r\n        // custom attribute, for tooltip\r\n        v: v[2]\r\n      });\r\n    }\r\n    values.push(points);\r\n  }\r\n\r\n  return {\r\n    labels: [],\r\n    values: values\r\n  };\r\n}\r\n\r\n// scatter or numeric line/area\r\nfunction prepareNumberData(chart) {\r\n  var series = chart.data;\r\n  var values = [];\r\n\r\n  for (var i = 0; i < series.length; i++) {\r\n    var data = series[i].data;\r\n\r\n    data.sort(sortByNumberSeries);\r\n\r\n    var points = [];\r\n    for (var j = 0; j < data.length; j++) {\r\n      var v = data[j];\r\n      points.push({\r\n        x: v[0],\r\n        y: v[1]\r\n      });\r\n    }\r\n    values.push(points);\r\n  }\r\n\r\n  return {\r\n    labels: [],\r\n    values: values\r\n  };\r\n}\r\n\r\nfunction prepareData(chart, chartType) {\r\n  if (chartType === \"bubble\") {\r\n    return prepareBubbleData(chart);\r\n  } else if (chart.xtype === \"number\" && chartType !== \"bar\" && chartType !== \"column\") {\r\n    return prepareNumberData(chart);\r\n  } else {\r\n    return prepareDefaultData(chart);\r\n  }\r\n}\r\n\r\nfunction createDataTable(chart, options, chartType) {\r\n  var ref = prepareData(chart, chartType);\r\n  var labels = ref.labels;\r\n  var values = ref.values;\r\n\r\n  var series = chart.data;\r\n  var datasets = [];\r\n  var colors = chart.options.colors || defaultColors;\r\n  for (var i = 0; i < series.length; i++) {\r\n    var s = series[i];\r\n\r\n    // use colors for each bar for single series format\r\n    var color = (void 0);\r\n    var backgroundColor = (void 0);\r\n    if (chart.options.colors && chart.singleSeriesFormat && (chartType === \"bar\" || chartType === \"column\") && !s.color && isArray(chart.options.colors) && !isArray(chart.options.colors[0])) {\r\n      color = colors;\r\n      backgroundColor = [];\r\n      for (var j = 0; j < colors.length; j++) {\r\n        backgroundColor[j] = addOpacity(color[j], 0.5);\r\n      }\r\n    } else {\r\n      color = s.color || colors[i];\r\n      backgroundColor = chartType !== \"line\" ? addOpacity(color, 0.5) : color;\r\n    }\r\n\r\n    var dataset = {\r\n      label: s.name || \"\",\r\n      data: values[i],\r\n      fill: chartType === \"area\",\r\n      borderColor: color,\r\n      backgroundColor: backgroundColor,\r\n      borderWidth: 2\r\n    };\r\n\r\n    var pointChart = chartType === \"line\" || chartType === \"area\" || chartType === \"scatter\" || chartType === \"bubble\";\r\n    if (pointChart) {\r\n      dataset.pointBackgroundColor = color;\r\n      dataset.pointHoverBackgroundColor = color;\r\n      dataset.pointHitRadius = 50;\r\n    }\r\n\r\n    if (chartType === \"bubble\") {\r\n      dataset.pointBackgroundColor = backgroundColor;\r\n      dataset.pointHoverBackgroundColor = backgroundColor;\r\n      dataset.pointHoverBorderWidth = 2;\r\n    }\r\n\r\n    if (s.stack) {\r\n      dataset.stack = s.stack;\r\n    }\r\n\r\n    var curve = seriesOption(chart, s, \"curve\");\r\n    if (curve === false) {\r\n      dataset.tension = 0;\r\n    } else if (pointChart) {\r\n      dataset.tension = 0.4;\r\n    }\r\n\r\n    var points = seriesOption(chart, s, \"points\");\r\n    if (points === false) {\r\n      dataset.pointRadius = 0;\r\n      dataset.pointHoverRadius = 0;\r\n    }\r\n\r\n    dataset = merge(dataset, chart.options.dataset || {});\r\n    dataset = merge(dataset, s.library || {});\r\n    dataset = merge(dataset, s.dataset || {});\r\n\r\n    datasets.push(dataset);\r\n  }\r\n\r\n  var xmin = chart.options.xmin;\r\n  var xmax = chart.options.xmax;\r\n\r\n  if (chart.xtype === \"datetime\") {\r\n    if (notnull(xmin)) {\r\n      options.scales.x.min = toDate(xmin).getTime();\r\n    }\r\n    if (notnull(xmax)) {\r\n      options.scales.x.max = toDate(xmax).getTime();\r\n    }\r\n  } else if (chart.xtype === \"number\") {\r\n    if (notnull(xmin)) {\r\n      options.scales.x.min = xmin;\r\n    }\r\n    if (notnull(xmax)) {\r\n      options.scales.x.max = xmax;\r\n    }\r\n  }\r\n\r\n  if (chart.xtype === \"datetime\") {\r\n    var timeUnit = calculateTimeUnit(labels);\r\n\r\n    // for empty datetime chart\r\n    if (labels.length === 0) {\r\n      if (notnull(xmin)) {\r\n        labels.push(toDate(xmin));\r\n      }\r\n      if (notnull(xmax)) {\r\n        labels.push(toDate(xmax));\r\n      }\r\n    }\r\n\r\n    if (labels.length > 0) {\r\n      var minTime = (notnull(xmin) ? toDate(xmin) : labels[0]).getTime();\r\n      var maxTime = (notnull(xmax) ? toDate(xmax) : labels[0]).getTime();\r\n\r\n      for (var i$1 = 1; i$1 < labels.length; i$1++) {\r\n        var value = labels[i$1].getTime();\r\n        if (value < minTime) {\r\n          minTime = value;\r\n        }\r\n        if (value > maxTime) {\r\n          maxTime = value;\r\n        }\r\n      }\r\n\r\n      var timeDiff = (maxTime - minTime) / (86400 * 1000.0);\r\n\r\n      if (!options.scales.x.time.unit) {\r\n        var step;\r\n        if (timeUnit === \"year\" || timeDiff > 365 * 10) {\r\n          options.scales.x.time.unit = \"year\";\r\n          step = 365;\r\n        } else if (timeUnit === \"month\" || timeDiff > 30 * 10) {\r\n          options.scales.x.time.unit = \"month\";\r\n          step = 30;\r\n        } else if (timeUnit === \"week\" || timeUnit === \"day\" || timeDiff > 10) {\r\n          options.scales.x.time.unit = \"day\";\r\n          step = 1;\r\n        } else if (timeUnit === \"hour\" || timeDiff > 0.5) {\r\n          options.scales.x.time.displayFormats = {hour: \"MMM d, h a\"};\r\n          options.scales.x.time.unit = \"hour\";\r\n          step = 1 / 24.0;\r\n        } else if (timeUnit === \"minute\") {\r\n          options.scales.x.time.displayFormats = {minute: \"h:mm a\"};\r\n          options.scales.x.time.unit = \"minute\";\r\n          step = 1 / 24.0 / 60.0;\r\n        }\r\n\r\n        if (step && timeDiff > 0) {\r\n          // width not available for hidden elements\r\n          var width = chart.element.offsetWidth;\r\n          if (width > 0) {\r\n            var unitStepSize = Math.ceil(timeDiff / step / (width / 100.0));\r\n            if (timeUnit === \"week\" && step === 1) {\r\n              unitStepSize = Math.ceil(unitStepSize / 7.0) * 7;\r\n            }\r\n            options.scales.x.ticks.stepSize = unitStepSize;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!options.scales.x.time.tooltipFormat) {\r\n        if (timeUnit === \"year\") {\r\n          options.scales.x.time.tooltipFormat = \"yyyy\";\r\n        } else if (timeUnit === \"month\") {\r\n          options.scales.x.time.tooltipFormat = \"MMM yyyy\";\r\n        } else if (timeUnit === \"week\" || timeUnit === \"day\") {\r\n          options.scales.x.time.tooltipFormat = \"PP\";\r\n        } else if (timeUnit === \"hour\") {\r\n          options.scales.x.time.tooltipFormat = \"MMM d, h a\";\r\n        } else if (timeUnit === \"minute\") {\r\n          options.scales.x.time.tooltipFormat = \"h:mm a\";\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    labels: labels,\r\n    datasets: datasets\r\n  };\r\n}\r\n\r\nvar defaultExport$2 = function defaultExport(library) {\r\n  this.name = \"chartjs\";\r\n  this.library = library;\r\n};\r\n\r\ndefaultExport$2.prototype.renderLineChart = function renderLineChart (chart, chartType) {\r\n  if (!chartType) {\r\n    chartType = \"line\";\r\n  }\r\n\r\n  var chartOptions = {};\r\n\r\n  var options = jsOptions$2(chart, merge(chartOptions, chart.options));\r\n  setFormatOptions$1(chart, options, chartType);\r\n\r\n  var data = createDataTable(chart, options, chartType);\r\n\r\n  if (chart.xtype === \"number\") {\r\n    options.scales.x.type = options.scales.x.type || \"linear\";\r\n    options.scales.x.position = options.scales.x.position || \"bottom\";\r\n  } else {\r\n    options.scales.x.type = chart.xtype === \"string\" ? \"category\" : \"time\";\r\n  }\r\n\r\n  this.drawChart(chart, \"line\", data, options);\r\n};\r\n\r\ndefaultExport$2.prototype.renderPieChart = function renderPieChart (chart) {\r\n  var options = merge({}, baseOptions);\r\n  if (chart.options.donut) {\r\n    options.cutout = \"50%\";\r\n  }\r\n\r\n  if (\"legend\" in chart.options) {\r\n    hideLegend$2(options, chart.options.legend);\r\n  }\r\n\r\n  if (chart.options.title) {\r\n    setTitle$2(options, chart.options.title);\r\n  }\r\n\r\n  options = merge(options, chart.options.library || {});\r\n  setFormatOptions$1(chart, options, \"pie\");\r\n\r\n  var labels = [];\r\n  var values = [];\r\n  for (var i = 0; i < chart.data.length; i++) {\r\n    var point = chart.data[i];\r\n    labels.push(point[0]);\r\n    values.push(point[1]);\r\n  }\r\n\r\n  var dataset = {\r\n    data: values,\r\n    backgroundColor: chart.options.colors || defaultColors\r\n  };\r\n  dataset = merge(dataset, chart.options.dataset || {});\r\n\r\n  var data = {\r\n    labels: labels,\r\n    datasets: [dataset]\r\n  };\r\n\r\n  this.drawChart(chart, \"pie\", data, options);\r\n};\r\n\r\ndefaultExport$2.prototype.renderColumnChart = function renderColumnChart (chart, chartType) {\r\n  var options;\r\n  if (chartType === \"bar\") {\r\n    var barOptions = merge(baseOptions, defaultOptions$2);\r\n    barOptions.indexAxis = \"y\";\r\n\r\n    // ensure gridlines have proper orientation\r\n    barOptions.scales.x.grid.drawOnChartArea = true;\r\n    barOptions.scales.y.grid.drawOnChartArea = false;\r\n    delete barOptions.scales.y.ticks.maxTicksLimit;\r\n\r\n    options = jsOptionsFunc(barOptions, hideLegend$2, setTitle$2, setBarMin$1, setBarMax$1, setStacked$2, setXtitle$2, setYtitle$2)(chart, chart.options);\r\n  } else {\r\n    options = jsOptions$2(chart, chart.options);\r\n  }\r\n  setFormatOptions$1(chart, options, chartType);\r\n  var data = createDataTable(chart, options, \"column\");\r\n  if (chartType !== \"bar\") {\r\n    setLabelSize(chart, data, options);\r\n  }\r\n  if (!(\"mode\" in options.interaction)) {\r\n    options.interaction.mode = \"index\";\r\n  }\r\n  this.drawChart(chart, \"bar\", data, options);\r\n};\r\n\r\ndefaultExport$2.prototype.renderAreaChart = function renderAreaChart (chart) {\r\n  this.renderLineChart(chart, \"area\");\r\n};\r\n\r\ndefaultExport$2.prototype.renderBarChart = function renderBarChart (chart) {\r\n  this.renderColumnChart(chart, \"bar\");\r\n};\r\n\r\ndefaultExport$2.prototype.renderScatterChart = function renderScatterChart (chart, chartType) {\r\n  chartType = chartType || \"scatter\";\r\n\r\n  var options = jsOptions$2(chart, chart.options);\r\n  setFormatOptions$1(chart, options, chartType);\r\n\r\n  if (!(\"showLine\" in options)) {\r\n    options.showLine = false;\r\n  }\r\n\r\n  var data = createDataTable(chart, options, chartType);\r\n\r\n  options.scales.x.type = options.scales.x.type || \"linear\";\r\n  options.scales.x.position = options.scales.x.position || \"bottom\";\r\n\r\n  // prevent grouping hover and tooltips\r\n  if (!(\"mode\" in options.interaction)) {\r\n    options.interaction.mode = \"nearest\";\r\n  }\r\n\r\n  this.drawChart(chart, chartType, data, options);\r\n};\r\n\r\ndefaultExport$2.prototype.renderBubbleChart = function renderBubbleChart (chart) {\r\n  this.renderScatterChart(chart, \"bubble\");\r\n};\r\n\r\ndefaultExport$2.prototype.destroy = function destroy (chart) {\r\n  if (chart.chart) {\r\n    chart.chart.destroy();\r\n  }\r\n};\r\n\r\ndefaultExport$2.prototype.drawChart = function drawChart (chart, type, data, options) {\r\n  this.destroy(chart);\r\n  if (chart.destroyed) { return; }\r\n\r\n  var chartOptions = {\r\n    type: type,\r\n    data: data,\r\n    options: options\r\n  };\r\n\r\n  if (chart.options.code) {\r\n    window.console.log(\"new Chart(ctx, \" + JSON.stringify(chartOptions) + \");\");\r\n  }\r\n\r\n  chart.element.innerHTML = \"<canvas></canvas>\";\r\n  var ctx = chart.element.getElementsByTagName(\"CANVAS\")[0];\r\n  chart.chart = new this.library(ctx, chartOptions);\r\n};\r\n\r\nvar defaultOptions$1 = {\r\n  chart: {},\r\n  xAxis: {\r\n    title: {\r\n      text: null\r\n    },\r\n    labels: {\r\n      style: {\r\n        fontSize: \"12px\"\r\n      }\r\n    }\r\n  },\r\n  yAxis: {\r\n    title: {\r\n      text: null\r\n    },\r\n    labels: {\r\n      style: {\r\n        fontSize: \"12px\"\r\n      }\r\n    }\r\n  },\r\n  title: {\r\n    text: null\r\n  },\r\n  credits: {\r\n    enabled: false\r\n  },\r\n  legend: {\r\n    borderWidth: 0\r\n  },\r\n  tooltip: {\r\n    style: {\r\n      fontSize: \"12px\"\r\n    }\r\n  },\r\n  plotOptions: {\r\n    areaspline: {},\r\n    area: {},\r\n    series: {\r\n      marker: {}\r\n    }\r\n  },\r\n  time: {\r\n    useUTC: false\r\n  }\r\n};\r\n\r\nfunction hideLegend$1(options, legend, hideLegend) {\r\n  if (legend !== undefined) {\r\n    options.legend.enabled = !!legend;\r\n    if (legend && legend !== true) {\r\n      if (legend === \"top\" || legend === \"bottom\") {\r\n        options.legend.verticalAlign = legend;\r\n      } else {\r\n        options.legend.layout = \"vertical\";\r\n        options.legend.verticalAlign = \"middle\";\r\n        options.legend.align = legend;\r\n      }\r\n    }\r\n  } else if (hideLegend) {\r\n    options.legend.enabled = false;\r\n  }\r\n}\r\n\r\nfunction setTitle$1(options, title) {\r\n  options.title.text = title;\r\n}\r\n\r\nfunction setMin$1(options, min) {\r\n  options.yAxis.min = min;\r\n}\r\n\r\nfunction setMax$1(options, max) {\r\n  options.yAxis.max = max;\r\n}\r\n\r\nfunction setStacked$1(options, stacked) {\r\n  var stackedValue = stacked ? (stacked === true ? \"normal\" : stacked) : null;\r\n  options.plotOptions.series.stacking = stackedValue;\r\n  options.plotOptions.area.stacking = stackedValue;\r\n  options.plotOptions.areaspline.stacking = stackedValue;\r\n}\r\n\r\nfunction setXtitle$1(options, title) {\r\n  options.xAxis.title.text = title;\r\n}\r\n\r\nfunction setYtitle$1(options, title) {\r\n  options.yAxis.title.text = title;\r\n}\r\n\r\nvar jsOptions$1 = jsOptionsFunc(defaultOptions$1, hideLegend$1, setTitle$1, setMin$1, setMax$1, setStacked$1, setXtitle$1, setYtitle$1);\r\n\r\nfunction setFormatOptions(chart, options, chartType) {\r\n  var formatOptions = {\r\n    prefix: chart.options.prefix,\r\n    suffix: chart.options.suffix,\r\n    thousands: chart.options.thousands,\r\n    decimal: chart.options.decimal,\r\n    precision: chart.options.precision,\r\n    round: chart.options.round,\r\n    zeros: chart.options.zeros\r\n  };\r\n\r\n  // skip when axis is an array (like with min/max)\r\n  if (chartType !== \"pie\" && !isArray(options.yAxis) && !options.yAxis.labels.formatter) {\r\n    options.yAxis.labels.formatter = function () {\r\n      return formatValue(\"\", this.value, formatOptions);\r\n    };\r\n  }\r\n\r\n  if (!options.tooltip.pointFormatter && !options.tooltip.pointFormat) {\r\n    options.tooltip.pointFormatter = function () {\r\n      return '<span style=\"color:' + this.color + '\">\\u25CF</span> ' + formatValue(this.series.name + ': <b>', this.y, formatOptions) + '</b><br/>';\r\n    };\r\n  }\r\n}\r\n\r\nvar defaultExport$1 = function defaultExport(library) {\r\n  this.name = \"highcharts\";\r\n  this.library = library;\r\n};\r\n\r\ndefaultExport$1.prototype.renderLineChart = function renderLineChart (chart, chartType) {\r\n  chartType = chartType || \"spline\";\r\n  var chartOptions = {};\r\n  if (chartType === \"areaspline\") {\r\n    chartOptions = {\r\n      plotOptions: {\r\n        areaspline: {\r\n          stacking: \"normal\"\r\n        },\r\n        area: {\r\n          stacking: \"normal\"\r\n        },\r\n        series: {\r\n          marker: {\r\n            enabled: false\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  if (chart.options.curve === false) {\r\n    if (chartType === \"areaspline\") {\r\n      chartType = \"area\";\r\n    } else if (chartType === \"spline\") {\r\n      chartType = \"line\";\r\n    }\r\n  }\r\n\r\n  var options = jsOptions$1(chart, chart.options, chartOptions);\r\n  if (chart.xtype === \"number\") {\r\n    options.xAxis.type = options.xAxis.type || \"linear\";\r\n  } else {\r\n    options.xAxis.type = chart.xtype === \"string\" ? \"category\" : \"datetime\";\r\n  }\r\n  if (!options.chart.type) {\r\n    options.chart.type = chartType;\r\n  }\r\n  setFormatOptions(chart, options, chartType);\r\n\r\n  var series = chart.data;\r\n  for (var i = 0; i < series.length; i++) {\r\n    series[i].name = series[i].name || \"Value\";\r\n    var data = series[i].data;\r\n    if (chart.xtype === \"datetime\") {\r\n      for (var j = 0; j < data.length; j++) {\r\n        data[j][0] = data[j][0].getTime();\r\n      }\r\n    } else if (chart.xtype === \"number\") {\r\n      data.sort(sortByNumberSeries);\r\n    }\r\n    series[i].marker = {symbol: \"circle\"};\r\n    if (chart.options.points === false) {\r\n      series[i].marker.enabled = false;\r\n    }\r\n  }\r\n\r\n  this.drawChart(chart, series, options);\r\n};\r\n\r\ndefaultExport$1.prototype.renderScatterChart = function renderScatterChart (chart) {\r\n  var options = jsOptions$1(chart, chart.options, {});\r\n  options.chart.type = \"scatter\";\r\n  this.drawChart(chart, chart.data, options);\r\n};\r\n\r\ndefaultExport$1.prototype.renderPieChart = function renderPieChart (chart) {\r\n  var chartOptions = merge(defaultOptions$1, {});\r\n\r\n  if (chart.options.colors) {\r\n    chartOptions.colors = chart.options.colors;\r\n  }\r\n  if (chart.options.donut) {\r\n    chartOptions.plotOptions = {pie: {innerSize: \"50%\"}};\r\n  }\r\n\r\n  if (\"legend\" in chart.options) {\r\n    hideLegend$1(chartOptions, chart.options.legend);\r\n  }\r\n\r\n  if (chart.options.title) {\r\n    setTitle$1(chartOptions, chart.options.title);\r\n  }\r\n\r\n  var options = merge(chartOptions, chart.options.library || {});\r\n  setFormatOptions(chart, options, \"pie\");\r\n  var series = [{\r\n    type: \"pie\",\r\n    name: chart.options.label || \"Value\",\r\n    data: chart.data\r\n  }];\r\n\r\n  this.drawChart(chart, series, options);\r\n};\r\n\r\ndefaultExport$1.prototype.renderColumnChart = function renderColumnChart (chart, chartType) {\r\n  chartType = chartType || \"column\";\r\n  var series = chart.data;\r\n  var options = jsOptions$1(chart, chart.options);\r\n  var rows = [];\r\n  var categories = [];\r\n  options.chart.type = chartType;\r\n  setFormatOptions(chart, options, chartType);\r\n\r\n  for (var i = 0; i < series.length; i++) {\r\n    var s = series[i];\r\n\r\n    for (var j = 0; j < s.data.length; j++) {\r\n      var d = s.data[j];\r\n      if (!rows[d[0]]) {\r\n        rows[d[0]] = new Array(series.length);\r\n        categories.push(d[0]);\r\n      }\r\n      rows[d[0]][i] = d[1];\r\n    }\r\n  }\r\n\r\n  if (chart.xtype === \"number\") {\r\n    categories.sort(sortByNumber);\r\n  }\r\n\r\n  options.xAxis.categories = categories;\r\n\r\n  var newSeries = [];\r\n  for (var i$1 = 0; i$1 < series.length; i$1++) {\r\n    var d$1 = [];\r\n    for (var j$1 = 0; j$1 < categories.length; j$1++) {\r\n      d$1.push(rows[categories[j$1]][i$1] || 0);\r\n    }\r\n\r\n    var d2 = {\r\n      name: series[i$1].name || \"Value\",\r\n      data: d$1\r\n    };\r\n    if (series[i$1].stack) {\r\n      d2.stack = series[i$1].stack;\r\n    }\r\n\r\n    newSeries.push(d2);\r\n  }\r\n\r\n  this.drawChart(chart, newSeries, options);\r\n};\r\n\r\ndefaultExport$1.prototype.renderBarChart = function renderBarChart (chart) {\r\n  this.renderColumnChart(chart, \"bar\");\r\n};\r\n\r\ndefaultExport$1.prototype.renderAreaChart = function renderAreaChart (chart) {\r\n  this.renderLineChart(chart, \"areaspline\");\r\n};\r\n\r\ndefaultExport$1.prototype.destroy = function destroy (chart) {\r\n  if (chart.chart) {\r\n    chart.chart.destroy();\r\n  }\r\n};\r\n\r\ndefaultExport$1.prototype.drawChart = function drawChart (chart, data, options) {\r\n  this.destroy(chart);\r\n  if (chart.destroyed) { return; }\r\n\r\n  options.chart.renderTo = chart.element.id;\r\n  options.series = data;\r\n\r\n  if (chart.options.code) {\r\n    window.console.log(\"new Highcharts.Chart(\" + JSON.stringify(options) + \");\");\r\n  }\r\n\r\n  chart.chart = new this.library.Chart(options);\r\n};\r\n\r\nvar loaded = {};\r\nvar callbacks = [];\r\n\r\n// Set chart options\r\nvar defaultOptions = {\r\n  chartArea: {},\r\n  fontName: \"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif\",\r\n  pointSize: 6,\r\n  legend: {\r\n    textStyle: {\r\n      fontSize: 12,\r\n      color: \"#444\"\r\n    },\r\n    alignment: \"center\",\r\n    position: \"right\"\r\n  },\r\n  curveType: \"function\",\r\n  hAxis: {\r\n    textStyle: {\r\n      color: \"#666\",\r\n      fontSize: 12\r\n    },\r\n    titleTextStyle: {},\r\n    gridlines: {\r\n      color: \"transparent\"\r\n    },\r\n    baselineColor: \"#ccc\",\r\n    viewWindow: {}\r\n  },\r\n  vAxis: {\r\n    textStyle: {\r\n      color: \"#666\",\r\n      fontSize: 12\r\n    },\r\n    titleTextStyle: {},\r\n    baselineColor: \"#ccc\",\r\n    viewWindow: {}\r\n  },\r\n  tooltip: {\r\n    textStyle: {\r\n      color: \"#666\",\r\n      fontSize: 12\r\n    }\r\n  }\r\n};\r\n\r\nfunction hideLegend(options, legend, hideLegend) {\r\n  if (legend !== undefined) {\r\n    var position;\r\n    if (!legend) {\r\n      position = \"none\";\r\n    } else if (legend === true) {\r\n      position = \"right\";\r\n    } else {\r\n      position = legend;\r\n    }\r\n    options.legend.position = position;\r\n  } else if (hideLegend) {\r\n    options.legend.position = \"none\";\r\n  }\r\n}\r\n\r\nfunction setTitle(options, title) {\r\n  options.title = title;\r\n  options.titleTextStyle = {color: \"#333\", fontSize: \"20px\"};\r\n}\r\n\r\nfunction setMin(options, min) {\r\n  options.vAxis.viewWindow.min = min;\r\n}\r\n\r\nfunction setMax(options, max) {\r\n  options.vAxis.viewWindow.max = max;\r\n}\r\n\r\nfunction setBarMin(options, min) {\r\n  options.hAxis.viewWindow.min = min;\r\n}\r\n\r\nfunction setBarMax(options, max) {\r\n  options.hAxis.viewWindow.max = max;\r\n}\r\n\r\nfunction setStacked(options, stacked) {\r\n  options.isStacked = stacked || false;\r\n}\r\n\r\nfunction setXtitle(options, title) {\r\n  options.hAxis.title = title;\r\n  options.hAxis.titleTextStyle.italic = false;\r\n}\r\n\r\nfunction setYtitle(options, title) {\r\n  options.vAxis.title = title;\r\n  options.vAxis.titleTextStyle.italic = false;\r\n}\r\n\r\nvar jsOptions = jsOptionsFunc(defaultOptions, hideLegend, setTitle, setMin, setMax, setStacked, setXtitle, setYtitle);\r\n\r\nfunction resize(callback) {\r\n  if (window.attachEvent) {\r\n    window.attachEvent(\"onresize\", callback);\r\n  } else if (window.addEventListener) {\r\n    window.addEventListener(\"resize\", callback, true);\r\n  }\r\n  callback();\r\n}\r\n\r\nvar defaultExport = function defaultExport(library) {\r\n  this.name = \"google\";\r\n  this.library = library;\r\n};\r\n\r\ndefaultExport.prototype.renderLineChart = function renderLineChart (chart) {\r\n    var this$1$1 = this;\r\n\r\n  this.waitForLoaded(chart, function () {\r\n    var chartOptions = {};\r\n\r\n    if (chart.options.curve === false) {\r\n      chartOptions.curveType = \"none\";\r\n    }\r\n\r\n    if (chart.options.points === false) {\r\n      chartOptions.pointSize = 0;\r\n    }\r\n\r\n    var options = jsOptions(chart, chart.options, chartOptions);\r\n    var data = this$1$1.createDataTable(chart.data, chart.xtype);\r\n\r\n    this$1$1.drawChart(chart, \"LineChart\", data, options);\r\n  });\r\n};\r\n\r\ndefaultExport.prototype.renderPieChart = function renderPieChart (chart) {\r\n    var this$1$1 = this;\r\n\r\n  this.waitForLoaded(chart, function () {\r\n    var chartOptions = {\r\n      chartArea: {\r\n        top: \"10%\",\r\n        height: \"80%\"\r\n      },\r\n      legend: {}\r\n    };\r\n    if (chart.options.colors) {\r\n      chartOptions.colors = chart.options.colors;\r\n    }\r\n    if (chart.options.donut) {\r\n      chartOptions.pieHole = 0.5;\r\n    }\r\n    if (\"legend\" in chart.options) {\r\n      hideLegend(chartOptions, chart.options.legend);\r\n    }\r\n    if (chart.options.title) {\r\n      setTitle(chartOptions, chart.options.title);\r\n    }\r\n    var options = merge(merge(defaultOptions, chartOptions), chart.options.library || {});\r\n\r\n    var data = new this$1$1.library.visualization.DataTable();\r\n    data.addColumn(\"string\", \"\");\r\n    data.addColumn(\"number\", \"Value\");\r\n    data.addRows(chart.data);\r\n\r\n    this$1$1.drawChart(chart, \"PieChart\", data, options);\r\n  });\r\n};\r\n\r\ndefaultExport.prototype.renderColumnChart = function renderColumnChart (chart) {\r\n    var this$1$1 = this;\r\n\r\n  this.waitForLoaded(chart, function () {\r\n    var options = jsOptions(chart, chart.options);\r\n    var data = this$1$1.createDataTable(chart.data, chart.xtype);\r\n\r\n    this$1$1.drawChart(chart, \"ColumnChart\", data, options);\r\n  });\r\n};\r\n\r\ndefaultExport.prototype.renderBarChart = function renderBarChart (chart) {\r\n    var this$1$1 = this;\r\n\r\n  this.waitForLoaded(chart, function () {\r\n    var chartOptions = {\r\n      hAxis: {\r\n        gridlines: {\r\n          color: \"#ccc\"\r\n        }\r\n      }\r\n    };\r\n    var options = jsOptionsFunc(defaultOptions, hideLegend, setTitle, setBarMin, setBarMax, setStacked, setXtitle, setYtitle)(chart, chart.options, chartOptions);\r\n    var data = this$1$1.createDataTable(chart.data, chart.xtype);\r\n\r\n    this$1$1.drawChart(chart, \"BarChart\", data, options);\r\n  });\r\n};\r\n\r\ndefaultExport.prototype.renderAreaChart = function renderAreaChart (chart) {\r\n    var this$1$1 = this;\r\n\r\n  this.waitForLoaded(chart, function () {\r\n    var chartOptions = {\r\n      isStacked: true,\r\n      pointSize: 0,\r\n      areaOpacity: 0.5\r\n    };\r\n\r\n    var options = jsOptions(chart, chart.options, chartOptions);\r\n    var data = this$1$1.createDataTable(chart.data, chart.xtype);\r\n\r\n    this$1$1.drawChart(chart, \"AreaChart\", data, options);\r\n  });\r\n};\r\n\r\ndefaultExport.prototype.renderGeoChart = function renderGeoChart (chart) {\r\n    var this$1$1 = this;\r\n\r\n  this.waitForLoaded(chart, \"geochart\", function () {\r\n    var chartOptions = {\r\n      legend: \"none\",\r\n      colorAxis: {\r\n        colors: chart.options.colors || [\"#f6c7b6\", \"#ce502d\"]\r\n      }\r\n    };\r\n    var options = merge(merge(defaultOptions, chartOptions), chart.options.library || {});\r\n\r\n    var data = new this$1$1.library.visualization.DataTable();\r\n    data.addColumn(\"string\", \"\");\r\n    data.addColumn(\"number\", chart.options.label || \"Value\");\r\n    data.addRows(chart.data);\r\n\r\n    this$1$1.drawChart(chart, \"GeoChart\", data, options);\r\n  });\r\n};\r\n\r\ndefaultExport.prototype.renderScatterChart = function renderScatterChart (chart) {\r\n    var this$1$1 = this;\r\n\r\n  this.waitForLoaded(chart, function () {\r\n    var chartOptions = {};\r\n    var options = jsOptions(chart, chart.options, chartOptions);\r\n\r\n    var series = chart.data;\r\n    var rows2 = [];\r\n    for (var i = 0; i < series.length; i++) {\r\n      series[i].name = series[i].name || \"Value\";\r\n      var d = series[i].data;\r\n      for (var j = 0; j < d.length; j++) {\r\n        var row = new Array(series.length + 1);\r\n        row[0] = d[j][0];\r\n        row[i + 1] = d[j][1];\r\n        rows2.push(row);\r\n      }\r\n    }\r\n\r\n    var data = new this$1$1.library.visualization.DataTable();\r\n    data.addColumn(\"number\", \"\");\r\n    for (var i$1 = 0; i$1 < series.length; i$1++) {\r\n      data.addColumn(\"number\", series[i$1].name);\r\n    }\r\n    data.addRows(rows2);\r\n\r\n    this$1$1.drawChart(chart, \"ScatterChart\", data, options);\r\n  });\r\n};\r\n\r\ndefaultExport.prototype.renderTimeline = function renderTimeline (chart) {\r\n    var this$1$1 = this;\r\n\r\n  this.waitForLoaded(chart, \"timeline\", function () {\r\n    var chartOptions = {\r\n      legend: \"none\"\r\n    };\r\n\r\n    if (chart.options.colors) {\r\n      chartOptions.colors = chart.options.colors;\r\n    }\r\n    var options = merge(merge(defaultOptions, chartOptions), chart.options.library || {});\r\n\r\n    var data = new this$1$1.library.visualization.DataTable();\r\n    data.addColumn({type: \"string\", id: \"Name\"});\r\n    data.addColumn({type: \"date\", id: \"Start\"});\r\n    data.addColumn({type: \"date\", id: \"End\"});\r\n    data.addRows(chart.data);\r\n\r\n    chart.element.style.lineHeight = \"normal\";\r\n\r\n    this$1$1.drawChart(chart, \"Timeline\", data, options);\r\n  });\r\n};\r\n\r\n// TODO remove resize events\r\ndefaultExport.prototype.destroy = function destroy (chart) {\r\n  if (chart.chart) {\r\n    chart.chart.clearChart();\r\n  }\r\n};\r\n\r\ndefaultExport.prototype.drawChart = function drawChart (chart, type, data, options) {\r\n  this.destroy(chart);\r\n  if (chart.destroyed) { return; }\r\n\r\n  if (chart.options.code) {\r\n    window.console.log(\"var data = new google.visualization.DataTable(\" + data.toJSON() + \");\\nvar chart = new google.visualization.\" + type + \"(element);\\nchart.draw(data, \" + JSON.stringify(options) + \");\");\r\n  }\r\n\r\n  chart.chart = new this.library.visualization[type](chart.element);\r\n  resize(function () {\r\n    chart.chart.draw(data, options);\r\n  });\r\n};\r\n\r\ndefaultExport.prototype.waitForLoaded = function waitForLoaded (chart, pack, callback) {\r\n    var this$1$1 = this;\r\n\r\n  if (!callback) {\r\n    callback = pack;\r\n    pack = \"corechart\";\r\n  }\r\n\r\n  callbacks.push({pack: pack, callback: callback});\r\n\r\n  if (loaded[pack]) {\r\n    this.runCallbacks();\r\n  } else {\r\n    loaded[pack] = true;\r\n\r\n    // https://groups.google.com/forum/#!topic/google-visualization-api/fMKJcyA2yyI\r\n    var loadOptions = {\r\n      packages: [pack],\r\n      callback: function () { this$1$1.runCallbacks(); }\r\n    };\r\n    var config = chart.__config();\r\n    if (config.language) {\r\n      loadOptions.language = config.language;\r\n    }\r\n    if (pack === \"geochart\" && config.mapsApiKey) {\r\n      loadOptions.mapsApiKey = config.mapsApiKey;\r\n    }\r\n\r\n    this.library.charts.load(\"current\", loadOptions);\r\n  }\r\n};\r\n\r\ndefaultExport.prototype.runCallbacks = function runCallbacks () {\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    var cb = callbacks[i];\r\n    var call = this.library.visualization && ((cb.pack === \"corechart\" && this.library.visualization.LineChart) || (cb.pack === \"timeline\" && this.library.visualization.Timeline) || (cb.pack === \"geochart\" && this.library.visualization.GeoChart));\r\n    if (call) {\r\n      cb.callback();\r\n      callbacks.splice(i, 1);\r\n      i--;\r\n    }\r\n  }\r\n};\r\n\r\n// cant use object as key\r\ndefaultExport.prototype.createDataTable = function createDataTable (series, columnType) {\r\n  var rows = [];\r\n  var sortedLabels = [];\r\n  for (var i = 0; i < series.length; i++) {\r\n    var s = series[i];\r\n    series[i].name = series[i].name || \"Value\";\r\n\r\n    for (var j = 0; j < s.data.length; j++) {\r\n      var d = s.data[j];\r\n      var key = columnType === \"datetime\" ? d[0].getTime() : d[0];\r\n      if (!rows[key]) {\r\n        rows[key] = new Array(series.length);\r\n        sortedLabels.push(key);\r\n      }\r\n      rows[key][i] = d[1];\r\n    }\r\n  }\r\n\r\n  var rows2 = [];\r\n  var values = [];\r\n  for (var j$1 = 0; j$1 < sortedLabels.length; j$1++) {\r\n    var i$1 = sortedLabels[j$1];\r\n    var value = (void 0);\r\n    if (columnType === \"datetime\") {\r\n      value = new Date(i$1);\r\n      values.push(value);\r\n    } else {\r\n      value = i$1;\r\n    }\r\n    rows2.push([value].concat(rows[i$1]));\r\n  }\r\n\r\n  var day = true;\r\n  if (columnType === \"datetime\") {\r\n    rows2.sort(sortByTime);\r\n\r\n    var timeUnit = calculateTimeUnit(values, true);\r\n    day = isDay(timeUnit);\r\n  } else if (columnType === \"number\") {\r\n    rows2.sort(sortByNumberSeries);\r\n\r\n    for (var i$2 = 0; i$2 < rows2.length; i$2++) {\r\n      rows2[i$2][0] = toStr(rows2[i$2][0]);\r\n    }\r\n\r\n    columnType = \"string\";\r\n  }\r\n\r\n  // create datatable\r\n  var data = new this.library.visualization.DataTable();\r\n  columnType = columnType === \"datetime\" && day ? \"date\" : columnType;\r\n  data.addColumn(columnType, \"\");\r\n  for (var i$3 = 0; i$3 < series.length; i$3++) {\r\n    data.addColumn(\"number\", series[i$3].name);\r\n  }\r\n  data.addRows(rows2);\r\n\r\n  return data;\r\n};\r\n\r\nvar adapters = [];\r\n\r\nfunction getAdapterType(library) {\r\n  if (library) {\r\n    if (library.product === \"Highcharts\") {\r\n      return defaultExport$1;\r\n    } else if (library.charts) {\r\n      return defaultExport;\r\n    } else if (isFunction(library)) {\r\n      return defaultExport$2;\r\n    }\r\n  }\r\n  throw new Error(\"Unknown adapter\");\r\n}\r\n\r\nfunction addAdapter(library) {\r\n  var adapterType = getAdapterType(library);\r\n\r\n  for (var i = 0; i < adapters.length; i++) {\r\n    if (adapters[i].library === library) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  adapters.push(new adapterType(library));\r\n}\r\n\r\nfunction loadAdapters() {\r\n  if (\"Chart\" in window) {\r\n    addAdapter(window.Chart);\r\n  }\r\n\r\n  if (\"Highcharts\" in window) {\r\n    addAdapter(window.Highcharts);\r\n  }\r\n\r\n  if (window.google && window.google.charts) {\r\n    addAdapter(window.google);\r\n  }\r\n}\r\n\r\n// TODO remove chartType if cross-browser way\r\n// to get the name of the chart class\r\nfunction callAdapter(chartType, chart) {\r\n  var fnName = \"render\" + chartType;\r\n  var adapterName = chart.options.adapter;\r\n\r\n  loadAdapters();\r\n\r\n  for (var i = 0; i < adapters.length; i++) {\r\n    var adapter = adapters[i];\r\n    if ((!adapterName || adapterName === adapter.name) && isFunction(adapter[fnName])) {\r\n      chart.adapter = adapter.name;\r\n      chart.__adapterObject = adapter;\r\n      return adapter[fnName](chart);\r\n    }\r\n  }\r\n\r\n  if (adapters.length > 0) {\r\n    throw new Error(\"No charting library found for \" + chartType);\r\n  } else {\r\n    throw new Error(\"No charting libraries found - be sure to include one before your charts\");\r\n  }\r\n}\r\n\r\nvar Chartkick = {\r\n  charts: {},\r\n  configure: function (options) {\r\n    for (var key in options) {\r\n      if (Object.prototype.hasOwnProperty.call(options, key)) {\r\n        Chartkick.config[key] = options[key];\r\n      }\r\n    }\r\n  },\r\n  setDefaultOptions: function (opts) {\r\n    Chartkick.options = opts;\r\n  },\r\n  eachChart: function (callback) {\r\n    for (var chartId in Chartkick.charts) {\r\n      if (Object.prototype.hasOwnProperty.call(Chartkick.charts, chartId)) {\r\n        callback(Chartkick.charts[chartId]);\r\n      }\r\n    }\r\n  },\r\n  destroyAll: function () {\r\n    for (var chartId in Chartkick.charts) {\r\n      if (Object.prototype.hasOwnProperty.call(Chartkick.charts, chartId)) {\r\n        Chartkick.charts[chartId].destroy();\r\n        delete Chartkick.charts[chartId];\r\n      }\r\n    }\r\n  },\r\n  config: {},\r\n  options: {},\r\n  adapters: adapters,\r\n  addAdapter: addAdapter,\r\n  use: function (adapter) {\r\n    addAdapter(adapter);\r\n    return Chartkick;\r\n  }\r\n};\r\n\r\nfunction formatSeriesBubble(data) {\r\n  var r = [];\r\n  for (var i = 0; i < data.length; i++) {\r\n    r.push([toFloat(data[i][0]), toFloat(data[i][1]), toFloat(data[i][2])]);\r\n  }\r\n  return r;\r\n}\r\n\r\n// casts data to proper type\r\n// sorting is left to adapters\r\nfunction formatSeriesData(data, keyType) {\r\n  if (keyType === \"bubble\") {\r\n    return formatSeriesBubble(data);\r\n  }\r\n\r\n  var keyFunc;\r\n  if (keyType === \"number\") {\r\n    keyFunc = toFloat;\r\n  } else if (keyType === \"datetime\") {\r\n    keyFunc = toDate;\r\n  } else {\r\n    keyFunc = toStr;\r\n  }\r\n\r\n  var r = [];\r\n  for (var i = 0; i < data.length; i++) {\r\n    r.push([keyFunc(data[i][0]), toFloat(data[i][1])]);\r\n  }\r\n  return r;\r\n}\r\n\r\nfunction detectXType(series, noDatetime, options) {\r\n  if (dataEmpty(series)) {\r\n    if ((options.xmin || options.xmax) && (!options.xmin || isDate(options.xmin)) && (!options.xmax || isDate(options.xmax))) {\r\n      return \"datetime\";\r\n    } else {\r\n      return \"number\";\r\n    }\r\n  } else if (detectXTypeWithFunction(series, isNumber)) {\r\n    return \"number\";\r\n  } else if (!noDatetime && detectXTypeWithFunction(series, isDate)) {\r\n    return \"datetime\";\r\n  } else {\r\n    return \"string\";\r\n  }\r\n}\r\n\r\nfunction detectXTypeWithFunction(series, func) {\r\n  for (var i = 0; i < series.length; i++) {\r\n    var data = toArr(series[i].data);\r\n    for (var j = 0; j < data.length; j++) {\r\n      if (!func(data[j][0])) {\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\n// creates a shallow copy of each element of the array\r\n// elements are expected to be objects\r\nfunction copySeries(series) {\r\n  var newSeries = [];\r\n  for (var i = 0; i < series.length; i++) {\r\n    var copy = {};\r\n    for (var j in series[i]) {\r\n      if (Object.prototype.hasOwnProperty.call(series[i], j)) {\r\n        copy[j] = series[i][j];\r\n      }\r\n    }\r\n    newSeries.push(copy);\r\n  }\r\n  return newSeries;\r\n}\r\n\r\nfunction processSeries(chart, keyType, noDatetime) {\r\n  var opts = chart.options;\r\n  var series = chart.rawData;\r\n\r\n  // see if one series or multiple\r\n  chart.singleSeriesFormat = !isArray(series) || !isPlainObject(series[0]);\r\n  if (chart.singleSeriesFormat) {\r\n    series = [{name: opts.label, data: series}];\r\n  }\r\n\r\n  // convert to array\r\n  // must come before dataEmpty check\r\n  series = copySeries(series);\r\n  for (var i = 0; i < series.length; i++) {\r\n    series[i].data = toArr(series[i].data);\r\n  }\r\n\r\n  chart.xtype = keyType || (opts.discrete ? \"string\" : detectXType(series, noDatetime, opts));\r\n\r\n  // right format\r\n  for (var i$1 = 0; i$1 < series.length; i$1++) {\r\n    series[i$1].data = formatSeriesData(series[i$1].data, chart.xtype);\r\n  }\r\n\r\n  return series;\r\n}\r\n\r\nfunction processSimple(chart) {\r\n  var perfectData = toArr(chart.rawData);\r\n  for (var i = 0; i < perfectData.length; i++) {\r\n    perfectData[i] = [toStr(perfectData[i][0]), toFloat(perfectData[i][1])];\r\n  }\r\n  return perfectData;\r\n}\r\n\r\nfunction dataEmpty(data, chartType) {\r\n  if (chartType === \"PieChart\" || chartType === \"GeoChart\" || chartType === \"Timeline\") {\r\n    return data.length === 0;\r\n  } else {\r\n    for (var i = 0; i < data.length; i++) {\r\n      if (data[i].data.length > 0) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n}\r\n\r\nfunction addDownloadButton(chart) {\r\n  var download = chart.options.download;\r\n  if (download === true) {\r\n    download = {};\r\n  } else if (typeof download === \"string\") {\r\n    download = {filename: download};\r\n  }\r\n\r\n  var link = document.createElement(\"a\");\r\n  link.download = download.filename || \"chart.png\";\r\n  link.style.position = \"absolute\";\r\n  link.style.top = \"20px\";\r\n  link.style.right = \"20px\";\r\n  link.style.zIndex = 1000;\r\n  link.style.lineHeight = \"20px\";\r\n  link.target = \"_blank\"; // for safari\r\n\r\n  var image = document.createElement(\"img\");\r\n  // icon from Font Awesome, modified to set fill color\r\n  var svg = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path fill=\\\"#CCCCCC\\\" d=\\\"M344 240h-56L287.1 152c0-13.25-10.75-24-24-24h-16C234.7 128 223.1 138.8 223.1 152L224 240h-56c-9.531 0-18.16 5.656-22 14.38C142.2 263.1 143.9 273.3 150.4 280.3l88.75 96C243.7 381.2 250.1 384 256.8 384c7.781-.3125 13.25-2.875 17.75-7.844l87.25-96c6.406-7.031 8.031-17.19 4.188-25.88S353.5 240 344 240zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 464c-114.7 0-208-93.31-208-208S141.3 48 256 48s208 93.31 208 208S370.7 464 256 464z\\\"/></svg>\";\r\n  image.src = \"data:image/svg+xml;utf8,\" + (encodeURIComponent(svg));\r\n  image.alt = \"Download\";\r\n  image.style.width = \"20px\";\r\n  image.style.height = \"20px\";\r\n  image.style.border = \"none\";\r\n  link.appendChild(image);\r\n\r\n  var element = chart.element;\r\n  element.style.position = \"relative\";\r\n\r\n  chart.__downloadAttached = true;\r\n\r\n  // mouseenter\r\n  chart.__enterEvent = element.addEventListener(\"mouseover\", function (e) {\r\n    var related = e.relatedTarget;\r\n    // check download option again to ensure it wasn't changed\r\n    if ((!related || (related !== this && !this.contains(related))) && chart.options.download) {\r\n      link.href = chart.toImage(download);\r\n      element.appendChild(link);\r\n    }\r\n  });\r\n\r\n  // mouseleave\r\n  chart.__leaveEvent = element.addEventListener(\"mouseout\", function (e) {\r\n    var related = e.relatedTarget;\r\n    if (!related || (related !== this && !this.contains(related))) {\r\n      if (link.parentNode) {\r\n        link.parentNode.removeChild(link);\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nvar pendingRequests = [];\r\nvar runningRequests = 0;\r\nvar maxRequests = 4;\r\n\r\nfunction pushRequest(url, success, error) {\r\n  pendingRequests.push([url, success, error]);\r\n  runNext();\r\n}\r\n\r\nfunction runNext() {\r\n  if (runningRequests < maxRequests) {\r\n    var request = pendingRequests.shift();\r\n    if (request) {\r\n      runningRequests++;\r\n      getJSON(request[0], request[1], request[2]);\r\n      runNext();\r\n    }\r\n  }\r\n}\r\n\r\nfunction requestComplete() {\r\n  runningRequests--;\r\n  runNext();\r\n}\r\n\r\nfunction getJSON(url, success, error) {\r\n  var xhr = new XMLHttpRequest();\r\n  xhr.open(\"GET\", url, true);\r\n  xhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n  xhr.onload = function () {\r\n    requestComplete();\r\n    if (xhr.status === 200) {\r\n      success(JSON.parse(xhr.responseText));\r\n    } else {\r\n      error(xhr.statusText);\r\n    }\r\n  };\r\n  xhr.send();\r\n}\r\n\r\n// helpers\r\n\r\nfunction setText(element, text) {\r\n  element.textContent = text;\r\n}\r\n\r\n// TODO remove prefix for all messages\r\nfunction chartError(element, message, noPrefix) {\r\n  if (!noPrefix) {\r\n    message = \"Error Loading Chart: \" + message;\r\n  }\r\n  setText(element, message);\r\n  element.style.color = \"#ff0000\";\r\n}\r\n\r\nfunction errorCatcher(chart) {\r\n  try {\r\n    chart.__render();\r\n  } catch (err) {\r\n    chartError(chart.element, err.message);\r\n    throw err;\r\n  }\r\n}\r\n\r\nfunction fetchDataSource(chart, dataSource, showLoading) {\r\n  // only show loading message for urls and callbacks\r\n  if (showLoading && chart.options.loading && (typeof dataSource === \"string\" || typeof dataSource === \"function\")) {\r\n    setText(chart.element, chart.options.loading);\r\n  }\r\n\r\n  if (typeof dataSource === \"string\") {\r\n    pushRequest(dataSource, function (data) {\r\n      chart.rawData = data;\r\n      errorCatcher(chart);\r\n    }, function (message) {\r\n      chartError(chart.element, message);\r\n    });\r\n  } else if (typeof dataSource === \"function\") {\r\n    try {\r\n      dataSource(function (data) {\r\n        chart.rawData = data;\r\n        errorCatcher(chart);\r\n      }, function (message) {\r\n        chartError(chart.element, message, true);\r\n      });\r\n    } catch (err) {\r\n      chartError(chart.element, err, true);\r\n    }\r\n  } else {\r\n    chart.rawData = dataSource;\r\n    errorCatcher(chart);\r\n  }\r\n}\r\n\r\nfunction renderChart(chartType, chart) {\r\n  if (dataEmpty(chart.data, chartType)) {\r\n    var message = chart.options.empty || (chart.options.messages && chart.options.messages.empty) || \"No data\";\r\n    setText(chart.element, message);\r\n  } else {\r\n    callAdapter(chartType, chart);\r\n    // TODO add downloadSupported method to adapter\r\n    if (chart.options.download && !chart.__downloadAttached && chart.adapter === \"chartjs\") {\r\n      addDownloadButton(chart);\r\n    }\r\n  }\r\n}\r\n\r\nfunction getElement(element) {\r\n  if (typeof element === \"string\") {\r\n    var elementId = element;\r\n    element = document.getElementById(element);\r\n    if (!element) {\r\n      throw new Error(\"No element with id \" + elementId);\r\n    }\r\n  }\r\n  return element;\r\n}\r\n\r\n// define classes\r\n\r\nvar Chart = function Chart(element, dataSource, options) {\r\n  this.element = getElement(element);\r\n  this.options = merge(Chartkick.options, options || {});\r\n  this.dataSource = dataSource;\r\n\r\n  // TODO handle charts without an id for eachChart and destroyAll\r\n  if (this.element.id) {\r\n    Chartkick.charts[this.element.id] = this;\r\n  }\r\n\r\n  fetchDataSource(this, dataSource, true);\r\n\r\n  if (this.options.refresh) {\r\n    this.startRefresh();\r\n  }\r\n};\r\n\r\nChart.prototype.getElement = function getElement () {\r\n  return this.element;\r\n};\r\n\r\nChart.prototype.getDataSource = function getDataSource () {\r\n  return this.dataSource;\r\n};\r\n\r\nChart.prototype.getData = function getData () {\r\n  return this.data;\r\n};\r\n\r\nChart.prototype.getOptions = function getOptions () {\r\n  return this.options;\r\n};\r\n\r\nChart.prototype.getChartObject = function getChartObject () {\r\n  return this.chart;\r\n};\r\n\r\nChart.prototype.getAdapter = function getAdapter () {\r\n  return this.adapter;\r\n};\r\n\r\nChart.prototype.updateData = function updateData (dataSource, options) {\r\n  this.dataSource = dataSource;\r\n  if (options) {\r\n    this.__updateOptions(options);\r\n  }\r\n  fetchDataSource(this, dataSource, true);\r\n};\r\n\r\nChart.prototype.setOptions = function setOptions (options) {\r\n  this.__updateOptions(options);\r\n  this.redraw();\r\n};\r\n\r\nChart.prototype.redraw = function redraw () {\r\n  fetchDataSource(this, this.rawData);\r\n};\r\n\r\nChart.prototype.refreshData = function refreshData () {\r\n  if (typeof this.dataSource === \"string\") {\r\n    // prevent browser from caching\r\n    var sep = this.dataSource.indexOf(\"?\") === -1 ? \"?\" : \"&\";\r\n    var url = this.dataSource + sep + \"_=\" + (new Date()).getTime();\r\n    fetchDataSource(this, url);\r\n  } else if (typeof this.dataSource === \"function\") {\r\n    fetchDataSource(this, this.dataSource);\r\n  }\r\n};\r\n\r\nChart.prototype.startRefresh = function startRefresh () {\r\n    var this$1$1 = this;\r\n\r\n  var refresh = this.options.refresh;\r\n\r\n  if (refresh && typeof this.dataSource !== \"string\" && typeof this.dataSource !== \"function\") {\r\n    throw new Error(\"Data source must be a URL or callback for refresh\");\r\n  }\r\n\r\n  if (!this.intervalId) {\r\n    if (refresh) {\r\n      this.intervalId = setInterval(function () {\r\n        this$1$1.refreshData();\r\n      }, refresh * 1000);\r\n    } else {\r\n      throw new Error(\"No refresh interval\");\r\n    }\r\n  }\r\n};\r\n\r\nChart.prototype.stopRefresh = function stopRefresh () {\r\n  if (this.intervalId) {\r\n    clearInterval(this.intervalId);\r\n    this.intervalId = null;\r\n  }\r\n};\r\n\r\nChart.prototype.toImage = function toImage (download) {\r\n  // TODO move logic to adapter\r\n  if (this.adapter === \"chartjs\") {\r\n    if (download && download.background && download.background !== \"transparent\") {\r\n      // https://stackoverflow.com/questions/30464750/chartjs-line-chart-set-background-color\r\n      var canvas = this.chart.canvas;\r\n      var ctx = this.chart.ctx;\r\n      var tmpCanvas = document.createElement(\"canvas\");\r\n      var tmpCtx = tmpCanvas.getContext(\"2d\");\r\n      tmpCanvas.width = ctx.canvas.width;\r\n      tmpCanvas.height = ctx.canvas.height;\r\n      tmpCtx.fillStyle = download.background;\r\n      tmpCtx.fillRect(0, 0, tmpCanvas.width, tmpCanvas.height);\r\n      tmpCtx.drawImage(canvas, 0, 0);\r\n      return tmpCanvas.toDataURL(\"image/png\");\r\n    } else {\r\n      return this.chart.toBase64Image();\r\n    }\r\n  } else {\r\n    throw new Error(\"Feature only available for Chart.js\");\r\n  }\r\n};\r\n\r\nChart.prototype.destroy = function destroy () {\r\n  this.destroyed = true;\r\n  this.stopRefresh();\r\n\r\n  if (this.__adapterObject) {\r\n    this.__adapterObject.destroy(this);\r\n  }\r\n\r\n  if (this.__enterEvent) {\r\n    this.element.removeEventListener(\"mouseover\", this.__enterEvent);\r\n  }\r\n\r\n  if (this.__leaveEvent) {\r\n    this.element.removeEventListener(\"mouseout\", this.__leaveEvent);\r\n  }\r\n};\r\n\r\nChart.prototype.__updateOptions = function __updateOptions (options) {\r\n  var updateRefresh = options.refresh && options.refresh !== this.options.refresh;\r\n  this.options = merge(Chartkick.options, options);\r\n  if (updateRefresh) {\r\n    this.stopRefresh();\r\n    this.startRefresh();\r\n  }\r\n};\r\n\r\nChart.prototype.__render = function __render () {\r\n  this.data = this.__processData();\r\n  renderChart(this.__chartName(), this);\r\n};\r\n\r\nChart.prototype.__config = function __config () {\r\n  return Chartkick.config;\r\n};\r\n\r\nvar LineChart = /*@__PURE__*/(function (Chart) {\r\n  function LineChart () {\r\n    Chart.apply(this, arguments);\r\n  }\r\n\r\n  if ( Chart ) LineChart.__proto__ = Chart;\r\n  LineChart.prototype = Object.create( Chart && Chart.prototype );\r\n  LineChart.prototype.constructor = LineChart;\r\n\r\n  LineChart.prototype.__processData = function __processData () {\r\n    return processSeries(this);\r\n  };\r\n\r\n  LineChart.prototype.__chartName = function __chartName () {\r\n    return \"LineChart\";\r\n  };\r\n\r\n  return LineChart;\r\n}(Chart));\r\n\r\nvar PieChart = /*@__PURE__*/(function (Chart) {\r\n  function PieChart () {\r\n    Chart.apply(this, arguments);\r\n  }\r\n\r\n  if ( Chart ) PieChart.__proto__ = Chart;\r\n  PieChart.prototype = Object.create( Chart && Chart.prototype );\r\n  PieChart.prototype.constructor = PieChart;\r\n\r\n  PieChart.prototype.__processData = function __processData () {\r\n    return processSimple(this);\r\n  };\r\n\r\n  PieChart.prototype.__chartName = function __chartName () {\r\n    return \"PieChart\";\r\n  };\r\n\r\n  return PieChart;\r\n}(Chart));\r\n\r\nvar ColumnChart = /*@__PURE__*/(function (Chart) {\r\n  function ColumnChart () {\r\n    Chart.apply(this, arguments);\r\n  }\r\n\r\n  if ( Chart ) ColumnChart.__proto__ = Chart;\r\n  ColumnChart.prototype = Object.create( Chart && Chart.prototype );\r\n  ColumnChart.prototype.constructor = ColumnChart;\r\n\r\n  ColumnChart.prototype.__processData = function __processData () {\r\n    return processSeries(this, null, true);\r\n  };\r\n\r\n  ColumnChart.prototype.__chartName = function __chartName () {\r\n    return \"ColumnChart\";\r\n  };\r\n\r\n  return ColumnChart;\r\n}(Chart));\r\n\r\nvar BarChart = /*@__PURE__*/(function (Chart) {\r\n  function BarChart () {\r\n    Chart.apply(this, arguments);\r\n  }\r\n\r\n  if ( Chart ) BarChart.__proto__ = Chart;\r\n  BarChart.prototype = Object.create( Chart && Chart.prototype );\r\n  BarChart.prototype.constructor = BarChart;\r\n\r\n  BarChart.prototype.__processData = function __processData () {\r\n    return processSeries(this, null, true);\r\n  };\r\n\r\n  BarChart.prototype.__chartName = function __chartName () {\r\n    return \"BarChart\";\r\n  };\r\n\r\n  return BarChart;\r\n}(Chart));\r\n\r\nvar AreaChart = /*@__PURE__*/(function (Chart) {\r\n  function AreaChart () {\r\n    Chart.apply(this, arguments);\r\n  }\r\n\r\n  if ( Chart ) AreaChart.__proto__ = Chart;\r\n  AreaChart.prototype = Object.create( Chart && Chart.prototype );\r\n  AreaChart.prototype.constructor = AreaChart;\r\n\r\n  AreaChart.prototype.__processData = function __processData () {\r\n    return processSeries(this);\r\n  };\r\n\r\n  AreaChart.prototype.__chartName = function __chartName () {\r\n    return \"AreaChart\";\r\n  };\r\n\r\n  return AreaChart;\r\n}(Chart));\r\n\r\nvar GeoChart = /*@__PURE__*/(function (Chart) {\r\n  function GeoChart () {\r\n    Chart.apply(this, arguments);\r\n  }\r\n\r\n  if ( Chart ) GeoChart.__proto__ = Chart;\r\n  GeoChart.prototype = Object.create( Chart && Chart.prototype );\r\n  GeoChart.prototype.constructor = GeoChart;\r\n\r\n  GeoChart.prototype.__processData = function __processData () {\r\n    return processSimple(this);\r\n  };\r\n\r\n  GeoChart.prototype.__chartName = function __chartName () {\r\n    return \"GeoChart\";\r\n  };\r\n\r\n  return GeoChart;\r\n}(Chart));\r\n\r\nvar ScatterChart = /*@__PURE__*/(function (Chart) {\r\n  function ScatterChart () {\r\n    Chart.apply(this, arguments);\r\n  }\r\n\r\n  if ( Chart ) ScatterChart.__proto__ = Chart;\r\n  ScatterChart.prototype = Object.create( Chart && Chart.prototype );\r\n  ScatterChart.prototype.constructor = ScatterChart;\r\n\r\n  ScatterChart.prototype.__processData = function __processData () {\r\n    return processSeries(this, \"number\");\r\n  };\r\n\r\n  ScatterChart.prototype.__chartName = function __chartName () {\r\n    return \"ScatterChart\";\r\n  };\r\n\r\n  return ScatterChart;\r\n}(Chart));\r\n\r\nvar BubbleChart = /*@__PURE__*/(function (Chart) {\r\n  function BubbleChart () {\r\n    Chart.apply(this, arguments);\r\n  }\r\n\r\n  if ( Chart ) BubbleChart.__proto__ = Chart;\r\n  BubbleChart.prototype = Object.create( Chart && Chart.prototype );\r\n  BubbleChart.prototype.constructor = BubbleChart;\r\n\r\n  BubbleChart.prototype.__processData = function __processData () {\r\n    return processSeries(this, \"bubble\");\r\n  };\r\n\r\n  BubbleChart.prototype.__chartName = function __chartName () {\r\n    return \"BubbleChart\";\r\n  };\r\n\r\n  return BubbleChart;\r\n}(Chart));\r\n\r\nvar Timeline = /*@__PURE__*/(function (Chart) {\r\n  function Timeline () {\r\n    Chart.apply(this, arguments);\r\n  }\r\n\r\n  if ( Chart ) Timeline.__proto__ = Chart;\r\n  Timeline.prototype = Object.create( Chart && Chart.prototype );\r\n  Timeline.prototype.constructor = Timeline;\r\n\r\n  Timeline.prototype.__processData = function __processData () {\r\n    var data = this.rawData;\r\n    for (var i = 0; i < data.length; i++) {\r\n      data[i][1] = toDate(data[i][1]);\r\n      data[i][2] = toDate(data[i][2]);\r\n    }\r\n    return data;\r\n  };\r\n\r\n  Timeline.prototype.__chartName = function __chartName () {\r\n    return \"Timeline\";\r\n  };\r\n\r\n  return Timeline;\r\n}(Chart));\r\n\r\nChartkick.LineChart = LineChart;\r\nChartkick.PieChart = PieChart;\r\nChartkick.ColumnChart = ColumnChart;\r\nChartkick.BarChart = BarChart;\r\nChartkick.AreaChart = AreaChart;\r\nChartkick.GeoChart = GeoChart;\r\nChartkick.ScatterChart = ScatterChart;\r\nChartkick.BubbleChart = BubbleChart;\r\nChartkick.Timeline = Timeline;\r\n\r\n// not ideal, but allows for simpler integration\r\nif (typeof window !== \"undefined\" && !window.Chartkick) {\r\n  window.Chartkick = Chartkick;\r\n\r\n  // clean up previous charts before Turbolinks loads new page\r\n  document.addEventListener(\"turbolinks:before-render\", function () {\r\n    if (Chartkick.config.autoDestroy !== false) {\r\n      Chartkick.destroyAll();\r\n    }\r\n  });\r\n\r\n  // clean up previous charts before Turbo loads new page\r\n  document.addEventListener(\"turbo:before-render\", function () {\r\n    if (Chartkick.config.autoDestroy !== false) {\r\n      Chartkick.destroyAll();\r\n    }\r\n  });\r\n\r\n  // use setTimeout so charting library can come later in same JS file\r\n  setTimeout(function () {\r\n    window.dispatchEvent(new Event(\"chartkick:load\"));\r\n  }, 0);\r\n}\r\n\r\n// backwards compatibility for esm require\r\nChartkick.default = Chartkick;\r\n\r\nexport { Chartkick as default };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}