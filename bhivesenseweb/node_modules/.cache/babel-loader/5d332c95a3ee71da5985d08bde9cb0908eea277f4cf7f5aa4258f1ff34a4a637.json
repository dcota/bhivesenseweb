{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-7cbffb3a\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"scrolling-component\",\n  ref: \"scrollcomponent\",\n  name: \"lang\"\n};\nconst _hoisted_2 = {\n  class: \"container my-body\"\n};\nconst _hoisted_3 = {\n  class: \"text-center mt-5\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_createElementVNode(\"section\", _hoisted_2, [_createElementVNode(\"h1\", _hoisted_3, _toDisplayString($options.translate(\"accFormTitle\")), 1 /* TEXT */), _createCommentVNode(\"<section\\r\\n        v-if=\\\"showsection\\\"\\r\\n        class=\\\"alert mt-3 alert-dismissible fade show\\\"\\r\\n        role=\\\"alert\\\"\\r\\n        v-bind:class=\\\"'alert-' + message.type\\\"\\r\\n      >\\r\\n        {{ message.msg }}\\r\\n        <button\\r\\n          type=\\\"button\\\"\\r\\n          class=\\\"btn-close\\\"\\r\\n          data-bs-dismiss=\\\"alert\\\"\\r\\n          aria-label=\\\"Close\\\"\\r\\n        ></button>\\r\\n      </section>\\r\\n      <form class=\\\"form-signin\\\" v-on:submit.prevent=\\\"update\\\">\\r\\n        <section class=\\\"row mt-5\\\">\\r\\n          <section class=\\\"col-md-2\\\">\\r\\n            <input\\r\\n              type=\\\"text\\\"\\r\\n              v-model=\\\"form.firstname\\\"\\r\\n              class=\\\"form-control\\\"\\r\\n              id=\\\"firstname\\\"\\r\\n              placeholder=\\\"primeiro nome...\\\"\\r\\n            />\\r\\n          </section>\\r\\n          <section class=\\\"col-md-2\\\">\\r\\n            <input\\r\\n              type=\\\"text\\\"\\r\\n              v-model=\\\"form.lastname\\\"\\r\\n              class=\\\"form-control\\\"\\r\\n              id=\\\"lastname\\\"\\r\\n              placeholder=\\\"último nome...\\\"\\r\\n            />\\r\\n          </section>\\r\\n          <section class=\\\"col-md-8\\\">\\r\\n            <input\\r\\n              type=\\\"text\\\"\\r\\n              v-model=\\\"form.name\\\"\\r\\n              class=\\\"form-control\\\"\\r\\n              id=\\\"name\\\"\\r\\n              placeholder=\\\"nome completo...\\\"\\r\\n            />\\r\\n          </section>\\r\\n        </section>\\r\\n        <section class=\\\"row mt-4\\\">\\r\\n          <section class=\\\"col-md-8\\\">\\r\\n            <input\\r\\n              type=\\\"text\\\"\\r\\n              v-model=\\\"form.course\\\"\\r\\n              class=\\\"form-control\\\"\\r\\n              id=\\\"course\\\"\\r\\n              placeholder=\\\"curso...\\\"\\r\\n            />\\r\\n          </section>\\r\\n          <section class=\\\"col-md-4\\\">\\r\\n            <input\\r\\n              type=\\\"text\\\"\\r\\n              v-model=\\\"form.class\\\"\\r\\n              class=\\\"form-control\\\"\\r\\n              id=\\\"class\\\"\\r\\n              placeholder=\\\"turma...\\\"\\r\\n            />\\r\\n          </section>\\r\\n        </section>\\r\\n        <section class=\\\"row mt-4\\\">\\r\\n          <section class=\\\"col-md-4\\\">\\r\\n            <input\\r\\n              type=\\\"text\\\"\\r\\n              v-model=\\\"form.email\\\"\\r\\n              class=\\\"form-control\\\"\\r\\n              id=\\\"email\\\"\\r\\n              placeholder=\\\"email...\\\"\\r\\n            />\\r\\n          </section>\\r\\n          <section class=\\\"col-md-4\\\">\\r\\n            <input\\r\\n              type=\\\"text\\\"\\r\\n              v-model=\\\"form.mobile\\\"\\r\\n              class=\\\"form-control\\\"\\r\\n              id=\\\"mobile\\\"\\r\\n              placeholder=\\\"telemóvel...\\\"\\r\\n            />\\r\\n          </section>\\r\\n          <section class=\\\"col-md-4\\\">\\r\\n            <input\\r\\n              placeholder=\\\"Data de nascimento\\\"\\r\\n              class=\\\"form-control textbox-n\\\"\\r\\n              type=\\\"date\\\"\\r\\n              v-model=\\\"form.bdate\\\"\\r\\n              id=\\\"bdate\\\"\\r\\n            />\\r\\n          </section>\\r\\n        </section>\\r\\n        <section class=\\\"row mt-4\\\">\\r\\n          <section>\\r\\n            <section class=\\\"form-check\\\">\\r\\n              <input\\r\\n                class=\\\"form-check-input\\\"\\r\\n                type=\\\"checkbox\\\"\\r\\n                v-model=\\\"form.notifications\\\"\\r\\n                value=\\\"\\\"\\r\\n                id=\\\"subscribenews\\\"\\r\\n                checked\\r\\n              />\\r\\n              <label class=\\\"form-check-label\\\" for=\\\"subscribenews\\\">\\r\\n                Subscrever notificações?</label\\r\\n              >\\r\\n            </section>\\r\\n          </section>\\r\\n        </section>\\r\\n        <section class=\\\"text-center\\\">\\r\\n          <button\\r\\n            type=\\\"submit\\\"\\r\\n            class=\\\"btn btn-outline-primary mt-4 me-4 my-button\\\"\\r\\n          >\\r\\n            ALTERAR\\r\\n          </button>\\r\\n          <button\\r\\n            @click=\\\"leave()\\\"\\r\\n            type=\\\"button\\\"\\r\\n            class=\\\"btn btn-outline-primary mt-4 my-button\\\"\\r\\n          >\\r\\n            SAIR\\r\\n          </button>\\r\\n        </section>\\r\\n      </form>\\r\\n      <section class=\\\"spacer\\\"></section>\")])], 512 /* NEED_PATCH */);\n}","map":{"version":3,"mappings":";;;EAOWA,KAAK,EAAC,qBAAqB;EAACC,GAAG,EAAC,iBAAiB;EAACC,IAAI,EAAC;;;EACrDF,KAAK,EAAC;AAAmB;;EAC5BA,KAAK,EAAC;AAAkB;;uBAFhCG,oBAmIU,WAnIVC,UAmIU,GAlIRC,oBAiIU,WAjIVC,UAiIU,GAhIRD,oBAAiE,MAAjEE,UAAiE,mBAAjCC,kBAAS,kCACzCC,ulIA8HqC","names":["class","ref","name","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","$options","_createCommentVNode"],"sourceRoot":"","sources":["C:\\Users\\duart\\OneDrive - PGA\\Ambiente de Trabalho\\bhivesenseweb\\bhivesenseweb\\src\\views\\Account.vue"],"sourcesContent":["/*\r\nMEIW - Programação Web Avançada - projeto final\r\nAuhtor: Duarte Cota\r\nDescription: implementation of the view Alterar Conta\r\n*/\r\n\r\n<template>\r\n  <section class=\"scrolling-component\" ref=\"scrollcomponent\" name=\"lang\">\r\n    <section class=\"container my-body\">\r\n      <h1 class=\"text-center mt-5\">{{ translate(\"accFormTitle\") }}</h1>\r\n      <!--<section\r\n        v-if=\"showsection\"\r\n        class=\"alert mt-3 alert-dismissible fade show\"\r\n        role=\"alert\"\r\n        v-bind:class=\"'alert-' + message.type\"\r\n      >\r\n        {{ message.msg }}\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn-close\"\r\n          data-bs-dismiss=\"alert\"\r\n          aria-label=\"Close\"\r\n        ></button>\r\n      </section>\r\n      <form class=\"form-signin\" v-on:submit.prevent=\"update\">\r\n        <section class=\"row mt-5\">\r\n          <section class=\"col-md-2\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.firstname\"\r\n              class=\"form-control\"\r\n              id=\"firstname\"\r\n              placeholder=\"primeiro nome...\"\r\n            />\r\n          </section>\r\n          <section class=\"col-md-2\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.lastname\"\r\n              class=\"form-control\"\r\n              id=\"lastname\"\r\n              placeholder=\"último nome...\"\r\n            />\r\n          </section>\r\n          <section class=\"col-md-8\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.name\"\r\n              class=\"form-control\"\r\n              id=\"name\"\r\n              placeholder=\"nome completo...\"\r\n            />\r\n          </section>\r\n        </section>\r\n        <section class=\"row mt-4\">\r\n          <section class=\"col-md-8\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.course\"\r\n              class=\"form-control\"\r\n              id=\"course\"\r\n              placeholder=\"curso...\"\r\n            />\r\n          </section>\r\n          <section class=\"col-md-4\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.class\"\r\n              class=\"form-control\"\r\n              id=\"class\"\r\n              placeholder=\"turma...\"\r\n            />\r\n          </section>\r\n        </section>\r\n        <section class=\"row mt-4\">\r\n          <section class=\"col-md-4\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.email\"\r\n              class=\"form-control\"\r\n              id=\"email\"\r\n              placeholder=\"email...\"\r\n            />\r\n          </section>\r\n          <section class=\"col-md-4\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.mobile\"\r\n              class=\"form-control\"\r\n              id=\"mobile\"\r\n              placeholder=\"telemóvel...\"\r\n            />\r\n          </section>\r\n          <section class=\"col-md-4\">\r\n            <input\r\n              placeholder=\"Data de nascimento\"\r\n              class=\"form-control textbox-n\"\r\n              type=\"date\"\r\n              v-model=\"form.bdate\"\r\n              id=\"bdate\"\r\n            />\r\n          </section>\r\n        </section>\r\n        <section class=\"row mt-4\">\r\n          <section>\r\n            <section class=\"form-check\">\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"checkbox\"\r\n                v-model=\"form.notifications\"\r\n                value=\"\"\r\n                id=\"subscribenews\"\r\n                checked\r\n              />\r\n              <label class=\"form-check-label\" for=\"subscribenews\">\r\n                Subscrever notificações?</label\r\n              >\r\n            </section>\r\n          </section>\r\n        </section>\r\n        <section class=\"text-center\">\r\n          <button\r\n            type=\"submit\"\r\n            class=\"btn btn-outline-primary mt-4 me-4 my-button\"\r\n          >\r\n            ALTERAR\r\n          </button>\r\n          <button\r\n            @click=\"leave()\"\r\n            type=\"button\"\r\n            class=\"btn btn-outline-primary mt-4 my-button\"\r\n          >\r\n            SAIR\r\n          </button>\r\n        </section>\r\n      </form>\r\n      <section class=\"spacer\"></section>-->\r\n    </section>\r\n  </section>\r\n</template>\r\n\r\n<style scoped>\r\n.my-button {\r\n  width: 120px;\r\n  background-color: black;\r\n  color: white;\r\n}\r\n\r\n.my-button:hover {\r\n  background-color: white;\r\n  color: black;\r\n}\r\nselect option[disabled]:first-child {\r\n  display: none;\r\n}\r\n.my-body {\r\n  margin-top: 0px;\r\n}\r\n.spacer {\r\n  height: 200px;\r\n}\r\n.top-btn {\r\n  font-weight: bold;\r\n  width: 100px;\r\n}\r\n</style>\r\n\r\n<script>\r\n  import en from \"../assets/en.js\";\r\n  import pt from \"../assets/pt.js\";\r\n  import axios from \"axios\";\r\n  import { mapGetters, mapMutations } from \"vuex\";\r\n  import {\r\n    LOADING_SPINNER_SHOW_MUTATION,\r\n    GET_USER_TOKEN_GETTER,\r\n    GET_USER_LEVEL_GETTER,\r\n    GET_USER_ID_GETTER,\r\n  } from \"../store/storeconstants\";\r\n  export default {\r\n    name: \"submit\",\r\n    mixins: [en, pt],\r\n    data() {\r\n      const lang = localStorage.getItem(\"lang\") || \"en\";\r\n      return {\r\n        form: {\r\n          firstname: \"\",\r\n          lastname: \"\",\r\n          name: \"\",\r\n          course: \"\",\r\n          class: \"\",\r\n          email: \"\",\r\n          mobile: \"\",\r\n          bdate: \"\",\r\n          notifications: false,\r\n        },\r\n        message: {\r\n          type: \"\",\r\n          msg: \"\",\r\n        },\r\n        isShow: false,\r\n        showsection: false,\r\n        lang: lang,\r\n        item: {\r\n          image: null,\r\n          imageUrl: null,\r\n        },\r\n      };\r\n    },\r\n    computed: {\r\n      ...mapGetters(\"auth\", {\r\n        token: GET_USER_TOKEN_GETTER,\r\n        level: GET_USER_LEVEL_GETTER,\r\n        _id: GET_USER_ID_GETTER,\r\n      }),\r\n    },\r\n    mounted() {\r\n      this.getStudentInfo();\r\n    },\r\n    methods: {\r\n      ...mapMutations({\r\n        showLoader: LOADING_SPINNER_SHOW_MUTATION,\r\n      }),\r\n      async getStudentInfo() {\r\n        (this.message.type = \"\"), (this.message.msg = \"\"), this.showLoader(true);\r\n        await axios\r\n          .get(\"https://cprob-api.herokuapp.com/user/\" + this._id, {\r\n            //.get(\"http://localhost:3000/user/\" + this._id, {\r\n            headers: {\r\n              Authorization: this.token,\r\n            },\r\n          })\r\n          .then((response) => {\r\n            (this.form.firstname = response.data.body.firstname),\r\n              (this.form.lastname = response.data.body.lastname),\r\n              (this.form.name = response.data.body.name),\r\n              (this.form.course = response.data.body.course),\r\n              (this.form.class = response.data.body.class),\r\n              (this.form.bdate = response.data.body.bdate),\r\n              (this.form.email = response.data.body.email),\r\n              (this.form.mobile = response.data.body.mobile),\r\n              (this.form.notifications = response.data.body.notifications);\r\n            this.showLoader(false);\r\n          })\r\n          .catch(() => {\r\n            this.message.msg = \"Ocorreu um problema\";\r\n            this.message.type = \"warning\";\r\n            this.isShow = true;\r\n            this.showLoader(false);\r\n          });\r\n      },\r\n      async update() {\r\n        (this.message.type = \"\"), (this.message.msg = \"\"), this.showLoader(true);\r\n        let postData = {\r\n          firstname: this.form.firstname,\r\n          lastname: this.form.lastname,\r\n          name: this.form.name,\r\n          course: this.form.course,\r\n          class: this.form.class,\r\n          email: this.form.email,\r\n          mobile: parseInt(this.form.mobile),\r\n          bdate: this.form.bdate,\r\n          notifications: this.form.notifications,\r\n        };\r\n        await axios\r\n          .patch(\"https://cprob-api.herokuapp.com/user/\" + this._id, postData, {\r\n            //.patch(\"http://localhost:3000/user/\" + this._id, postData, {\r\n            headers: {\r\n              Authorization: this.token,\r\n            },\r\n          })\r\n          .then((response) => {\r\n            if (response.data.http == 200) {\r\n              this.showLoader(false);\r\n              this.message.type = \"success\";\r\n              this.message.msg = \"Alterações registadas com sucesso.\";\r\n              this.isShow = true;\r\n            } else {\r\n              this.showLoader(false);\r\n              this.message.type = \"danger\";\r\n              this.message.msg = \"Ocorreu um problema, tente de novo...\";\r\n            }\r\n          })\r\n          .catch(() => {\r\n            this.error = \"Valores inválidos!\";\r\n            this.showLoader(false);\r\n          });\r\n      },\r\n      leave() {\r\n        this.$router.replace(\"/\");\r\n      },\r\n      translate(prop) {\r\n        return this[this.lang][prop];\r\n      },\r\n      onChange(e) {\r\n        const file = e.target.files[0];\r\n        this.item.image = file; //o que deve ser enviado\r\n        this.item.imageUrl = URL.createObjectURL(file);\r\n      },\r\n    },\r\n  };\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}