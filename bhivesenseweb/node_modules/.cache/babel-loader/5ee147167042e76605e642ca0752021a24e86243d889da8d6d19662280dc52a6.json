{"ast":null,"code":"import en from '../assets/en.js';\nimport pt from '../assets/pt.js';\nimport axios from \"axios\";\nimport { mapMutations } from \"vuex\";\nimport { LOADING_SPINNER_SHOW_MUTATION } from \"../store/storeconstants\";\nexport default {\n  name: \"submit\",\n  mixins: [en, pt],\n  data() {\n    const lang = localStorage.getItem('lang') || 'en';\n    return {\n      form: {\n        firstname: \"\",\n        lastname: \"\",\n        name: \"\",\n        course: \"\",\n        class: \"\",\n        email: \"\",\n        mobile: \"\",\n        bdate: \"\",\n        auth: {\n          username: \"\",\n          password: \"\"\n        },\n        notifications: true\n      },\n      message: {\n        type: \"\",\n        msg: \"\"\n      },\n      isShow: false,\n      lang: lang\n    };\n  },\n  methods: {\n    ...mapMutations({\n      showLoader: LOADING_SPINNER_SHOW_MUTATION\n    }),\n    async send() {\n      this.message.type = \"\", this.message.msg = \"\";\n      let postData = {\n        firstname: this.form.firstname,\n        lastname: this.form.lastname,\n        name: this.form.name,\n        course: this.form.course,\n        class: this.form.class,\n        email: this.form.email,\n        mobile: parseInt(this.form.mobile),\n        accepted: false,\n        level: \"student\",\n        bdate: this.form.bdate,\n        auth: {\n          username: this.form.auth.username,\n          password: this.form.auth.password\n        },\n        notifications: this.form.notifications\n      };\n      if (this.checkForm() == true) {\n        this.showLoader(true);\n        await axios\n        //.post(\"https://cprob-api.herokuapp.com/user\", postData)\n        .post(\"http://localhost:3000/user\", postData).then(response => {\n          if (response.data.http == 201) {\n            this.showLoader(false);\n            this.message.type = \"success\";\n            this.message.msg = \"Utilizador criado com sucesso. A sua inscrição fica pendente de aprovação.\";\n            this.isShow = true;\n          } else if (response.data.http == 200) {\n            this.showLoader(false);\n            this.message.type = \"warning\";\n            this.message.msg = \"Utilizador existente.\";\n            this.isShow = true;\n          } else {\n            this.showLoader(false);\n            this.message.type = \"danger\";\n            this.message.msg = \"Ocorreu um problema, tente de novo...\";\n            this.isShow = true;\n          }\n        }).catch(() => {\n          this.error = \"Valores inválidos!\";\n          this.showLoader(false);\n        });\n      } else {\n        this.message.type = \"danger\";\n        this.message.msg = \"Todos os campos deve estar preenchidos!\";\n        this.isShow = true;\n      }\n    },\n    cleanForm() {\n      this.form.firstname = \"\", this.form.lastname = \"\", this.form.name = \"\", this.form.course = \"\", this.form.class = \"\", this.form.email = \"\", this.form.mobile = \"\", this.form.bdate = \"\", this.form.auth = {\n        username: \"\",\n        password: \"\"\n      }, this.form.notifications = true;\n      this.isShow = false;\n    },\n    back() {\n      this.$router.replace(\"/\");\n    },\n    checkForm() {\n      if (this.form.firstname != \"\" && this.form.lastname != \"\" && this.form.name != \"\" && this.form.course != \"\" && this.form.class != \"\" && this.form.email != \"\" && this.form.mobile != \"\" && this.form.bdate != \"\" && this.form.auth.username != \"\" && this.form.auth.password != \"\") return true;else return false;\n    },\n    translate(prop) {\n      return this[this.lang][prop];\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["en","pt","axios","mapMutations","LOADING_SPINNER_SHOW_MUTATION","name","mixins","data","lang","localStorage","getItem","form","firstname","lastname","course","class","email","mobile","bdate","auth","username","password","notifications","message","type","msg","isShow","methods","showLoader","send","postData","parseInt","accepted","level","checkForm","post","then","response","http","catch","error","cleanForm","back","$router","replace","translate","prop"],"sourceRoot":"","sources":["C:\\Users\\duart\\OneDrive - PGA\\Ambiente de Trabalho\\bhivesenseweb\\bhivesenseweb\\src\\views\\Enrollment.vue"],"sourcesContent":["/*\r\nMEIW - Programação Web Avançada - projeto final\r\nAuhtor: Duarte Cota\r\nDescription: implementation of the view Ficha de Inscrição\r\n*/\r\n\r\n<template>\r\n  <section class=\"scrolling-component\" ref=\"scrollcomponent\" name=\"lang\">\r\n    <section class=\"container my-body\">\r\n      <h1 class=\"text-center mt-5\">{{translate(\"newAccFormTitle\")}}</h1>\r\n      <section v-if=isShow\r\n        class=\"alert mt-3\"\r\n        role=\"alert\"\r\n        v-bind:class=\"'alert-' + message.type\"\r\n      >\r\n        {{ message.msg }}\r\n      </section>\r\n      <form class=\"form-signin\" v-on:submit.prevent=\"send\">\r\n        <section class=\"row mt-4\">\r\n          <section class=\"col-md-2 g-4\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.firstname\"\r\n              class=\"form-control\"\r\n              id=\"firstname\"\r\n              placeholder=\"primeiro nome...\"\r\n              style=\"font-size: small\"\r\n            />\r\n          </section>\r\n          <section class=\"col-md-2 g-4\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.lastname\"\r\n              class=\"form-control\"\r\n              id=\"lastname\"\r\n              placeholder=\"último nome...\"\r\n              style=\"font-size: small\"\r\n            />\r\n          </section>\r\n          <section class=\"col-md-8 g-4\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.name\"\r\n              class=\"form-control\"\r\n              id=\"name\"\r\n              placeholder=\"nome completo...\"\r\n              style=\"font-size: small\"\r\n            />\r\n          </section>\r\n        </section>\r\n        <section class=\"row\">\r\n          <section class=\"col-md-4 g-4\">\r\n            <!--\r\n              <input\r\n              type=\"select\"\r\n              v-model=\"form.course\"\r\n              class=\"form-control\"\r\n              id=\"course\"\r\n              placeholder=\"curso...\"\r\n              style=\"font-size: small\"\r\n            />\r\n            -->\r\n            <select name=\"\" id=\"\"></select>\r\n          </section>\r\n          <section class=\"col-md-4 g-4\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.course\"\r\n              class=\"form-control\"\r\n              id=\"course\"\r\n              placeholder=\"curso...\"\r\n              style=\"font-size: small\"\r\n            />\r\n          </section>\r\n          <section class=\"col-md-4 g-4\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.class\"\r\n              class=\"form-control\"\r\n              id=\"class\"\r\n              placeholder=\"turma...\"\r\n              style=\"font-size: small\"\r\n            />\r\n          </section>\r\n        </section>\r\n        <section class=\"row\">\r\n          <section class=\"col-md-4 g-4\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.email\"\r\n              class=\"form-control\"\r\n              id=\"email\"\r\n              placeholder=\"email...\"\r\n              style=\"font-size: small\"\r\n            />\r\n          </section>\r\n          <section class=\"col-md-4 g-4\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.mobile\"\r\n              class=\"form-control\"\r\n              id=\"mobile\"\r\n              placeholder=\"telemóvel...\"\r\n              style=\"font-size: small\"\r\n            />\r\n          </section>\r\n          <section class=\"col-md-4 g-4\">\r\n            <input\r\n              placeholder=\"Data de nascimento\"\r\n              class=\"form-control textbox-n\"\r\n              type=\"text\"\r\n              v-model=\"form.bdate\"\r\n              onfocus=\"(this.type = 'date')\"\r\n              id=\"bdate\"\r\n              style=\"font-size: small\"\r\n            />\r\n          </section>\r\n        </section>\r\n        <section class=\"row\">\r\n          <section class=\"col-md-4 g-4\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.auth.username\"\r\n              class=\"form-control\"\r\n              id=\"username\"\r\n              placeholder=\"username...\"\r\n              style=\"font-size: small\"\r\n            />\r\n          </section>\r\n          <section class=\"col-md-4 g-4\">\r\n            <input\r\n              type=\"password\"\r\n              v-model=\"form.auth.password\"\r\n              class=\"form-control\"\r\n              id=\"password\"\r\n              placeholder=\"password...\"\r\n              style=\"font-size: small\"\r\n            />\r\n          </section>\r\n        </section>\r\n        <section class=\"row mt-4\">\r\n          <section>\r\n            <section class=\"form-check\">\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"checkbox\"\r\n                v-model=\"form.notifications\"\r\n                value=\"\"\r\n                id=\"subscribenews\"\r\n                checked\r\n              />\r\n              <label class=\"form-check-label\" for=\"subscribenews\">\r\n                Subscrever notificações?</label\r\n              >\r\n            </section>\r\n          </section>\r\n        </section>\r\n        <section class=\"text-center\">\r\n          <button\r\n            type=\"submit\"\r\n            class=\"btn btn-outline-primary mt-4 me-4 my-button\"\r\n          >\r\n            SUBMETER\r\n          </button>\r\n          <button\r\n            @click=\"cleanForm()\"\r\n            type=\"button\"\r\n            class=\"btn btn-outline-primary mt-4 me-4 my-button\"\r\n          >\r\n            LIMPAR\r\n          </button>\r\n          <button\r\n            @click=\"back()\"\r\n            type=\"button\"\r\n            class=\"btn btn-outline-primary mt-4 my-button\"\r\n          >\r\n            VOLTAR\r\n          </button>\r\n        </section>\r\n      </form>\r\n\r\n      <section class=\"spacer\"></section>\r\n    </section>\r\n  </section>\r\n</template>\r\n\r\n<style scoped>\r\n.my-button {\r\n  width: 120px;\r\n}\r\nselect option[disabled]:first-child {\r\n  display: none;\r\n}\r\n.my-body {\r\n  margin-top: 0px;\r\n}\r\n.spacer {\r\n  height: 200px;\r\n}\r\n.top-btn {\r\n  font-weight: bold;\r\n  width: 100px;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport en from '../assets/en.js'\r\nimport pt from '../assets/pt.js'\r\nimport axios from \"axios\";\r\nimport { mapMutations } from \"vuex\";\r\nimport { LOADING_SPINNER_SHOW_MUTATION } from \"../store/storeconstants\";\r\nexport default {\r\n  name: \"submit\",\r\n  mixins: [en,pt],\r\n  data() {\r\n    const lang = localStorage.getItem('lang')||'en';\r\n    return {\r\n      form: {\r\n        firstname: \"\",\r\n        lastname: \"\",\r\n        name: \"\",\r\n        course: \"\",\r\n        class: \"\",\r\n        email: \"\",\r\n        mobile: \"\",\r\n        bdate: \"\",\r\n        auth: {\r\n          username: \"\",\r\n          password: \"\",\r\n        },\r\n        notifications: true,\r\n      },\r\n      message: {\r\n        type: \"\",\r\n        msg: \"\",\r\n      },\r\n      isShow:false,\r\n      lang: lang\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      showLoader: LOADING_SPINNER_SHOW_MUTATION,\r\n    }),\r\n    async send() {\r\n      (this.message.type = \"\"), (this.message.msg = \"\");\r\n      let postData = {\r\n        firstname: this.form.firstname,\r\n        lastname: this.form.lastname,\r\n        name: this.form.name,\r\n        course: this.form.course,\r\n        class: this.form.class,\r\n        email: this.form.email,\r\n        mobile: parseInt(this.form.mobile),\r\n        accepted: false,\r\n        level: \"student\",\r\n        bdate: this.form.bdate,\r\n        auth: {\r\n          username: this.form.auth.username,\r\n          password: this.form.auth.password,\r\n        },\r\n        notifications: this.form.notifications,\r\n      };\r\n      if (this.checkForm() == true) {\r\n        this.showLoader(true);\r\n        await axios\r\n          //.post(\"https://cprob-api.herokuapp.com/user\", postData)\r\n          .post(\"http://localhost:3000/user\", postData)\r\n          .then((response) => {\r\n            if (response.data.http == 201) {\r\n              this.showLoader(false);\r\n              this.message.type = \"success\";\r\n              this.message.msg = \"Utilizador criado com sucesso. A sua inscrição fica pendente de aprovação.\";\r\n              this.isShow=true\r\n            } else if (response.data.http == 200) {\r\n              this.showLoader(false);\r\n              this.message.type = \"warning\";\r\n              this.message.msg = \"Utilizador existente.\";\r\n              this.isShow=true\r\n            } else {\r\n              this.showLoader(false);\r\n              this.message.type = \"danger\";\r\n              this.message.msg = \"Ocorreu um problema, tente de novo...\";\r\n              this.isShow=true\r\n            }\r\n          })\r\n          .catch(() => {\r\n            this.error = \"Valores inválidos!\";\r\n            this.showLoader(false);\r\n          });\r\n      } else {\r\n        this.message.type = \"danger\";\r\n        this.message.msg = \"Todos os campos deve estar preenchidos!\";\r\n        this.isShow=true\r\n      }\r\n    },\r\n    cleanForm() {\r\n      (this.form.firstname = \"\"),\r\n        (this.form.lastname = \"\"),\r\n        (this.form.name = \"\"),\r\n        (this.form.course = \"\"),\r\n        (this.form.class = \"\"),\r\n        (this.form.email = \"\"),\r\n        (this.form.mobile = \"\"),\r\n        (this.form.bdate = \"\"),\r\n        (this.form.auth = {\r\n          username: \"\",\r\n          password: \"\",\r\n        }),\r\n        (this.form.notifications = true)\r\n        this.isShow=false\r\n    },\r\n    back() {\r\n      this.$router.replace(\"/\");\r\n    },\r\n    checkForm() {\r\n      if (\r\n        this.form.firstname != \"\" &&\r\n        this.form.lastname != \"\" &&\r\n        this.form.name != \"\" &&\r\n        this.form.course != \"\" &&\r\n        this.form.class != \"\" &&\r\n        this.form.email != \"\" &&\r\n        this.form.mobile != \"\" &&\r\n        this.form.bdate != \"\" &&\r\n        this.form.auth.username != \"\" &&\r\n        this.form.auth.password != \"\"\r\n      )\r\n        return true;\r\n      else return false;\r\n    },\r\n    translate(prop) {\r\n      return this[this.lang][prop]\r\n    }\r\n  },\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}