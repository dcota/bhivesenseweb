{"ast":null,"code":"import axios from \"axios\";\nimport { mapMutations } from \"vuex\";\nimport { LOADING_SPINNER_SHOW_MUTATION } from \"../store/storeconstants\";\nexport default {\n  name: \"submit\",\n  data() {\n    return {\n      form: {\n        title: \"\",\n        summary: \"\",\n        text: \"\",\n        notifEmail: true,\n        notifPage: false\n      },\n      message: {\n        type: \"\",\n        msg: \"\"\n      },\n      isShow: false\n    };\n  },\n  methods: {\n    ...mapMutations({\n      showLoader: LOADING_SPINNER_SHOW_MUTATION\n    }),\n    async createNotif() {\n      this.isShow = false;\n      this.message.type = \"\";\n      this.message.msg = \"\";\n      if (this.checkForm() == true) {\n        this.message.type = \"\";\n        this.message.msg = \"\";\n        if (!this.checkTitleLength() || !this.checkSummaryLength() || !this.checkTextLength()) {\n          this.message.type = \"\";\n          this.message.msg = \"\";\n          this.message.type = \"warning\", this.message.msg = \"Número de caracteres inválido\";\n          this.isShow = true;\n          return;\n        }\n        this.showLoader(true);\n        let postData = {\n          title: this.form.title,\n          summary: this.form.summary,\n          text: this.form.text,\n          notifEmail: this.form.notifEmail,\n          notifPage: this.form.notifPage\n        };\n        await axios.post(\"https://cprob-api.herokuapp.com/notification\", postData)\n        //.post(\"http://localhost:3000/notification\", postData)\n        .then(response => {\n          if (response.data.http == 201) {\n            this.showLoader(false);\n            this.message.type = \"success\";\n            this.message.msg = \"Notificação criada com sucesso.\";\n            this.isShow = true;\n          } else if (response.data.http == 200) {\n            this.showLoader(false);\n            this.message.type = \"warning\";\n            this.message.msg = \"Notificação existente.\";\n            this.isShow = true;\n          } else {\n            this.showLoader(false);\n            this.message.type = \"danger\";\n            this.message.msg = \"Ocorreu um problema, tente de novo...\";\n            this.isShow = true;\n          }\n        }).catch(() => {\n          this.error = \"Valores inválidos!\";\n          this.showLoader(false);\n        });\n      } else {\n        this.isShow = true;\n        this.message.type = \"danger\";\n        this.message.msg = \"Todos os campos deve estar preenchidos!\";\n      }\n    },\n    cleanForm() {\n      this.form.title = \"\", this.form.summary = \"\", this.form.text = \"\", this.form.notifEmail = true, this.form.notifPage = false;\n      this.isShow = false;\n    },\n    leave() {\n      this.$router.replace(\"/Admin\");\n    },\n    checkForm() {\n      if (this.form.title != \"\" && this.form.summary != \"\" && this.form.text != \"\") return true;else return false;\n    },\n    checkTitleLength() {\n      if (this.form.title.length <= 26) return true;else return false;\n    },\n    checkSummaryLength() {\n      if (this.form.summary.length <= 55) return true;else return false;\n    },\n    checkTextLength() {\n      if (this.form.text.length <= 180) return true;else return false;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","mapMutations","LOADING_SPINNER_SHOW_MUTATION","name","data","form","title","summary","text","notifEmail","notifPage","message","type","msg","isShow","methods","showLoader","createNotif","checkForm","checkTitleLength","checkSummaryLength","checkTextLength","postData","post","then","response","http","catch","error","cleanForm","leave","$router","replace","length"],"sourceRoot":"","sources":["C:\\Users\\duart\\Desktop\\bhivesenseweb\\bhivesenseweb\\src\\views\\Notif.vue"],"sourcesContent":["/*\r\nMEIW - Programação Web Avançada - projeto final\r\nAuhtor: Duarte Cota\r\nDescription: implementation of the Criar Notificação\r\n*/\r\n\r\n<template>\r\n  <section class=\"scrolling-component\" ref=\"scrollcomponent\">\r\n    <section class=\"container my-body\">\r\n      <h1 class=\"text-center mt-5\">CRIAR NOTIFICAÇÃO/AVISO</h1>\r\n      <section\r\n        v-if=\"isShow\"\r\n        role=\"alert\"\r\n        v-bind:class=\"'mt-3 alert alert-' + message.type\"\r\n      >\r\n        {{ message.msg }}\r\n      </section>\r\n      <form class=\"form-signin\" v-on:submit.prevent=\"createNotif\">\r\n        <section class=\"row mt-5\">\r\n          <section class=\"col-md-6\">\r\n            <label for=\"title\" class=\"form-label\"\r\n              >Título (max. 26 caracteres)- total de caracteres:\r\n              {{ form.title.length }}</label\r\n            >\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"form.title\"\r\n              class=\"form-control\"\r\n              id=\"title\"\r\n              placeholder=\"título...\"\r\n            />\r\n          </section>\r\n        </section>\r\n        <section class=\"row mt-4\">\r\n          <section class=\"col-md-12\">\r\n            <label for=\"title\" class=\"form-label\"\r\n              >Resumo (max. 55 caracteres)- total de caracteres:\r\n              {{ form.summary.length }}</label\r\n            >\r\n            <textarea\r\n              v-model=\"form.summary\"\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"title\"\r\n              rows=\"5\"\r\n            ></textarea>\r\n          </section>\r\n        </section>\r\n        <section class=\"row mt-4\">\r\n          <section class=\"col-md-12\">\r\n            <label for=\"text\" class=\"form-label\"\r\n              >Texto (max. 180 caracteres) - total de caracteres:\r\n              {{ form.text.length }}</label\r\n            >\r\n            <textarea\r\n              v-model=\"form.text\"\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"text\"\r\n              rows=\"5\"\r\n            ></textarea>\r\n          </section>\r\n        </section>\r\n        <section class=\"row mt-4\">\r\n          <section>\r\n            <section class=\"form-check\">\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"checkbox\"\r\n                v-model=\"form.notifEmail\"\r\n                value=\"\"\r\n                id=\"notifEmail\"\r\n                checked\r\n              />\r\n              <label class=\"form-check-label\" for=\"subscribe_news\">\r\n                Enviar notificação por email</label\r\n              >\r\n            </section>\r\n            <section class=\"form-check mt-2\">\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"checkbox\"\r\n                v-model=\"form.notifPage\"\r\n                value=\"\"\r\n                id=\"notifPage\"\r\n              />\r\n              <label class=\"form-check-label\" for=\"subscribe_news\">\r\n                Publicar na página Avisos</label\r\n              >\r\n            </section>\r\n          </section>\r\n        </section>\r\n      </form>\r\n      <section class=\"text-center\">\r\n        <button\r\n          type=\"submit\"\r\n          v-on:click=\"createNotif\"\r\n          class=\"btn btn-outline-primary mt-4 me-4 my-button\"\r\n        >\r\n          CRIAR\r\n        </button>\r\n        <button\r\n          v-on:click=\"cleanForm\"\r\n          type=\"button\"\r\n          class=\"btn btn-outline-primary mt-4 me-4 my-button\"\r\n        >\r\n          LIMPAR\r\n        </button>\r\n        <button\r\n          @click=\"leave()\"\r\n          type=\"button\"\r\n          class=\"btn btn-outline-primary mt-4 my-button\"\r\n        >\r\n          SAIR\r\n        </button>\r\n      </section>\r\n      <section class=\"spacer\"></section>\r\n    </section>\r\n  </section>\r\n</template>\r\n\r\n<style scoped>\r\n.my-button {\r\n  width: 120px;\r\n}\r\nselect option[disabled]:first-child {\r\n  display: none;\r\n}\r\n.my-body {\r\n  margin-top: 0px;\r\n}\r\n.spacer {\r\n  height: 200px;\r\n}\r\n.top-btn {\r\n  font-weight: bold;\r\n  width: 100px;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapMutations } from \"vuex\";\r\nimport { LOADING_SPINNER_SHOW_MUTATION } from \"../store/storeconstants\";\r\nexport default {\r\n  name: \"submit\",\r\n  data() {\r\n    return {\r\n      form: {\r\n        title: \"\",\r\n        summary: \"\",\r\n        text: \"\",\r\n        notifEmail: true,\r\n        notifPage: false,\r\n      },\r\n      message: {\r\n        type: \"\",\r\n        msg: \"\",\r\n      },\r\n      isShow: false,\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      showLoader: LOADING_SPINNER_SHOW_MUTATION,\r\n    }),\r\n    async createNotif() {\r\n      this.isShow = false;\r\n      this.message.type = \"\";\r\n      this.message.msg = \"\";\r\n      if (this.checkForm() == true) {\r\n        this.message.type = \"\";\r\n        this.message.msg = \"\";\r\n        if (\r\n          !this.checkTitleLength() ||\r\n          !this.checkSummaryLength() ||\r\n          !this.checkTextLength()\r\n        ) {\r\n          this.message.type = \"\";\r\n          this.message.msg = \"\";\r\n          (this.message.type = \"warning\"),\r\n            (this.message.msg = \"Número de caracteres inválido\");\r\n          this.isShow = true;\r\n          return;\r\n        }\r\n        this.showLoader(true);\r\n        let postData = {\r\n          title: this.form.title,\r\n          summary: this.form.summary,\r\n          text: this.form.text,\r\n          notifEmail: this.form.notifEmail,\r\n          notifPage: this.form.notifPage,\r\n        };\r\n        await axios\r\n          .post(\"https://cprob-api.herokuapp.com/notification\", postData)\r\n          //.post(\"http://localhost:3000/notification\", postData)\r\n          .then((response) => {\r\n            if (response.data.http == 201) {\r\n              this.showLoader(false);\r\n              this.message.type = \"success\";\r\n              this.message.msg = \"Notificação criada com sucesso.\";\r\n              this.isShow = true;\r\n            } else if (response.data.http == 200) {\r\n              this.showLoader(false);\r\n              this.message.type = \"warning\";\r\n              this.message.msg = \"Notificação existente.\";\r\n              this.isShow = true;\r\n            } else {\r\n              this.showLoader(false);\r\n              this.message.type = \"danger\";\r\n              this.message.msg = \"Ocorreu um problema, tente de novo...\";\r\n              this.isShow = true;\r\n            }\r\n          })\r\n          .catch(() => {\r\n            this.error = \"Valores inválidos!\";\r\n            this.showLoader(false);\r\n          });\r\n      } else {\r\n        this.isShow = true;\r\n        this.message.type = \"danger\";\r\n        this.message.msg = \"Todos os campos deve estar preenchidos!\";\r\n      }\r\n    },\r\n    cleanForm() {\r\n      (this.form.title = \"\"),\r\n        (this.form.summary = \"\"),\r\n        (this.form.text = \"\"),\r\n        (this.form.notifEmail = true),\r\n        (this.form.notifPage = false);\r\n      this.isShow = false;\r\n    },\r\n    leave() {\r\n      this.$router.replace(\"/Admin\");\r\n    },\r\n    checkForm() {\r\n      if (\r\n        this.form.title != \"\" &&\r\n        this.form.summary != \"\" &&\r\n        this.form.text != \"\"\r\n      )\r\n        return true;\r\n      else return false;\r\n    },\r\n    checkTitleLength() {\r\n      if (this.form.title.length <= 26) return true;\r\n      else return false;\r\n    },\r\n    checkSummaryLength() {\r\n      if (this.form.summary.length <= 55) return true;\r\n      else return false;\r\n    },\r\n    checkTextLength() {\r\n      if (this.form.text.length <= 180) return true;\r\n      else return false;\r\n    },\r\n  },\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}