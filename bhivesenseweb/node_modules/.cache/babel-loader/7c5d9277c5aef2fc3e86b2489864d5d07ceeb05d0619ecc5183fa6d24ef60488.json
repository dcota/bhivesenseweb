{"ast":null,"code":"import en from \"../assets/en.js\";\nimport pt from \"../assets/pt.js\";\nimport axios from \"axios\";\nimport { notify } from \"@kyvg/vue3-notification\";\nimport { mapGetters } from \"vuex\";\nimport { GET_USER_TOKEN_GETTER, GET_USER_LEVEL_GETTER, GET_USER_ID_GETTER } from \"../store/storeconstants\";\nexport default {\n  name: \"new intervention\",\n  mixins: [en, pt],\n  data() {\n    const date = new Date();\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const day = date.getDay();\n    const lang = localStorage.getItem(\"lang\") || \"en\";\n    return {\n      range: {\n        start: new Date(),\n        end: new Date()\n      },\n      form: {\n        description: \"\",\n        observations: \"\",\n        type: \"\",\n        notifications: true\n      },\n      isShow: false,\n      lang: lang\n    };\n  },\n  computed: {\n    ...mapGetters(\"auth\", {\n      token: GET_USER_TOKEN_GETTER,\n      level: GET_USER_LEVEL_GETTER,\n      _id: GET_USER_ID_GETTER\n    })\n  },\n  methods: {\n    padTo2Digits(num) {\n      return String(num).padStart(2, \"0\");\n    },\n    send1() {\n      //format start date\n      let sd = new Date(this.range.start.getFullYear() + \"-\" + (parseInt(this.range.start.getMonth()) + 1) + \"-\" + this.range.start.getDate());\n      let startDate = sd.toLocaleDateString(\"sv-SE\", {\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\"\n      });\n      console.log(startDate);\n      //format end date\n      let ed = new Date(this.range.end.getFullYear() + \"-\" + (parseInt(this.range.end.getMonth()) + 1) + \"-\" + this.range.end.getDate());\n      let endDate = ed.toLocaleDateString(\"sv-SE\", {\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\"\n      });\n      console.log(endDate);\n      //format start time\n      const startTime = this.padTo2Digits(this.range.start.getHours()) + \":\" + this.padTo2Digits(this.range.start.getMinutes());\n      console.log(startTime);\n      //format end time\n      const endTime = this.padTo2Digits(this.range.end.getHours()) + \":\" + this.padTo2Digits(this.range.end.getMinutes());\n      console.log(endTime);\n    },\n    async send() {\n      this.isShow = true;\n      if (this.checkForm() == true) {\n        //format start date\n        let sd = new Date(this.range.start.getFullYear() + \"-\" + (parseInt(this.range.start.getMonth()) + 1) + \"-\" + this.range.start.getDate());\n        let startDate = sd.toLocaleDateString(\"sv-SE\", {\n          year: \"numeric\",\n          month: \"2-digit\",\n          day: \"2-digit\"\n        });\n        console.log(startDate);\n        //format end date\n        let ed = new Date(this.range.end.getFullYear() + \"-\" + (parseInt(this.range.end.getMonth()) + 1) + \"-\" + this.range.end.getDate());\n        let endDate = ed.toLocaleDateString(\"sv-SE\", {\n          year: \"numeric\",\n          month: \"2-digit\",\n          day: \"2-digit\"\n        });\n        console.log(endDate);\n        //format start time\n        let startTime = this.padTo2Digits(this.range.start.getHours()) + \":\" + this.padTo2Digits(this.range.start.getMinutes());\n        console.log(startTime);\n        //format end time\n        let endTime = this.padTo2Digits(this.range.end.getHours()) + \":\" + this.padTo2Digits(this.range.end.getMinutes());\n        console.log(endTime);\n        let postData = {\n          apiary: localStorage.getItem(\"idtointerventions\"),\n          startDate: startDate,\n          endDate: endDate,\n          startTime: startTime,\n          endTime: endTime,\n          type: this.form.type,\n          description: this.form.description,\n          observations: this.form.observations,\n          notifications: this.form.notifications\n        };\n        await axios.post(\"https://bhsapi.duartecota.com/intervention\", postData, {\n          headers: {\n            Authorization: this.token\n          }\n        }).then(response => {\n          if (response.data.http == 201) {\n            this.isShow = false;\n            notify({\n              title: this.translate(\"notifSuccessTitle\"),\n              text: this.translate(\"mesNewInterventionSuccess\"),\n              type: \"success\",\n              duration: 3000,\n              speed: 500\n            });\n            this.$router.replace(\"apiaries\");\n          } else {\n            this.isShow = false;\n            notify({\n              title: this.translate(\"notifErrorTitle\"),\n              text: this.translate(\"mesProblem\"),\n              type: \"error\",\n              duration: 3000,\n              speed: 500\n            });\n          }\n        }).catch(error => {\n          this.isShow = false;\n          notify({\n            title: this.translate(\"notifErrorTitle\"),\n            text: this.translate(\"mesProblem\"),\n            type: \"error\",\n            duration: 3000,\n            speed: 500\n          });\n        });\n      } else {\n        notify({\n          title: this.translate(\"notifErrorTitle\"),\n          text: this.translate(\"mesFieldsIntervention\"),\n          type: \"error\",\n          duration: 3000,\n          speed: 500\n        });\n      }\n      //postData.append(\"lang\", this.lang); //enviar se necessário para e-mail\n    },\n\n    cleanForm() {\n      this.form.description = \"\", this.form.observations = \"\", this.form.type = \"\";\n      this.form.notifications = true, this.range.start = new Date(), this.range.end = new Date(), this.isShow = false;\n    },\n    back() {\n      this.$router.replace(\"interventions\");\n    },\n    checkForm() {\n      this.isShow = false;\n      if (this.form.description == \"\" || this.form.type == \"\") {\n        return false;\n      } else {\n        return true;\n      }\n    },\n    translate(prop) {\n      return this[this.lang][prop];\n    },\n    dayClicked(day) {\n      alert(this.range.start + \";\" + this.range.end);\n    }\n  }\n};","map":{"version":3,"mappings":"AAmKC,OAAOA,EAAC,MAAO,iBAAiB;AAChC,OAAOC,EAAC,MAAO,iBAAiB;AAChC,OAAOC,KAAI,MAAO,OAAO;AACzB,SAASC,MAAK,QAAS,yBAAyB;AAChD,SAASC,UAAS,QAAS,MAAM;AACjC,SACCC,qBAAqB,EACrBC,qBAAqB,EACrBC,kBAAkB,QACZ,yBAAyB;AAChC,eAAe;EACdC,IAAI,EAAE,kBAAkB;EACxBC,MAAM,EAAE,CAACT,EAAE,EAAEC,EAAE,CAAC;EAChBS,IAAI,GAAG;IACN,MAAMC,IAAG,GAAI,IAAIC,IAAI,EAAE;IACvB,MAAMC,IAAG,GAAIF,IAAI,CAACG,WAAW,EAAE;IAC/B,MAAMC,KAAI,GAAIJ,IAAI,CAACK,QAAQ,EAAE;IAC7B,MAAMC,GAAE,GAAIN,IAAI,CAACO,MAAM,EAAE;IACzB,MAAMC,IAAG,GAAIC,YAAY,CAACC,OAAO,CAAC,MAAM,KAAK,IAAI;IACjD,OAAO;MACNC,KAAK,EAAE;QACNC,KAAK,EAAE,IAAIX,IAAI,EAAE;QACjBY,GAAG,EAAE,IAAIZ,IAAI;MACd,CAAC;MACDa,IAAI,EAAE;QACLC,WAAW,EAAE,EAAE;QACfC,YAAY,EAAE,EAAE;QAChBC,IAAI,EAAE,EAAE;QACRC,aAAa,EAAE;MAChB,CAAC;MACDC,MAAM,EAAE,KAAK;MACbX,IAAI,EAAEA;IACP,CAAC;EACF,CAAC;EACDY,QAAQ,EAAE;IACT,GAAG3B,UAAU,CAAC,MAAM,EAAE;MACrB4B,KAAK,EAAE3B,qBAAqB;MAC5B4B,KAAK,EAAE3B,qBAAqB;MAC5B4B,GAAG,EAAE3B;IACN,CAAC;EACF,CAAC;EACD4B,OAAO,EAAE;IACRC,YAAY,CAACC,GAAG,EAAE;MACjB,OAAOC,MAAM,CAACD,GAAG,CAAC,CAACE,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;IACpC,CAAC;IACDC,KAAK,GAAG;MACP;MACA,IAAIC,EAAC,GAAI,IAAI7B,IAAI,CAChB,IAAI,CAACU,KAAK,CAACC,KAAK,CAACT,WAAW,EAAC,GAC5B,GAAE,IACD4B,QAAQ,CAAC,IAAI,CAACpB,KAAK,CAACC,KAAK,CAACP,QAAQ,EAAE,IAAI,CAAC,IAC1C,GAAE,GACF,IAAI,CAACM,KAAK,CAACC,KAAK,CAACoB,OAAO,EAAC,CAC1B;MACD,IAAIC,SAAQ,GAAIH,EAAE,CAACI,kBAAkB,CAAC,OAAO,EAAE;QAC9ChC,IAAI,EAAE,SAAS;QACfE,KAAK,EAAE,SAAS;QAChBE,GAAG,EAAE;MACN,CAAC,CAAC;MACF6B,OAAO,CAACC,GAAG,CAACH,SAAS,CAAC;MACtB;MACA,IAAII,EAAC,GAAI,IAAIpC,IAAI,CAChB,IAAI,CAACU,KAAK,CAACE,GAAG,CAACV,WAAW,EAAC,GAC1B,GAAE,IACD4B,QAAQ,CAAC,IAAI,CAACpB,KAAK,CAACE,GAAG,CAACR,QAAQ,EAAE,IAAI,CAAC,IACxC,GAAE,GACF,IAAI,CAACM,KAAK,CAACE,GAAG,CAACmB,OAAO,EAAC,CACxB;MACD,IAAIM,OAAM,GAAID,EAAE,CAACH,kBAAkB,CAAC,OAAO,EAAE;QAC5ChC,IAAI,EAAE,SAAS;QACfE,KAAK,EAAE,SAAS;QAChBE,GAAG,EAAE;MACN,CAAC,CAAC;MACF6B,OAAO,CAACC,GAAG,CAACE,OAAO,CAAC;MACpB;MACA,MAAMC,SAAQ,GACb,IAAI,CAACd,YAAY,CAAC,IAAI,CAACd,KAAK,CAACC,KAAK,CAAC4B,QAAQ,EAAE,IAC7C,GAAE,GACF,IAAI,CAACf,YAAY,CAAC,IAAI,CAACd,KAAK,CAACC,KAAK,CAAC6B,UAAU,EAAE,CAAC;MACjDN,OAAO,CAACC,GAAG,CAACG,SAAS,CAAC;MACtB;MACA,MAAMG,OAAM,GACX,IAAI,CAACjB,YAAY,CAAC,IAAI,CAACd,KAAK,CAACE,GAAG,CAAC2B,QAAQ,EAAE,IAC3C,GAAE,GACF,IAAI,CAACf,YAAY,CAAC,IAAI,CAACd,KAAK,CAACE,GAAG,CAAC4B,UAAU,EAAE,CAAC;MAC/CN,OAAO,CAACC,GAAG,CAACM,OAAO,CAAC;IACrB,CAAC;IACD,MAAMC,IAAI,GAAG;MACZ,IAAI,CAACxB,MAAK,GAAI,IAAI;MAClB,IAAI,IAAI,CAACyB,SAAS,EAAC,IAAK,IAAI,EAAE;QAC7B;QACA,IAAId,EAAC,GAAI,IAAI7B,IAAI,CAChB,IAAI,CAACU,KAAK,CAACC,KAAK,CAACT,WAAW,EAAC,GAC5B,GAAE,IACD4B,QAAQ,CAAC,IAAI,CAACpB,KAAK,CAACC,KAAK,CAACP,QAAQ,EAAE,IAAI,CAAC,IAC1C,GAAE,GACF,IAAI,CAACM,KAAK,CAACC,KAAK,CAACoB,OAAO,EAAC,CAC1B;QACD,IAAIC,SAAQ,GAAIH,EAAE,CAACI,kBAAkB,CAAC,OAAO,EAAE;UAC9ChC,IAAI,EAAE,SAAS;UACfE,KAAK,EAAE,SAAS;UAChBE,GAAG,EAAE;QACN,CAAC,CAAC;QACF6B,OAAO,CAACC,GAAG,CAACH,SAAS,CAAC;QACtB;QACA,IAAII,EAAC,GAAI,IAAIpC,IAAI,CAChB,IAAI,CAACU,KAAK,CAACE,GAAG,CAACV,WAAW,EAAC,GAC1B,GAAE,IACD4B,QAAQ,CAAC,IAAI,CAACpB,KAAK,CAACE,GAAG,CAACR,QAAQ,EAAE,IAAI,CAAC,IACxC,GAAE,GACF,IAAI,CAACM,KAAK,CAACE,GAAG,CAACmB,OAAO,EAAC,CACxB;QACD,IAAIM,OAAM,GAAID,EAAE,CAACH,kBAAkB,CAAC,OAAO,EAAE;UAC5ChC,IAAI,EAAE,SAAS;UACfE,KAAK,EAAE,SAAS;UAChBE,GAAG,EAAE;QACN,CAAC,CAAC;QACF6B,OAAO,CAACC,GAAG,CAACE,OAAO,CAAC;QACpB;QACA,IAAIC,SAAQ,GACX,IAAI,CAACd,YAAY,CAAC,IAAI,CAACd,KAAK,CAACC,KAAK,CAAC4B,QAAQ,EAAE,IAC7C,GAAE,GACF,IAAI,CAACf,YAAY,CAAC,IAAI,CAACd,KAAK,CAACC,KAAK,CAAC6B,UAAU,EAAE,CAAC;QACjDN,OAAO,CAACC,GAAG,CAACG,SAAS,CAAC;QACtB;QACA,IAAIG,OAAM,GACT,IAAI,CAACjB,YAAY,CAAC,IAAI,CAACd,KAAK,CAACE,GAAG,CAAC2B,QAAQ,EAAE,IAC3C,GAAE,GACF,IAAI,CAACf,YAAY,CAAC,IAAI,CAACd,KAAK,CAACE,GAAG,CAAC4B,UAAU,EAAE,CAAC;QAC/CN,OAAO,CAACC,GAAG,CAACM,OAAO,CAAC;QACpB,IAAIG,QAAO,GAAI;UACdC,MAAM,EAAErC,YAAY,CAACC,OAAO,CAAC,mBAAmB,CAAC;UACjDuB,SAAS,EAAEA,SAAS;UACpBK,OAAO,EAAEA,OAAO;UAChBC,SAAS,EAAEA,SAAS;UACpBG,OAAO,EAAEA,OAAO;UAChBzB,IAAI,EAAE,IAAI,CAACH,IAAI,CAACG,IAAI;UACpBF,WAAW,EAAE,IAAI,CAACD,IAAI,CAACC,WAAW;UAClCC,YAAY,EAAE,IAAI,CAACF,IAAI,CAACE,YAAY;UACpCE,aAAa,EAAE,IAAI,CAACJ,IAAI,CAACI;QAC1B,CAAC;QACD,MAAM3B,KAAI,CACRwD,IAAI,CAAC,4CAA4C,EAAEF,QAAQ,EAAE;UAC7DG,OAAO,EAAE;YACRC,aAAa,EAAE,IAAI,CAAC5B;UACrB;QACD,CAAC,EACA6B,IAAI,CAAEC,QAAQ,IAAK;UACnB,IAAIA,QAAQ,CAACpD,IAAI,CAACqD,IAAG,IAAK,GAAG,EAAE;YAC9B,IAAI,CAACjC,MAAK,GAAI,KAAK;YACnB3B,MAAM,CAAC;cACN6D,KAAK,EAAE,IAAI,CAACC,SAAS,CAAC,mBAAmB,CAAC;cAC1CC,IAAI,EAAE,IAAI,CAACD,SAAS,CAAC,2BAA2B,CAAC;cACjDrC,IAAI,EAAE,SAAS;cACfuC,QAAQ,EAAE,IAAI;cACdC,KAAK,EAAE;YACR,CAAC,CAAC;YACF,IAAI,CAACC,OAAO,CAACC,OAAO,CAAC,UAAU,CAAC;UACjC,OAAO;YACN,IAAI,CAACxC,MAAK,GAAI,KAAK;YACnB3B,MAAM,CAAC;cACN6D,KAAK,EAAE,IAAI,CAACC,SAAS,CAAC,iBAAiB,CAAC;cACxCC,IAAI,EAAE,IAAI,CAACD,SAAS,CAAC,YAAY,CAAC;cAClCrC,IAAI,EAAE,OAAO;cACbuC,QAAQ,EAAE,IAAI;cACdC,KAAK,EAAE;YACR,CAAC,CAAC;UACH;QACD,CAAC,EACAG,KAAK,CAAEC,KAAK,IAAK;UACjB,IAAI,CAAC1C,MAAK,GAAI,KAAK;UACnB3B,MAAM,CAAC;YACN6D,KAAK,EAAE,IAAI,CAACC,SAAS,CAAC,iBAAiB,CAAC;YACxCC,IAAI,EAAE,IAAI,CAACD,SAAS,CAAC,YAAY,CAAC;YAClCrC,IAAI,EAAE,OAAO;YACbuC,QAAQ,EAAE,IAAI;YACdC,KAAK,EAAE;UACR,CAAC,CAAC;QACH,CAAC,CAAC;MACJ,OAAO;QACNjE,MAAM,CAAC;UACN6D,KAAK,EAAE,IAAI,CAACC,SAAS,CAAC,iBAAiB,CAAC;UACxCC,IAAI,EAAE,IAAI,CAACD,SAAS,CAAC,uBAAuB,CAAC;UAC7CrC,IAAI,EAAE,OAAO;UACbuC,QAAQ,EAAE,IAAI;UACdC,KAAK,EAAE;QACR,CAAC,CAAC;MACH;MACA;IACD,CAAC;;IACDK,SAAS,GAAG;MACV,IAAI,CAAChD,IAAI,CAACC,WAAU,GAAI,EAAE,EACzB,IAAI,CAACD,IAAI,CAACE,YAAW,GAAI,EAAE,EAC3B,IAAI,CAACF,IAAI,CAACG,IAAG,GAAI,EAAG;MACrB,IAAI,CAACH,IAAI,CAACI,aAAY,GAAI,IAAI,EAC7B,IAAI,CAACP,KAAK,CAACC,KAAI,GAAI,IAAIX,IAAI,EAAE,EAC7B,IAAI,CAACU,KAAK,CAACE,GAAE,GAAI,IAAIZ,IAAI,EAAE,EAC3B,IAAI,CAACkB,MAAK,GAAI,KAAM;IACvB,CAAC;IACD4C,IAAI,GAAG;MACN,IAAI,CAACL,OAAO,CAACC,OAAO,CAAC,eAAe,CAAC;IACtC,CAAC;IACDf,SAAS,GAAG;MACX,IAAI,CAACzB,MAAK,GAAI,KAAK;MACnB,IAAI,IAAI,CAACL,IAAI,CAACC,WAAU,IAAK,EAAC,IAAK,IAAI,CAACD,IAAI,CAACG,IAAG,IAAK,EAAE,EAAE;QACxD,OAAO,KAAK;MACb,OAAO;QACN,OAAO,IAAI;MACZ;IACD,CAAC;IACDqC,SAAS,CAACU,IAAI,EAAE;MACf,OAAO,IAAI,CAAC,IAAI,CAACxD,IAAI,CAAC,CAACwD,IAAI,CAAC;IAC7B,CAAC;IACDC,UAAU,CAAC3D,GAAG,EAAE;MACf4D,KAAK,CAAC,IAAI,CAACvD,KAAK,CAACC,KAAI,GAAI,GAAE,GAAI,IAAI,CAACD,KAAK,CAACE,GAAG,CAAC;IAC/C;EACD;AACD,CAAC","names":["en","pt","axios","notify","mapGetters","GET_USER_TOKEN_GETTER","GET_USER_LEVEL_GETTER","GET_USER_ID_GETTER","name","mixins","data","date","Date","year","getFullYear","month","getMonth","day","getDay","lang","localStorage","getItem","range","start","end","form","description","observations","type","notifications","isShow","computed","token","level","_id","methods","padTo2Digits","num","String","padStart","send1","sd","parseInt","getDate","startDate","toLocaleDateString","console","log","ed","endDate","startTime","getHours","getMinutes","endTime","send","checkForm","postData","apiary","post","headers","Authorization","then","response","http","title","translate","text","duration","speed","$router","replace","catch","error","cleanForm","back","prop","dayClicked","alert"],"sourceRoot":"","sources":["C:\\Users\\duart\\Desktop\\bhivesenseweb\\bhivesenseweb\\src\\views\\Newintervention.vue"],"sourcesContent":["/*\r\nMEIW - Programação Web Avançada - projeto final\r\nAuhtor: Duarte Cota\r\nDescription: implementation of the view Ficha de Inscrição\r\n*/\r\n\r\n<template>\r\n\t<!--<section class=\"scrolling-component\" ref=\"scrollcomponent\" name=\"lang\">-->\r\n\t<section class=\"container my-body\">\r\n\t\t<h2 class=\"my-text-color\">\r\n\t\t\t{{ translate(\"formNewInterventionTitle\") }}\r\n\t\t</h2>\r\n\t\t<section class=\"line-1\"></section>\r\n\t\t<form class=\"form-signin\" v-on:submit.prevent=\"send\">\r\n\t\t\t<section>\r\n\t\t\t\t<button type=\"submit\" class=\"btn mt-4 me-3 my-button\">\r\n\t\t\t\t\t<section v-if=\"!isShow\">\r\n\t\t\t\t\t\t{{ translate(\"btnSubmit\") }}\r\n\t\t\t\t\t</section>\r\n\t\t\t\t\t<section\r\n\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\tclass=\"spinner-border spinner-border-sm\"\r\n\t\t\t\t\t\trole=\"status\"\r\n\t\t\t\t\t></section>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button\r\n\t\t\t\t\t@click=\"cleanForm\"\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tclass=\"btn mt-4 me-3 my-button\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{{ translate(\"btnClean\") }}\r\n\t\t\t\t</button>\r\n\t\t\t\t<button @click=\"back\" type=\"button\" class=\"btn mt-4 my-button\">\r\n\t\t\t\t\t{{ translate(\"btnBack\") }}\r\n\t\t\t\t</button>\r\n\t\t\t</section>\r\n\t\t\t<section class=\"row mt-4\">\r\n\t\t\t\t<section class=\"col-md-6\">\r\n\t\t\t\t\t<label for=\"bdate\" class=\"form-label\">{{\r\n\t\t\t\t\t\ttranslate(\"formNewInterventionDate\")\r\n\t\t\t\t\t}}</label>\r\n\t\t\t\t\t<v-date-picker\r\n\t\t\t\t\t\t:locale=\"lang\"\r\n\t\t\t\t\t\tis-expanded\r\n\t\t\t\t\t\tv-model=\"range\"\r\n\t\t\t\t\t\tis-range\r\n\t\t\t\t\t\tis24hr\r\n\t\t\t\t\t\tmode=\"datetime\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</section>\r\n\t\t\t\t<section class=\"col-md-6\">\r\n\t\t\t\t\t<label for=\"observations\" class=\"form-label\">{{\r\n\t\t\t\t\t\ttranslate(\"formNewInterventionDescription\")\r\n\t\t\t\t\t}}</label>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\trows=\"5\"\r\n\t\t\t\t\t\tv-model=\"form.description\"\r\n\t\t\t\t\t\tclass=\"form-control\"\r\n\t\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\t\tstyle=\"font-size: small\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label for=\"observations\" class=\"form-label\">{{\r\n\t\t\t\t\t\ttranslate(\"formNewApiaryObservations\")\r\n\t\t\t\t\t}}</label>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\trows=\"5\"\r\n\t\t\t\t\t\tv-model=\"form.observations\"\r\n\t\t\t\t\t\tclass=\"form-control\"\r\n\t\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\t\tstyle=\"font-size: small\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label for=\"type\" class=\"form-label\">{{\r\n\t\t\t\t\t\ttranslate(\"selectLbl\")\r\n\t\t\t\t\t}}</label>\r\n\r\n\t\t\t\t\t<section class=\"my_radios\">\r\n\t\t\t\t\t\t<div class=\"form-check\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclass=\"form-check-input\"\r\n\t\t\t\t\t\t\t\tv-model=\"form.type\"\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tvalue=\"1\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\tclass=\"form-check-label\"\r\n\t\t\t\t\t\t\t\tfor=\"flexRadioDefault1\"\r\n\t\t\t\t\t\t\t\tstyle=\"color: green\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<strong>{{ translate(\"formNewInterventionType1\") }}</strong>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"form-check\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclass=\"form-check-input\"\r\n\t\t\t\t\t\t\t\tv-model=\"form.type\"\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tvalue=\"2\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\tclass=\"form-check-label\"\r\n\t\t\t\t\t\t\t\tfor=\"flexRadioDefault2\"\r\n\t\t\t\t\t\t\t\tstyle=\"color: orange\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<strong>{{ translate(\"formNewInterventionType2\") }}</strong>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"form-check\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclass=\"form-check-input\"\r\n\t\t\t\t\t\t\t\tv-model=\"form.type\"\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tvalue=\"3\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\tclass=\"form-check-label\"\r\n\t\t\t\t\t\t\t\tfor=\"flexRadioDefault3\"\r\n\t\t\t\t\t\t\t\tstyle=\"color: red\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<strong>{{ translate(\"formNewInterventionType3\") }}</strong>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t<section class=\"form-check mt-3\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclass=\"form-check-input\"\r\n\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\tv-model=\"form.notifications\"\r\n\t\t\t\t\t\t\tvalue=\"\"\r\n\t\t\t\t\t\t\tid=\"subscribenews\"\r\n\t\t\t\t\t\t\tchecked\r\n\t\t\t\t\t\t\tstyle=\"text-align: left: important;\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label class=\"form-check-label\" for=\"subscribenews\">\r\n\t\t\t\t\t\t\t{{ translate(\"formNewInterventionNotifications\") }}</label\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</section>\r\n\t\t\t</section>\r\n\t\t</form>\r\n\r\n\t\t<section class=\"spacer\"></section>\r\n\t</section>\r\n\t<!--</section>>-->\r\n</template>\r\n\r\n<style scoped>\r\n.my_radios {\r\n\tbackground-color: white;\r\n\tborder-radius: 4px;\r\n\tpadding: 5px;\r\n}\r\n\r\nselect option[disabled]:first-child {\r\n\tdisplay: none;\r\n}\r\n\r\n.spacer {\r\n\theight: 200px;\r\n}\r\n</style>\r\n\r\n<script>\r\n\timport en from \"../assets/en.js\";\r\n\timport pt from \"../assets/pt.js\";\r\n\timport axios from \"axios\";\r\n\timport { notify } from \"@kyvg/vue3-notification\";\r\n\timport { mapGetters } from \"vuex\";\r\n\timport {\r\n\t\tGET_USER_TOKEN_GETTER,\r\n\t\tGET_USER_LEVEL_GETTER,\r\n\t\tGET_USER_ID_GETTER,\r\n\t} from \"../store/storeconstants\";\r\n\texport default {\r\n\t\tname: \"new intervention\",\r\n\t\tmixins: [en, pt],\r\n\t\tdata() {\r\n\t\t\tconst date = new Date();\r\n\t\t\tconst year = date.getFullYear();\r\n\t\t\tconst month = date.getMonth();\r\n\t\t\tconst day = date.getDay();\r\n\t\t\tconst lang = localStorage.getItem(\"lang\") || \"en\";\r\n\t\t\treturn {\r\n\t\t\t\trange: {\r\n\t\t\t\t\tstart: new Date(),\r\n\t\t\t\t\tend: new Date(),\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tdescription: \"\",\r\n\t\t\t\t\tobservations: \"\",\r\n\t\t\t\t\ttype: \"\",\r\n\t\t\t\t\tnotifications: true,\r\n\t\t\t\t},\r\n\t\t\t\tisShow: false,\r\n\t\t\t\tlang: lang,\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapGetters(\"auth\", {\r\n\t\t\t\ttoken: GET_USER_TOKEN_GETTER,\r\n\t\t\t\tlevel: GET_USER_LEVEL_GETTER,\r\n\t\t\t\t_id: GET_USER_ID_GETTER,\r\n\t\t\t}),\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tpadTo2Digits(num) {\r\n\t\t\t\treturn String(num).padStart(2, \"0\");\r\n\t\t\t},\r\n\t\t\tsend1() {\r\n\t\t\t\t//format start date\r\n\t\t\t\tlet sd = new Date(\r\n\t\t\t\t\tthis.range.start.getFullYear() +\r\n\t\t\t\t\t\t\"-\" +\r\n\t\t\t\t\t\t(parseInt(this.range.start.getMonth()) + 1) +\r\n\t\t\t\t\t\t\"-\" +\r\n\t\t\t\t\t\tthis.range.start.getDate()\r\n\t\t\t\t);\r\n\t\t\t\tlet startDate = sd.toLocaleDateString(\"sv-SE\", {\r\n\t\t\t\t\tyear: \"numeric\",\r\n\t\t\t\t\tmonth: \"2-digit\",\r\n\t\t\t\t\tday: \"2-digit\",\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(startDate);\r\n\t\t\t\t//format end date\r\n\t\t\t\tlet ed = new Date(\r\n\t\t\t\t\tthis.range.end.getFullYear() +\r\n\t\t\t\t\t\t\"-\" +\r\n\t\t\t\t\t\t(parseInt(this.range.end.getMonth()) + 1) +\r\n\t\t\t\t\t\t\"-\" +\r\n\t\t\t\t\t\tthis.range.end.getDate()\r\n\t\t\t\t);\r\n\t\t\t\tlet endDate = ed.toLocaleDateString(\"sv-SE\", {\r\n\t\t\t\t\tyear: \"numeric\",\r\n\t\t\t\t\tmonth: \"2-digit\",\r\n\t\t\t\t\tday: \"2-digit\",\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(endDate);\r\n\t\t\t\t//format start time\r\n\t\t\t\tconst startTime =\r\n\t\t\t\t\tthis.padTo2Digits(this.range.start.getHours()) +\r\n\t\t\t\t\t\":\" +\r\n\t\t\t\t\tthis.padTo2Digits(this.range.start.getMinutes());\r\n\t\t\t\tconsole.log(startTime);\r\n\t\t\t\t//format end time\r\n\t\t\t\tconst endTime =\r\n\t\t\t\t\tthis.padTo2Digits(this.range.end.getHours()) +\r\n\t\t\t\t\t\":\" +\r\n\t\t\t\t\tthis.padTo2Digits(this.range.end.getMinutes());\r\n\t\t\t\tconsole.log(endTime);\r\n\t\t\t},\r\n\t\t\tasync send() {\r\n\t\t\t\tthis.isShow = true;\r\n\t\t\t\tif (this.checkForm() == true) {\r\n\t\t\t\t\t//format start date\r\n\t\t\t\t\tlet sd = new Date(\r\n\t\t\t\t\t\tthis.range.start.getFullYear() +\r\n\t\t\t\t\t\t\t\"-\" +\r\n\t\t\t\t\t\t\t(parseInt(this.range.start.getMonth()) + 1) +\r\n\t\t\t\t\t\t\t\"-\" +\r\n\t\t\t\t\t\t\tthis.range.start.getDate()\r\n\t\t\t\t\t);\r\n\t\t\t\t\tlet startDate = sd.toLocaleDateString(\"sv-SE\", {\r\n\t\t\t\t\t\tyear: \"numeric\",\r\n\t\t\t\t\t\tmonth: \"2-digit\",\r\n\t\t\t\t\t\tday: \"2-digit\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log(startDate);\r\n\t\t\t\t\t//format end date\r\n\t\t\t\t\tlet ed = new Date(\r\n\t\t\t\t\t\tthis.range.end.getFullYear() +\r\n\t\t\t\t\t\t\t\"-\" +\r\n\t\t\t\t\t\t\t(parseInt(this.range.end.getMonth()) + 1) +\r\n\t\t\t\t\t\t\t\"-\" +\r\n\t\t\t\t\t\t\tthis.range.end.getDate()\r\n\t\t\t\t\t);\r\n\t\t\t\t\tlet endDate = ed.toLocaleDateString(\"sv-SE\", {\r\n\t\t\t\t\t\tyear: \"numeric\",\r\n\t\t\t\t\t\tmonth: \"2-digit\",\r\n\t\t\t\t\t\tday: \"2-digit\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log(endDate);\r\n\t\t\t\t\t//format start time\r\n\t\t\t\t\tlet startTime =\r\n\t\t\t\t\t\tthis.padTo2Digits(this.range.start.getHours()) +\r\n\t\t\t\t\t\t\":\" +\r\n\t\t\t\t\t\tthis.padTo2Digits(this.range.start.getMinutes());\r\n\t\t\t\t\tconsole.log(startTime);\r\n\t\t\t\t\t//format end time\r\n\t\t\t\t\tlet endTime =\r\n\t\t\t\t\t\tthis.padTo2Digits(this.range.end.getHours()) +\r\n\t\t\t\t\t\t\":\" +\r\n\t\t\t\t\t\tthis.padTo2Digits(this.range.end.getMinutes());\r\n\t\t\t\t\tconsole.log(endTime);\r\n\t\t\t\t\tlet postData = {\r\n\t\t\t\t\t\tapiary: localStorage.getItem(\"idtointerventions\"),\r\n\t\t\t\t\t\tstartDate: startDate,\r\n\t\t\t\t\t\tendDate: endDate,\r\n\t\t\t\t\t\tstartTime: startTime,\r\n\t\t\t\t\t\tendTime: endTime,\r\n\t\t\t\t\t\ttype: this.form.type,\r\n\t\t\t\t\t\tdescription: this.form.description,\r\n\t\t\t\t\t\tobservations: this.form.observations,\r\n\t\t\t\t\t\tnotifications: this.form.notifications,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tawait axios\r\n\t\t\t\t\t\t.post(\"https://bhsapi.duartecota.com/intervention\", postData, {\r\n\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\tAuthorization: this.token,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then((response) => {\r\n\t\t\t\t\t\t\tif (response.data.http == 201) {\r\n\t\t\t\t\t\t\t\tthis.isShow = false;\r\n\t\t\t\t\t\t\t\tnotify({\r\n\t\t\t\t\t\t\t\t\ttitle: this.translate(\"notifSuccessTitle\"),\r\n\t\t\t\t\t\t\t\t\ttext: this.translate(\"mesNewInterventionSuccess\"),\r\n\t\t\t\t\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\t\t\t\t\tduration: 3000,\r\n\t\t\t\t\t\t\t\t\tspeed: 500,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthis.$router.replace(\"apiaries\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.isShow = false;\r\n\t\t\t\t\t\t\t\tnotify({\r\n\t\t\t\t\t\t\t\t\ttitle: this.translate(\"notifErrorTitle\"),\r\n\t\t\t\t\t\t\t\t\ttext: this.translate(\"mesProblem\"),\r\n\t\t\t\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\t\t\t\tduration: 3000,\r\n\t\t\t\t\t\t\t\t\tspeed: 500,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\t\tthis.isShow = false;\r\n\t\t\t\t\t\t\tnotify({\r\n\t\t\t\t\t\t\t\ttitle: this.translate(\"notifErrorTitle\"),\r\n\t\t\t\t\t\t\t\ttext: this.translate(\"mesProblem\"),\r\n\t\t\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\t\t\tduration: 3000,\r\n\t\t\t\t\t\t\t\tspeed: 500,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnotify({\r\n\t\t\t\t\t\ttitle: this.translate(\"notifErrorTitle\"),\r\n\t\t\t\t\t\ttext: this.translate(\"mesFieldsIntervention\"),\r\n\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\tduration: 3000,\r\n\t\t\t\t\t\tspeed: 500,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t//postData.append(\"lang\", this.lang); //enviar se necessário para e-mail\r\n\t\t\t},\r\n\t\t\tcleanForm() {\r\n\t\t\t\t(this.form.description = \"\"),\r\n\t\t\t\t\t(this.form.observations = \"\"),\r\n\t\t\t\t\t(this.form.type = \"\");\r\n\t\t\t\t(this.form.notifications = true),\r\n\t\t\t\t\t(this.range.start = new Date()),\r\n\t\t\t\t\t(this.range.end = new Date()),\r\n\t\t\t\t\t(this.isShow = false);\r\n\t\t\t},\r\n\t\t\tback() {\r\n\t\t\t\tthis.$router.replace(\"interventions\");\r\n\t\t\t},\r\n\t\t\tcheckForm() {\r\n\t\t\t\tthis.isShow = false;\r\n\t\t\t\tif (this.form.description == \"\" || this.form.type == \"\") {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttranslate(prop) {\r\n\t\t\t\treturn this[this.lang][prop];\r\n\t\t\t},\r\n\t\t\tdayClicked(day) {\r\n\t\t\t\talert(this.range.start + \";\" + this.range.end);\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}